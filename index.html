<!DOCTYPE html>
<meta charset="utf-8">
<style>
        .d01 {background-color:rgb(232, 221, 243); position:absolute;top: 5%;left: 0%;height: 22%;width: 20%;}
        .d02 {background-color:lemonchiffon; position:absolute;top: 5%;left: 20%;height: 22%;width: 20%;}
        .d03 {background-color:rgb(232, 221, 243); position:absolute;top: 5%;left: 40%;height: 22%;width: 20%;}
        .d04 {background-color:rgb(211, 210, 202); position:absolute;top: 5%;left: 60%;height: 22%;width: 20%;}
        .d05 {background-color:rgb(232, 221, 243); position:absolute;top: 5%;left: 80%;height: 22%;width: 20%;}
        .d11 {background-color:rgb(243, 230, 172); position:absolute;top: 28%;left: 0%;height: 35%;width: 29%;}
        .d12 {background-color:rgb(242, 239, 245); position:absolute;top: 64%;left: 0%;height: 12%;width: 29%;}
        .d13 {background-color:rgb(255, 255, 255); position:absolute;top: 29%;left: 30%;height: 15%;width: 8%;}
        .d14 {background-color:rgb(255, 255, 255); position:absolute;top: 28%;left: 39%;height: 48%;width: 22%;}
        .d15 {background-color:rgb(255, 255, 255); position:absolute;top: 60%;left: 62%;height: 15%;width: 8%;}
        .d16 {background-color:rgb(236, 234, 227); position:absolute;top: 41%;left: 71%;height: 35%;width: 29%;}
        .d21 {background-color:lemonchiffon; position:absolute;top: 77%;left: 0%;height: 22%;width: 20%;}
        .d22 {background-color:rgb(232, 221, 243); position:absolute;top: 77%;left: 20%;height: 22%;width: 20%;}
        .d23 {background-color:lemonchiffon; position:absolute;top: 77%;left: 40%;height: 22%;width: 20%;}
        .d24 {background-color:rgb(232, 221, 243); position:absolute;top: 77%;left: 60%;height: 22%;width: 20%;}
        .d25 {background-color:lemonchiffon; position:absolute;top: 77%;left: 80%;height: 22%;width: 20%;}
     
body {
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;

}

svg {
	width: 100%;
	height: 100%;
}

path.slice{
	stroke-width:2px;
}

polyline{
	opacity: .3;
	stroke: black;
	stroke-width: 2px;
	fill: none;
}

.bar {
  fill: steelblue;
}

.bar:hover {
  fill: lightblue;
}

.axis text {
  font: 10px sans-serif;
}

.axis path,
.axis line {
  fill: none;
  stroke: #000;
  shape-rendering: crispEdges;
}

.x.axis path {
  display: none;
}

.tooltip {
  position: absolute;
  padding: 10px;
  font: 12px sans-serif;
  background: #222;
  color: #fff;
  border: 0px;
  border-radius: 8px;
  pointer-events: none;
  opacity: 0.9;
  visibility: hidden;
}

</style>
<body> 
<button class="randomize">randomize</button>
<select id="ocountries">
    <option value="Angola">Angola</option>
    <option value="Burundi">Burundi</option>
</select>
<select id="oyears">
    <option value="2018">2018</option>
    <option value="2019">2019</option>
</select>
<div class="mdiv">
<div class="d01" id="dd01"></div>
<div class="d02" id="dd02"></div>
<div class="d03" id="dd03"></div>
<div class="d04" id="dd04"></div>
<div class="d05" id="dd05"></div>
<div class="d11" id="dd11"></div>
<div class="d12" id="dd12"></div>
<div class="d13" id="dd13"><svg class="chart1"></svg></div>
<div class="d14" id="dd14"><svg class="chart"></svg></div>
<div class="d15" id="dd15"><svg class="chart2"></svg></div>
<div class="d16" id="dd16"></div>
<div class="d21" id="dd21"></div>
<div class="d22" id="dd22"></div>
<div class="d23" id="dd23"></div>
<div class="d24" id="dd24"></div>
<div class="d25" id="dd25"></div>
</div>
<script src="d3.v3.min.js"></script>
<script>

var wd = (window.innerWidth);
//alert(wd)
var hd = Math.round(wd*1800/3200);
//alert(hd)
d3.select("body").attr("width", wd)
d3.select("body").attr("height", hd)
d3.select(".mdiv").attr("width", wd)
d3.select(".mdiv").attr("height", hd)
d3.select('#ocountries')
	.on('change', function(){
		countrychange();
	});
d3.select('#oyears')
	.on('change', function(){
        yearchange();
	});

d3.select('#ocountries').property('value', 'Angola');
d3.select('#oyears').property('value', '2018');
var scountry = d3.select('#ocountries option:checked').text();
//alert (scountry)

var syear = d3.select('#oyears option:checked').text();
//alert (syear)

var alldata; 
var dataset;
var ccode = "AGO";
var syear = "2018";
var maxds = 0;
d3.csv("data000.csv", function(data){
    alldata=data;
    var i;
	var i0;
	for (i=0; i< data.length;i++){
		//alert(i)
		//alert(data[i].ccode)
		//alert(data[i].year)
		if (data[i].country ==scountry){
			if (data[i].year == syear){
				//alert ("oui")
				i0 = i
				dataset = data[i]
				if (parseFloat(dataset.v01) > maxds){maxds = parseFloat(dataset.v01)}
				if (parseFloat(dataset.v02) > maxds){maxds = parseFloat(dataset.v02)}
				if (parseFloat(dataset.v03) > maxds){maxds = parseFloat(dataset.v03)}
				if (parseFloat(dataset.v04) > maxds){maxds = parseFloat(dataset.v04)}
				if (parseFloat(dataset.v05) > maxds){maxds = parseFloat(dataset.v05)}
				if (parseFloat(dataset.v06) > maxds){maxds = parseFloat(dataset.v06)}
				if (parseFloat(dataset.v07) > maxds){maxds = parseFloat(dataset.v07)}
				if (parseFloat(dataset.v08) > maxds){maxds = parseFloat(dataset.v08)}
				if (parseFloat(dataset.v09) > maxds){maxds = parseFloat(dataset.v09)}
				if (parseFloat(dataset.v10) > maxds){maxds = parseFloat(dataset.v10)}
				if (parseFloat(dataset.v11) > maxds){maxds = parseFloat(dataset.v11)}
				if (parseFloat(dataset.v12) > maxds){maxds = parseFloat(dataset.v12)}
				if (parseFloat(dataset.v13) > maxds){maxds = parseFloat(dataset.v13)}
				if (parseFloat(dataset.v14) > maxds){maxds = parseFloat(dataset.v14)}
				if (parseFloat(dataset.v15) > maxds){maxds = parseFloat(dataset.v15)}
				if (parseFloat(dataset.v16) > maxds){maxds = parseFloat(dataset.v16)}
				if (parseFloat(dataset.v17) > maxds){maxds = parseFloat(dataset.v17)}
				if (parseFloat(dataset.v18) > maxds){maxds = parseFloat(dataset.v18)}
				if (parseFloat(dataset.v19) > maxds){maxds = parseFloat(dataset.v19)}
				if (parseFloat(dataset.v20) > maxds){maxds = parseFloat(dataset.v20)}
			}
		}
	};

	//alert(maxds);
    //alert (dataset.country);
	var svg = d3.select("#dd11")
		.append("svg:svg")
		.append("g")
svg.append("g")
	.attr("class", "slices");
svg.append("g")
	.attr("class", "labels");
svg.append("g")
	.attr("class", "lines");
svg.append("g")
  .attr("class", "images");

var width = Math.round((+d3.select("#dd11").style('width').slice(0, -2))*1),
    height = Math.round((+d3.select("#dd11").style('height').slice(0, -2))*1),
	radius = Math.min(width, height) /3;

var pie = d3.layout.pie()
	.sort(null)
	.value(function(d) {
		return d.value;
	});

var arc = d3.svg.arc()
	.outerRadius(radius * 1.2)
	.innerRadius(radius * 0.2);

var outerArc = d3.svg.arc()
	.innerRadius(radius * 1.2)
	.outerRadius(radius * 0.1);

svg.attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");

var key = function(d){ return d.data.label; };

var color = d3.scale.ordinal()
	.domain(["Lorem ipsum", "dolor sit", "amet", "consectetur", "adipisicing", "elit", "sed", "do", "eiusmod", "tempor", "incididunt"])
	.range(["#98abc5", "#8a89a6", "#7b6888", "#6b486b", "#a05d56", "#d0743c", "#ff8c00"]);

function randomData (){
	var labels = color.domain();
	return labels.map(function(label){
		return { label: label, value: Math.random(), imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/agri.png' }
	});
}

var arr=[
           {label:'value1',
            value:'15',
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/FoodAndLA_EN.bmp'},
           {label:'value2',
            value:'35',
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/boissons1.bmp'},
           {label:'value3',
            value:'5',
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/merauxnonc.bmp'},
            {label:'value4',
            value:'50',
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/mineral%20fuels%20etc.bmp'},
			{label:'value5',
            value:'15',
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/butter.bmp'},
           {label:'value6',
            value:'35',
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/chemistry.bmp'},
           {label:'value7',
            value:'5',
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/clothes.bmp'},
            {label:'value8',
            value:'50',
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/bus.bmp'},
			{label:'value9',
            value:'15',
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/amd.bmp'},
           {label:'value10',
            value:'35',
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/tourism0.bmp'},
        ];

function mydata (){
		return arr;
}

d3.select(".randomize")
	.on("click", function(){
		change(randomData());
	});

// change(randomData());

change(arr);

function change(data) {

	/* ------- PIE SLICES -------*/
	var slice = svg.select(".slices").selectAll("path.slice")
		.data(pie(data), key);

	slice.enter()
		.insert("path")
		.style("fill", function(d) { return color(d.data.label); })
		.attr("class", "slice");

	slice		
		.transition().duration(1000)
		.attrTween("d", function(d) {
			this._current = this._current || d;
			var interpolate = d3.interpolate(this._current, d);
			this._current = interpolate(0);
			return function(t) {
				return arc(interpolate(t));
			};
		})

	slice.exit()
		.remove();

	/* ------- TEXT LABELS -------*/

	var text = svg.select(".labels").selectAll("text")
		.data(pie(data), key);
		
	var img = svg.select(".images").selectAll("image")
	  .data(pie(data), key);
	  
	 text.enter()
		.append("text")
		.filter(function(d,i){
		  return d.data.label !== "do";
		})
		.attr("dy", ".35em")
		.text(function(d) {
			return "(" + d.data.value+ ")";
		});

	text.transition().duration(1000)
		.attrTween("transform", function(d) {
			this._current = this._current || d;
			var interpolate = d3.interpolate(this._current, d);
			this._current = interpolate(0);
			return function(t) {
				var d2 = interpolate(t);
				var pos = outerArc.centroid(d2);
				pos[0] = radius * (midAngle(d2) < Math.PI ? 2 : -2);
				return "translate("+ pos +")";
			};
		})
		.styleTween("text-anchor", function(d){
			this._current = this._current || d;
			var interpolate = d3.interpolate(this._current, d);
			this._current = interpolate(0);
			return function(t) {
				var d2 = interpolate(t);
				return midAngle(d2) < Math.PI ? "start":"end";
			};
		});
		
	function midAngle(d){
		return d.startAngle + (d.endAngle - d.startAngle)/2;
	}

	text.exit()
		.remove();
		
	img.enter()
		.append("image")
		.filter(function(d,i){
		  return d.data.label;
		})
		.attr("xlink:href", function(d,i){
		  return d.data.imglink;
		})
    .attr("width", 200)
    .attr("height", 70);
    
  img.transition().duration(1000)
		.attrTween("transform", function(d) {
			this._current = this._current || d;
			var interpolate = d3.interpolate(this._current, d);
			this._current = interpolate(0);
			return function(t) {
				var d2 = interpolate(t);
				var pos = outerArc.centroid(d2);
				pos[0] = radius * 0.6 * (midAngle(d2) < Math.PI ? 2 : -3);
				return "translate("+ pos +")";
			};
		})
    
	img.exit()
		.remove();

	/* ------- SLICE TO TEXT POLYLINES -------*/

	var polyline = svg.select(".lines").selectAll("polyline")
		.data(pie(data), key);
	
	polyline.enter()
		.append("polyline");

	polyline.transition().duration(1000)
		.attrTween("points", function(d){
			this._current = this._current || d;
			var interpolate = d3.interpolate(this._current, d);
			this._current = interpolate(0);
			return function(t) {
				var d2 = interpolate(t);
				var pos = outerArc.centroid(d2);
				pos[0] = radius * 0.6 * (midAngle(d2) < Math.PI ? 2 : -2);
				return [arc.centroid(d2), outerArc.centroid(d2), pos];
			};			
		});
	
	polyline.exit()
		.remove();
};

//============================================================================================================

var svg = d3.select("#dd16")
	.append("svg")
	.append("g")

svg.append("g")
	.attr("class", "slices");
svg.append("g")
	.attr("class", "labels");
svg.append("g")
	.attr("class", "lines");
svg.append("g")
  .attr("class", "images");

/*var width = 1000,
    height = 550,
	radius = Math.min(width, height) / 3;*/

var pie = d3.layout.pie()
	.sort(null)
	.value(function(d) {
		return d.value;
	});

var arc = d3.svg.arc()
	.outerRadius(radius * 0.8)
	.innerRadius(radius * 0.4);

var outerArc = d3.svg.arc()
	.innerRadius(radius * 1.3)
	.outerRadius(radius * 1.3);

svg.attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");

var key = function(d){ return d.data.label; };

var color = d3.scale.ordinal()
	.domain(["Lorem ipsum", "dolor sit", "amet", "consectetur", "adipisicing", "elit", "sed", "do", "eiusmod", "tempor", "incididunt"])
	.range(["#98abc5", "#8a89a6", "#7b6888", "#6b486b", "#a05d56", "#d0743c", "#ff8c00"]);

function randomData (){
	var labels = color.domain();
	return labels.map(function(label){
		return { label: label, value: Math.random(), imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/agri.png' }
	});
}

var arr=[
           {label:'value1',
            value:'15',
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/FoodAndLA_EN.bmp'},
           {label:'value2',
            value:'35',
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/boissons1.bmp'},
           {label:'value3',
            value:'5',
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/merauxnonc.bmp'},
            {label:'value4',
            value:'50',
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/mineral%20fuels%20etc.bmp'},
			{label:'value5',
            value:'15',
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/butter.bmp'},
           {label:'value6',
            value:'35',
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/chemistry.bmp'},
           {label:'value7',
            value:'5',
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/clothes.bmp'},
            {label:'value8',
            value:'50',
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/bus.bmp'},
			{label:'value9',
            value:'15',
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/amd.bmp'},
           {label:'value10',
            value:'35',
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/tourism0.bmp'},
        ];

function mydata (){
		return arr;
}

d3.select(".randomize")
	.on("click", function(){
		change(randomData());
	});

// change(randomData());

change(arr);

function change(data) {

	/* ------- PIE SLICES -------*/
	var slice = svg.select(".slices").selectAll("path.slice")
		.data(pie(data), key);

	slice.enter()
		.insert("path")
		.style("fill", function(d) { return color(d.data.label); })
		.attr("class", "slice");

	slice		
		.transition().duration(1000)
		.attrTween("d", function(d) {
			this._current = this._current || d;
			var interpolate = d3.interpolate(this._current, d);
			this._current = interpolate(0);
			return function(t) {
				return arc(interpolate(t));
			};
		})

	slice.exit()
		.remove();

	/* ------- TEXT LABELS -------*/

	var text = svg.select(".labels").selectAll("text")
		.data(pie(data), key);
		
	var img = svg.select(".images").selectAll("image")
	  .data(pie(data), key);
	  
	 text.enter()
		.append("text")
		.filter(function(d,i){
		  return d.data.label !== "do";
		})
		.attr("dy", ".35em")
		.text(function(d) {
			return "(" + d.data.value+ ")";
		});

	text.transition().duration(1000)
		.attrTween("transform", function(d) {
			this._current = this._current || d;
			var interpolate = d3.interpolate(this._current, d);
			this._current = interpolate(0);
			return function(t) {
				var d2 = interpolate(t);
				var pos = outerArc.centroid(d2);
				pos[0] = radius * (midAngle(d2) < Math.PI ? 2 : -2);
				return "translate("+ pos +")";
			};
		})
		.styleTween("text-anchor", function(d){
			this._current = this._current || d;
			var interpolate = d3.interpolate(this._current, d);
			this._current = interpolate(0);
			return function(t) {
				var d2 = interpolate(t);
				return midAngle(d2) < Math.PI ? "start":"end";
			};
		});
		
	function midAngle(d){
		return d.startAngle + (d.endAngle - d.startAngle)/2;
	}

	text.exit()
		.remove();
		
	img.enter()
		.append("image")
		.filter(function(d,i){
		  return d.data.label;
		})
		.attr("xlink:href", function(d,i){
		  return d.data.imglink;
		})
    .attr("width", 60)
    .attr("height", 20);
    
  img.transition().duration(1000)
		.attrTween("transform", function(d) {
			this._current = this._current || d;
			var interpolate = d3.interpolate(this._current, d);
			this._current = interpolate(0);
			return function(t) {
				var d2 = interpolate(t);
				var pos = outerArc.centroid(d2);
				pos[0] = radius * 0.6 * (midAngle(d2) < Math.PI ? 1.8 : -3.3);
				return "translate("+ pos +")";
			};
		})
    
	img.exit()
		.remove();

	/* ------- SLICE TO TEXT POLYLINES -------*/

	var polyline = svg.select(".lines").selectAll("polyline")
		.data(pie(data), key);
	
	polyline.enter()
		.append("polyline");

	polyline.transition().duration(1000)
		.attrTween("points", function(d){
			this._current = this._current || d;
			var interpolate = d3.interpolate(this._current, d);
			this._current = interpolate(0);
			return function(t) {
				var d2 = interpolate(t);
				var pos = outerArc.centroid(d2);
				pos[0] = radius * 0.6 * (midAngle(d2) < Math.PI ? 2 : -2);
				return [arc.centroid(d2), outerArc.centroid(d2), pos];
			};			
		});
	
	polyline.exit()
		.remove();
};

//============================================================================================================
d3.csv("https://raw.githubusercontent.com/ssissouf/ha/master/ddd23.txt", function(data) {

///////////////////////
// Chart Size Setup
var margin = { top: 35, right: 0, bottom: 30, left: 40 };

var width = 960 - margin.left - margin.right;
var height = 500 - margin.top - margin.bottom;

var chart = d3.select(".chart")
	.attr("width", Math.round((+d3.select("#dd14").style('width').slice(0, -2))*1))
	.attr("height", Math.round((+d3.select("#dd14").style('height').slice(0, -2))*1))
          .append("image")
          .attr('id','mmp')
          .attr('xlink:href', 'https://raw.githubusercontent.com/ssissouf/ha/master/ANGOLA001.png')
           .attr('width', Math.round((+d3.select("#dd14").style('width').slice(0, -2))*1))
           .attr('height', Math.round((+d3.select("#dd14").style('height').slice(0, -2))*1))
           .attr("x",0)
           .attr("y",0);

    var chart234 = d3.select(".chart1")
	.attr("width", Math.round((+d3.select("#dd13").style('width').slice(0, -2))*1))
	.attr("height", Math.round((+d3.select("#dd13").style('height').slice(0, -2))*1))
          .append("image")
          .attr('xlink:href', 'https://raw.githubusercontent.com/ssissouf/ha/master/arrow001.png')
          .attr("width", Math.round((+d3.select("#dd13").style('width').slice(0, -2))*1))
	.attr("height", Math.round((+d3.select("#dd13").style('height').slice(0, -2))*1))
           .attr("x",0)
           .attr("y",0);

    var chart2344 = d3.select(".chart2")
	.attr("width", Math.round((+d3.select("#dd15").style('width').slice(0, -2))*1))
	.attr("height", Math.round((+d3.select("#dd15").style('height').slice(0, -2))*1))
          .append("image")
          .attr('xlink:href', 'https://raw.githubusercontent.com/ssissouf/ha/master/arrow001.png')
          .attr("width", Math.round((+d3.select("#dd15").style('width').slice(0, -2))*1))
	.attr("height", Math.round((+d3.select("#dd15").style('height').slice(0, -2))*1))
           .attr("x",0)
           .attr("y",5);
///////////////////////
// Scales
var x = d3.scale.ordinal()
	.domain(data.map(function(d) { return d['state']; }))
	.rangeRoundBands([0, width], .1);

var y = d3.scale.linear()
	.domain([0, d3.max(data, function(d) { return d['starbucks']; }) * 1.1])
	.range([height, 0]);

///////////////////////
// Axis
var xAxis = d3.svg.axis()
	.scale(x)
	.orient("bottom");

var yAxis = d3.svg.axis()
	.scale(y)
	.orient("left");

chart.append("g")
	.attr("class", "x axis")
	.attr("transform", "translate(0," + height + ")")
	.call(xAxis);

chart.append("g")
	.attr("id", "wee")
    .attr("class", "y axis")
	.call(yAxis);

///////////////////////
// Title
chart.append("text")
  .text('Bar Chart!')
  .attr("text-anchor", "middle")
  .attr("class", "graph-title")
  .attr("y", -10)
  .attr("x", width / 2.0);

///////////////////////
// Bars
var bar = chart.selectAll(".bar")
	.data(data)
  .enter().append("rect")
	.attr("class", "bar")
	.attr("x", function(d) { return x(d['state']); })
	.attr("y", height)
	.attr("width", x.rangeBand())
	.attr("height", 0);

bar.transition()
	.duration(1500)
	.ease("elastic")
	.attr("y", function(d) { return y(d['starbucks']); })
	.attr("height", function(d) { return height - y(d['starbucks']); })

///////////////////////
// Tooltips
var tooltip = d3.select("body").append("div")
	.attr("class", "tooltip");

bar.on("mouseover", function(d) {
	  tooltip.html(d['value'])
		  .style("visibility", "visible");
	})
	.on("mousemove", function(d) {
	  tooltip.style("top", event.pageY - (tooltip[0][0].clientHeight + 5) + "px")
		  .style("left", event.pageX - (tooltip[0][0].clientWidth / 2.0) + "px");
	})
	.on("mouseout", function(d) {
	  tooltip.style("visibility", "hidden");
	});
});

var data01 = [
	{ "indicator": "exports", "value": 1253},
    { "indicator": "imports", "value": 492}
];










function getTextWidth(text, fontSize, fontName) {
            c = document.createElement("canvas");
            ctx = c.getContext("2d");
            ctx.font = fontSize + ' ' + fontName;
            return ctx.measureText(text).width;
        }

        function DataSegregator(array, on) {
            var SegData;
            OrdinalPositionHolder = {
                valueOf: function () {
                    thisObject = this;
                    keys = Object.keys(thisObject);
                    keys.splice(keys.indexOf("valueOf"), 1);
                    keys.splice(keys.indexOf("keys"), 1);
                    return keys.length == 0 ? -1 : d3.max(keys, function (d) { return thisObject[d] })
                }
                , keys: function () {
                    keys = Object.keys(thisObject);
                    keys.splice(keys.indexOf("valueOf"), 1);
                    keys.splice(keys.indexOf("keys"), 1);
                    return keys;
                }
            }
            array[0].map(function (d) { return d[on] }).forEach(function (b) {
                value = OrdinalPositionHolder.valueOf();
                OrdinalPositionHolder[b] = OrdinalPositionHolder > -1 ? ++value : 0;
            })

            SegData = OrdinalPositionHolder.keys().map(function () {
                return [];
            });

            array.forEach(function (d) {
                d.forEach(function (b) {
                    SegData[OrdinalPositionHolder[b[on]]].push(b);
                })
            });

            return SegData;
        }

//0000


Data = [
{ Date: "imports", Categories: [{ Name: "Category1", Value: dataset.v01, gg:"category1" }], LineCategory: [{ Name: "Line1", Value: dataset.v01 }] },
{ Date: "exports", Categories: [{ Name: "Category1", Value: dataset.v11, gg:"category2" }], LineCategory: [{ Name: "Line1", Value: dataset.v11 }] },
       ]

        var margin = { top: Math.round((+d3.select("#dd01").style('height').slice(0, -2))*0.1), right: Math.round((+d3.select("#dd01").style('width').slice(0, -2))*0.05), bottom: Math.round((+d3.select("#dd01").style('height').slice(0, -2))*0.02), left: Math.round((+d3.select("#dd01").style('width').slice(0, -2))*0.1) },
            width = Math.round((+d3.select("#dd01").style('width').slice(0, -2))*0.5) - margin.left - margin.right,
            height = Math.round((+d3.select("#dd01").style('height').slice(0, -2))*1) - margin.top - margin.bottom;

        var textWidthHolder = 0;
        /// Adding Date in LineCategory
        Data.forEach(function (d) {
            d.LineCategory.forEach(function (b) {
                b.Date = d.Date;
            })
        });




        var Categories = new Array();
        // Extension method declaration

        Categories.pro

        var Data;
        var ageNames;
        var x0 = d3.scale.ordinal()
            .rangeRoundBands([0, width], .1);
        var XLine = d3.scale.ordinal()
            .rangeRoundPoints([0, width], .1);
        var x1 = d3.scale.ordinal();

        var y = d3.scale.linear()
            .range([height, 0]);

        /*/*var YLine = d3.scale.linear().range([height, 0])
        .domain([0, d3.max(Data, function (d) { return d3.max(d.LineCategory, function (b) { return b.Value }) })]);*/

        var YLine = d3.scale.linear().range([height, 0])
        .domain([0, maxds]);

        var color = d3.scale.ordinal()
            .range(["#d0743c", "#8a89a6", "#7b6888", "#6b486b", "#a05d56", "#d0743c", "#ff8c00"]);

        var line = d3.svg.line().x(function (d) {
            return x0(d.Date) + x0.rangeBand() / 2;
        }).y(function (d) { return YLine(d.Value) });




        var xAxis = d3.svg.axis()
            .scale(x0)
            .orient("bottom");

        var yAxis = d3.svg.axis()
            .scale(y)
            .orient("left")
            .tickFormat(d3.format(".2s"));

        var YLeftAxis = d3.svg.axis().scale(YLine).orient("right").tickFormat(d3.format(".2s"));

        var svg = d3.select("#dd01").append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
          .append("g")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");





        // Bar Data categories
        Data.forEach(function (d) {
            d.Categories.forEach(function (b) {
                if (Categories.findIndex(function (c) { return c.Name===b.Name}) == -1) {
                    b.Type = "bar";
                    console.log(JSON.stringify(b))
                    Categories.push(b)
                }
            })
        });


        // Line Data categories
        Data.forEach(function (d) {
            d.LineCategory.forEach(function (b) {
                if (Categories.findIndex(function (c) { return c.Name === b.Name }) == -1) {
                    b.Type = "line";
                    console.log(JSON.stringify(b))
                    Categories.push(b)
                }
            })
        });

        // Processing Line data
        lineData = DataSegregator(Data.map(function (d) { return d.LineCategory }), "Name");

        // Line Coloring
        LineColor = d3.scale.ordinal();
        LineColor.domain(Categories.filter(function (d) { return d.Type == "line" }).map(function (d) { return d.Name }));
        LineColor.range(["#d40606", "#06bf00", "#98bdc5", "#671919", "#0b172b"])
        x0.domain(Data.map(function (d) { return d.Date; }));
        XLine.domain(Data.map(function (d) { return d.Date; }));
        x1.domain(Categories.filter(function (d) { return d.Type == "bar" }).map(function (d) { return d.Name})).rangeRoundBands([0, x0.rangeBand()]);
        //y.domain([0, maxds]);
		y.domain([0, maxds]);
        svg.append("g")
            .attr("class", "x axis")
            .attr("transform", "translate(0," + height + ")")
            .call(xAxis);

        /*svg.append("g")
           .attr("class", "y axis")
            .attr("transform", "translate(" + (width) + ",0)")
           .call(YLeftAxis)

         .append("text")
           .attr("transform", "rotate(-90)")
           .attr("y", -10)

           .attr("dy", ".71em")
           .style("text-anchor", "end")
           .text("Percent");*/

        svg.append("g")
            .attr("class", "y axis")
            .attr("id","yaxis1")
            .call(yAxis)
          .append("text")
            .attr("transform", "rotate(-90)")
            .attr("y", 6)
            .attr("dy", ".71em")
            .style("text-anchor", "end")
            .text("Value");


        var state = svg.selectAll(".state")
            .data(Data)
          .enter().append("g")
            .attr("class", "state")
            .attr("transform", function (d) { return "translate(" + x0(d.Date) + ",0)"; });

        state.selectAll("rect")
            .data(function (d) { return d.Categories; })
          .enter().append("rect")
            .attr("width", x1.rangeBand())
            .attr("x", function (d) { return x1(d.Name); })
            .attr("y", function (d) { return y(d.Value); })
            .attr("class", function (d) { return 'l1' + (d.gg); })
            //.attr("height", function (d) { return height - y(d.Value); })
            .style("fill", function (d) { return color(d.gg); })
            .transition().delay(500).attrTween("height", function (d) {
                var i = d3.interpolate(0, height - y(d.Value));
                return function (t)
                {
                    return i(t);
                }
            });

        // drawaing lines
        svg.selectAll(".lines").data(lineData).enter().append("g").attr("class", "line")
        .each(function (d) {
            Name=d[0].Name
            d3.select(this).append("path").attr("d", function (b) { return line(b) }).style({ "stroke-width": "6px", "fill": "none" }).style("stroke", LineColor(Name)).style("stroke-linecap", "round").transition().duration(1500);
        })

    
        // Legends

        var LegendHolder = svg.append("g").attr("class", "legendHolder");
        var legend = LegendHolder.selectAll(".legend")
            .data(Categories.map(function (d) { return {"Name":d.Name,"Type":d.Type}}))
          .enter().append("g")
            .attr("class", "legend")
            .attr("transform", function (d, i) { return "translate(0," +( height+ margin.bottom/2 )+ ")"; })
            .each(function (d,i) {
                //  Legend Symbols

/*
                d3.select(this).append("rect")
                .attr("width", function () { return 18 })
                .attr("x", function (b) {

                    left = (i+1) * 15 + i * 18 + i * 5 + textWidthHolder;
                    return left;
                })
                 .attr("y", function (b) { return b.Type == 'bar'?0:7})
                .attr("height", function (b) { return b.Type== 'bar'? 18:5 })
                .style("fill", function (b) { return b.Type == 'bar' ? color(d.Name) : LineColor(d.Name) });
*/
                //  Legend Text
/*
                d3.select(this).append("text")
                .attr("x", function (b) {

                    left = (i+1) * 15 + (i+1) * 18 + (i + 1) * 5 + textWidthHolder;

                    return left;
                })
                .attr("y", 9)
                .attr("dy", ".35em")
                .style("text-anchor", "start")
                .text(d.Name);

                textWidthHolder += getTextWidth(d.Name, "10px", "calibri");*/
            });


        // Legend Placing

        d3.select(".legendHolder").attr("transform", function (d) {
            thisWidth = d3.select(this).node().getBBox().width;
            return "translate(" + ((width) / 2 - thisWidth / 2) + ",0)";
        })
        svg.append('image')
          .attr('xlink:href', 'https://raw.githubusercontent.com/ssissouf/ha/master/FoodAndLA_EN.bmp')
           .attr('width', ((width))+margin.left)
           .attr('height', 150)
           .attr("x",width+(margin.left/2))
           .attr("y",margin.top)
//0000


 Data = [
{ Date: "imports", Categories: [{ Name: "Category1", Value: dataset.v02, gg:"category1" }], LineCategory: [{ Name: "Line1", Value: dataset.v02 }] },
{ Date: "exports", Categories: [{ Name: "Category1", Value: dataset.v12, gg:"category2" }], LineCategory: [{ Name: "Line1", Value: dataset.v12 }] },
       ]

       var margin = { top: Math.round((+d3.select("#dd01").style('height').slice(0, -2))*0.1), right: Math.round((+d3.select("#dd01").style('width').slice(0, -2))*0.05), bottom: Math.round((+d3.select("#dd01").style('height').slice(0, -2))*0.02), left: Math.round((+d3.select("#dd01").style('width').slice(0, -2))*0.1) },
            width = Math.round((+d3.select("#dd01").style('width').slice(0, -2))*0.5) - margin.left - margin.right,
            height = Math.round((+d3.select("#dd01").style('height').slice(0, -2))*1) - margin.top - margin.bottom;

        var textWidthHolder = 0;
        /// Adding Date in LineCategory
        Data.forEach(function (d) {
            d.LineCategory.forEach(function (b) {
                b.Date = d.Date;
            })
        });




        var Categories = new Array();
        // Extension method declaration

        Categories.pro

        var Data;
        var ageNames;
        var x0 = d3.scale.ordinal()
            .rangeRoundBands([0, width], .1);
        var XLine = d3.scale.ordinal()
            .rangeRoundPoints([0, width], .1);
        var x1 = d3.scale.ordinal();

        var y = d3.scale.linear()
            .range([height, 0]);

       /* /*var YLine = d3.scale.linear().range([height, 0])
        .domain([0, d3.max(Data, function (d) { return d3.max(d.LineCategory, function (b) { return b.Value }) })]);*/

        var color = d3.scale.ordinal()
            .range(["#d0743c", "#8a89a6", "#7b6888", "#6b486b", "#a05d56", "#d0743c", "#ff8c00"]);

        var line = d3.svg.line().x(function (d) {
            return x0(d.Date) + x0.rangeBand() / 2;
        }).y(function (d) { return YLine(d.Value) });




        var xAxis = d3.svg.axis()
            .scale(x0)
            .orient("bottom");

        var yAxis = d3.svg.axis()
            .scale(y)
            .orient("left")
            .tickFormat(d3.format(".2s"));

        var YLeftAxis = d3.svg.axis().scale(YLine).orient("right").tickFormat(d3.format(".2s"));

        var svg = d3.select("#dd02").append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
          .append("g")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");





        // Bar Data categories
        Data.forEach(function (d) {
            d.Categories.forEach(function (b) {
                if (Categories.findIndex(function (c) { return c.Name===b.Name}) == -1) {
                    b.Type = "bar";
                    console.log(JSON.stringify(b))
                    Categories.push(b)
                }
            })
        });


        // Line Data categories
        Data.forEach(function (d) {
            d.LineCategory.forEach(function (b) {
                if (Categories.findIndex(function (c) { return c.Name === b.Name }) == -1) {
                    b.Type = "line";
                    console.log(JSON.stringify(b))
                    Categories.push(b)
                }
            })
        });

        // Processing Line data
        lineData = DataSegregator(Data.map(function (d) { return d.LineCategory }), "Name");

        // Line Coloring
        LineColor = d3.scale.ordinal();
        LineColor.domain(Categories.filter(function (d) { return d.Type == "line" }).map(function (d) { return d.Name }));
        LineColor.range(["#d40606", "#06bf00", "#98bdc5", "#671919", "#0b172b"])
        x0.domain(Data.map(function (d) { return d.Date; }));
        XLine.domain(Data.map(function (d) { return d.Date; }));
        x1.domain(Categories.filter(function (d) { return d.Type == "bar" }).map(function (d) { return d.Name})).rangeRoundBands([0, x0.rangeBand()]);
        y.domain([0, maxds]);

        svg.append("g")
            .attr("class", "x axis")
            .attr("transform", "translate(0," + height + ")")
            .call(xAxis);

        /*svg.append("g")
           .attr("class", "y axis")
            .attr("transform", "translate(" + (width) + ",0)")
           .call(YLeftAxis)

         .append("text")
           .attr("transform", "rotate(-90)")
           .attr("y", -10)

           .attr("dy", ".71em")
           .style("text-anchor", "end")
           .text("Percent");*/

        svg.append("g")
            .attr("class", "y axis")
            .attr("id","yaxis2")
            .call(yAxis)
          .append("text")
            .attr("transform", "rotate(-90)")
            .attr("y", 6)
            .attr("dy", ".71em")
            .style("text-anchor", "end")
            .text("Value");


        var state = svg.selectAll(".state")
            .data(Data)
          .enter().append("g")
            .attr("class", "state")
            .attr("transform", function (d) { return "translate(" + x0(d.Date) + ",0)"; });

        state.selectAll("rect")
            .data(function (d) { return d.Categories; })
          .enter().append("rect")
            .attr("width", x1.rangeBand())
            .attr("x", function (d) { return x1(d.Name); })
            .attr("y", function (d) { return y(d.Value); })
            .attr("class", function (d) { return 'l2' + (d.gg); })
            //.attr("height", function (d) { return height - y(d.Value); })
            .style("fill", function (d) { return color(d.gg); })
            .transition().delay(500).attrTween("height", function (d) {
                var i = d3.interpolate(0, height - y(d.Value));
                return function (t)
                {
                    return i(t);
                }
            });

        // drawaing lines
        svg.selectAll(".lines").data(lineData).enter().append("g").attr("class", "line")
        .each(function (d) {
            Name=d[0].Name
            d3.select(this).append("path").attr("d", function (b) { return line(b) }).style({ "stroke-width": "6px", "fill": "none" }).style("stroke", LineColor(Name)).style("stroke-linecap", "round").transition().duration(1500);
        })

    
        // Legends

        var LegendHolder = svg.append("g").attr("class", "legendHolder");
        var legend = LegendHolder.selectAll(".legend")
            .data(Categories.map(function (d) { return {"Name":d.Name,"Type":d.Type}}))
          .enter().append("g")
            .attr("class", "legend")
            .attr("transform", function (d, i) { return "translate(0," +( height+ margin.bottom/2 )+ ")"; })
            .each(function (d,i) {
                //  Legend Symbols

/*
                d3.select(this).append("rect")
                .attr("width", function () { return 18 })
                .attr("x", function (b) {

                    left = (i+1) * 15 + i * 18 + i * 5 + textWidthHolder;
                    return left;
                })
                 .attr("y", function (b) { return b.Type == 'bar'?0:7})
                .attr("height", function (b) { return b.Type== 'bar'? 18:5 })
                .style("fill", function (b) { return b.Type == 'bar' ? color(d.Name) : LineColor(d.Name) });
*/
                //  Legend Text
/*
                d3.select(this).append("text")
                .attr("x", function (b) {

                    left = (i+1) * 15 + (i+1) * 18 + (i + 1) * 5 + textWidthHolder;

                    return left;
                })
                .attr("y", 9)
                .attr("dy", ".35em")
                .style("text-anchor", "start")
                .text(d.Name);

                textWidthHolder += getTextWidth(d.Name, "10px", "calibri");*/
            });


        // Legend Placing

        d3.select(".legendHolder").attr("transform", function (d) {
            thisWidth = d3.select(this).node().getBBox().width;
            return "translate(" + ((width) / 2 - thisWidth / 2) + ",0)";
        })
        svg.append('image')
          .attr('xlink:href', 'https://raw.githubusercontent.com/ssissouf/ha/master/boissons1.bmp')
          .attr('width', ((width))+margin.left)
           .attr('height', 150)
           .attr("x",width+(margin.left/2))
           .attr("y",margin.top)
//0000

//0000



Data = [
{ Date: "imports", Categories: [{ Name: "Category1", Value: dataset.v03, gg:"category1" }], LineCategory: [{ Name: "Line1", Value: dataset.v03 }] },
{ Date: "exports", Categories: [{ Name: "Category1", Value: dataset.v13, gg:"category2" }], LineCategory: [{ Name: "Line1", Value: dataset.v13 }] },
       ]

       var margin = { top: Math.round((+d3.select("#dd01").style('height').slice(0, -2))*0.1), right: Math.round((+d3.select("#dd01").style('width').slice(0, -2))*0.05), bottom: Math.round((+d3.select("#dd01").style('height').slice(0, -2))*0.02), left: Math.round((+d3.select("#dd01").style('width').slice(0, -2))*0.1) },
            width = Math.round((+d3.select("#dd01").style('width').slice(0, -2))*0.5) - margin.left - margin.right,
            height = Math.round((+d3.select("#dd01").style('height').slice(0, -2))*1) - margin.top - margin.bottom;

        var textWidthHolder = 0;
        /// Adding Date in LineCategory
        Data.forEach(function (d) {
            d.LineCategory.forEach(function (b) {
                b.Date = d.Date;
            })
        });




        var Categories = new Array();
        // Extension method declaration

        Categories.pro

        var Data;
        var ageNames;
        var x0 = d3.scale.ordinal()
            .rangeRoundBands([0, width], .1);
        var XLine = d3.scale.ordinal()
            .rangeRoundPoints([0, width], .1);
        var x1 = d3.scale.ordinal();

        var y = d3.scale.linear()
            .range([height, 0]);

       /* /*var YLine = d3.scale.linear().range([height, 0])
        .domain([0, d3.max(Data, function (d) { return d3.max(d.LineCategory, function (b) { return b.Value }) })]);*/

        var color = d3.scale.ordinal()
            .range(["#d0743c", "#8a89a6", "#7b6888", "#6b486b", "#a05d56", "#d0743c", "#ff8c00"]);

        var line = d3.svg.line().x(function (d) {
            return x0(d.Date) + x0.rangeBand() / 2;
        }).y(function (d) { return YLine(d.Value) });




        var xAxis = d3.svg.axis()
            .scale(x0)
            .orient("bottom");

        var yAxis = d3.svg.axis()
            .scale(y)
            .orient("left")
            .tickFormat(d3.format(".2s"));

        var YLeftAxis = d3.svg.axis().scale(YLine).orient("right").tickFormat(d3.format(".2s"));

        var svg = d3.select("#dd03").append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
          .append("g")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");





        // Bar Data categories
        Data.forEach(function (d) {
            d.Categories.forEach(function (b) {
                if (Categories.findIndex(function (c) { return c.Name===b.Name}) == -1) {
                    b.Type = "bar";
                    console.log(JSON.stringify(b))
                    Categories.push(b)
                }
            })
        });


        // Line Data categories
        Data.forEach(function (d) {
            d.LineCategory.forEach(function (b) {
                if (Categories.findIndex(function (c) { return c.Name === b.Name }) == -1) {
                    b.Type = "line";
                    console.log(JSON.stringify(b))
                    Categories.push(b)
                }
            })
        });

        // Processing Line data
        lineData = DataSegregator(Data.map(function (d) { return d.LineCategory }), "Name");

        // Line Coloring
        LineColor = d3.scale.ordinal();
        LineColor.domain(Categories.filter(function (d) { return d.Type == "line" }).map(function (d) { return d.Name }));
        LineColor.range(["#d40606", "#06bf00", "#98bdc5", "#671919", "#0b172b"])
        x0.domain(Data.map(function (d) { return d.Date; }));
        XLine.domain(Data.map(function (d) { return d.Date; }));
        x1.domain(Categories.filter(function (d) { return d.Type == "bar" }).map(function (d) { return d.Name})).rangeRoundBands([0, x0.rangeBand()]);
        y.domain([0, maxds]);

        svg.append("g")
            .attr("class", "x axis")
            .attr("transform", "translate(0," + height + ")")
            .call(xAxis);

        /*svg.append("g")
           .attr("class", "y axis")
            .attr("transform", "translate(" + (width) + ",0)")
           .call(YLeftAxis)

         .append("text")
           .attr("transform", "rotate(-90)")
           .attr("y", -10)

           .attr("dy", ".71em")
           .style("text-anchor", "end")
           .text("Percent");*/

        svg.append("g")
            .attr("class", "y axis")
            .attr("id","yaxis3")
            .call(yAxis)
          .append("text")
            .attr("transform", "rotate(-90)")
            .attr("y", 6)
            .attr("dy", ".71em")
            .style("text-anchor", "end")
            .text("Value");


        var state = svg.selectAll(".state")
            .data(Data)
          .enter().append("g")
            .attr("class", "state")
            .attr("transform", function (d) { return "translate(" + x0(d.Date) + ",0)"; });

        state.selectAll("rect")
            .data(function (d) { return d.Categories; })
          .enter().append("rect")
            .attr("width", x1.rangeBand())
            .attr("x", function (d) { return x1(d.Name); })
            .attr("y", function (d) { return y(d.Value); })
            .attr("class", function (d) { return 'l3' + (d.gg); })
            //.attr("height", function (d) { return height - y(d.Value); })
            .style("fill", function (d) { return color(d.gg); })
            .transition().delay(500).attrTween("height", function (d) {
                var i = d3.interpolate(0, height - y(d.Value));
                return function (t)
                {
                    return i(t);
                }
            });

        // drawaing lines
        svg.selectAll(".lines").data(lineData).enter().append("g").attr("class", "line")
        .each(function (d) {
            Name=d[0].Name
            d3.select(this).append("path").attr("d", function (b) { return line(b) }).style({ "stroke-width": "6px", "fill": "none" }).style("stroke", LineColor(Name)).style("stroke-linecap", "round").transition().duration(1500);
        })

    
        // Legends

        var LegendHolder = svg.append("g").attr("class", "legendHolder");
        var legend = LegendHolder.selectAll(".legend")
            .data(Categories.map(function (d) { return {"Name":d.Name,"Type":d.Type}}))
          .enter().append("g")
            .attr("class", "legend")
            .attr("transform", function (d, i) { return "translate(0," +( height+ margin.bottom/2 )+ ")"; })
            .each(function (d,i) {
                //  Legend Symbols

/*
                d3.select(this).append("rect")
                .attr("width", function () { return 18 })
                .attr("x", function (b) {

                    left = (i+1) * 15 + i * 18 + i * 5 + textWidthHolder;
                    return left;
                })
                 .attr("y", function (b) { return b.Type == 'bar'?0:7})
                .attr("height", function (b) { return b.Type== 'bar'? 18:5 })
                .style("fill", function (b) { return b.Type == 'bar' ? color(d.Name) : LineColor(d.Name) });
*/
                //  Legend Text
/*
                d3.select(this).append("text")
                .attr("x", function (b) {

                    left = (i+1) * 15 + (i+1) * 18 + (i + 1) * 5 + textWidthHolder;

                    return left;
                })
                .attr("y", 9)
                .attr("dy", ".35em")
                .style("text-anchor", "start")
                .text(d.Name);

                textWidthHolder += getTextWidth(d.Name, "10px", "calibri");*/
            });


        // Legend Placing

        d3.select(".legendHolder").attr("transform", function (d) {
            thisWidth = d3.select(this).node().getBBox().width;
            return "translate(" + ((width) / 2 - thisWidth / 2) + ",0)";
        })


        svg.append('image')
          .attr('xlink:href', 'https://raw.githubusercontent.com/ssissouf/ha/master/merauxnonc.bmp')
          .attr('width', ((width))+margin.left)
           .attr('height', 150)
           .attr("x",width+(margin.left/2))
           .attr("y",margin.top)
//0000


Data = [
{ Date: "imports", Categories: [{ Name: "Category1", Value: dataset.v04, gg:"category1" }], LineCategory: [{ Name: "Line1", Value: dataset.v04 }] },
{ Date: "exports", Categories: [{ Name: "Category1", Value: dataset.v14, gg:"category2" }], LineCategory: [{ Name: "Line1", Value: dataset.v14 }] },
       ]

       var margin = { top: Math.round((+d3.select("#dd01").style('height').slice(0, -2))*0.1), right: Math.round((+d3.select("#dd01").style('width').slice(0, -2))*0.05), bottom: Math.round((+d3.select("#dd01").style('height').slice(0, -2))*0.02), left: Math.round((+d3.select("#dd01").style('width').slice(0, -2))*0.1) },
            width = Math.round((+d3.select("#dd01").style('width').slice(0, -2))*0.5) - margin.left - margin.right,
            height = Math.round((+d3.select("#dd01").style('height').slice(0, -2))*1) - margin.top - margin.bottom;

        var textWidthHolder = 0;
        /// Adding Date in LineCategory
        Data.forEach(function (d) {
            d.LineCategory.forEach(function (b) {
                b.Date = d.Date;
            })
        });




        var Categories = new Array();
        // Extension method declaration

        Categories.pro

        var Data;
        var ageNames;
        var x0 = d3.scale.ordinal()
            .rangeRoundBands([0, width], .1);
        var XLine = d3.scale.ordinal()
            .rangeRoundPoints([0, width], .1);
        var x1 = d3.scale.ordinal();

        var y = d3.scale.linear()
            .range([height, 0]);

      /*  /*var YLine = d3.scale.linear().range([height, 0])
        .domain([0, d3.max(Data, function (d) { return d3.max(d.LineCategory, function (b) { return b.Value }) })]);*/

        var color = d3.scale.ordinal()
            .range(["#d0743c", "#8a89a6", "#7b6888", "#6b486b", "#a05d56", "#d0743c", "#ff8c00"]);

        var line = d3.svg.line().x(function (d) {
            return x0(d.Date) + x0.rangeBand() / 2;
        }).y(function (d) { return YLine(d.Value) });




        var xAxis = d3.svg.axis()
            .scale(x0)
            .orient("bottom");

        var yAxis = d3.svg.axis()
            .scale(y)
            .orient("left")
            .tickFormat(d3.format(".2s"));

        var YLeftAxis = d3.svg.axis().scale(YLine).orient("right").tickFormat(d3.format(".2s"));

        var svg = d3.select("#dd04").append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
          .append("g")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");





        // Bar Data categories
        Data.forEach(function (d) {
            d.Categories.forEach(function (b) {
                if (Categories.findIndex(function (c) { return c.Name===b.Name}) == -1) {
                    b.Type = "bar";
                    console.log(JSON.stringify(b))
                    Categories.push(b)
                }
            })
        });


        // Line Data categories
        Data.forEach(function (d) {
            d.LineCategory.forEach(function (b) {
                if (Categories.findIndex(function (c) { return c.Name === b.Name }) == -1) {
                    b.Type = "line";
                    console.log(JSON.stringify(b))
                    Categories.push(b)
                }
            })
        });

        // Processing Line data
        lineData = DataSegregator(Data.map(function (d) { return d.LineCategory }), "Name");

        // Line Coloring
        LineColor = d3.scale.ordinal();
        LineColor.domain(Categories.filter(function (d) { return d.Type == "line" }).map(function (d) { return d.Name }));
        LineColor.range(["#d40606", "#06bf00", "#98bdc5", "#671919", "#0b172b"])
        x0.domain(Data.map(function (d) { return d.Date; }));
        XLine.domain(Data.map(function (d) { return d.Date; }));
        x1.domain(Categories.filter(function (d) { return d.Type == "bar" }).map(function (d) { return d.Name})).rangeRoundBands([0, x0.rangeBand()]);
        y.domain([0, maxds]);

        svg.append("g")
            .attr("class", "x axis")
            .attr("transform", "translate(0," + height + ")")
            .call(xAxis);

        /*svg.append("g")
           .attr("class", "y axis")
            .attr("transform", "translate(" + (width) + ",0)")
           .call(YLeftAxis)

         .append("text")
           .attr("transform", "rotate(-90)")
           .attr("y", -10)

           .attr("dy", ".71em")
           .style("text-anchor", "end")
           .text("Percent");*/

        svg.append("g")
            .attr("class", "y axis")
            .attr("id","yaxis4")
            .call(yAxis)
          .append("text")
            .attr("transform", "rotate(-90)")
            .attr("y", 6)
            .attr("dy", ".71em")
            .style("text-anchor", "end")
            .text("Value");


        var state = svg.selectAll(".state")
            .data(Data)
          .enter().append("g")
            .attr("class", "state")
            .attr("transform", function (d) { return "translate(" + x0(d.Date) + ",0)"; });

        state.selectAll("rect")
            .data(function (d) { return d.Categories; })
          .enter().append("rect")
            .attr("width", x1.rangeBand())
            .attr("x", function (d) { return x1(d.Name); })
            .attr("y", function (d) { return y(d.Value); })
            .attr("class", function (d) { return 'l4' + (d.gg); })
            //.attr("height", function (d) { return height - y(d.Value); })
            .style("fill", function (d) { return color(d.gg); })
            .transition().delay(500).attrTween("height", function (d) {
                var i = d3.interpolate(0, height - y(d.Value));
                return function (t)
                {
                    return i(t);
                }
            });

        // drawaing lines
        svg.selectAll(".lines").data(lineData).enter().append("g").attr("class", "line")
        .each(function (d) {
            Name=d[0].Name
            d3.select(this).append("path").attr("d", function (b) { return line(b) }).style({ "stroke-width": "6px", "fill": "none" }).style("stroke", LineColor(Name)).style("stroke-linecap", "round").transition().duration(1500);
        })

    
        // Legends

        var LegendHolder = svg.append("g").attr("class", "legendHolder");
        var legend = LegendHolder.selectAll(".legend")
            .data(Categories.map(function (d) { return {"Name":d.Name,"Type":d.Type}}))
          .enter().append("g")
            .attr("class", "legend")
            .attr("transform", function (d, i) { return "translate(0," +( height+ margin.bottom/2 )+ ")"; })
            .each(function (d,i) {
                //  Legend Symbols

/*
                d3.select(this).append("rect")
                .attr("width", function () { return 18 })
                .attr("x", function (b) {

                    left = (i+1) * 15 + i * 18 + i * 5 + textWidthHolder;
                    return left;
                })
                 .attr("y", function (b) { return b.Type == 'bar'?0:7})
                .attr("height", function (b) { return b.Type== 'bar'? 18:5 })
                .style("fill", function (b) { return b.Type == 'bar' ? color(d.Name) : LineColor(d.Name) });
*/
                //  Legend Text
/*
                d3.select(this).append("text")
                .attr("x", function (b) {

                    left = (i+1) * 15 + (i+1) * 18 + (i + 1) * 5 + textWidthHolder;

                    return left;
                })
                .attr("y", 9)
                .attr("dy", ".35em")
                .style("text-anchor", "start")
                .text(d.Name);

                textWidthHolder += getTextWidth(d.Name, "10px", "calibri");*/
            });


        // Legend Placing

        d3.select(".legendHolder").attr("transform", function (d) {
            thisWidth = d3.select(this).node().getBBox().width;
            return "translate(" + ((width) / 2 - thisWidth / 2) + ",0)";
        })

        svg.append('image')
          .attr('xlink:href', 'https://raw.githubusercontent.com/ssissouf/ha/master/mineral%20fuels%20etc.bmp')
          .attr('width', ((width))+margin.left)
           .attr('height', 150)
           .attr("x",width+(margin.left/2))
           .attr("y",margin.top)


//0000


Data = [
{ Date: "imports", Categories: [{ Name: "Category1", Value: dataset.v05, gg:"category1" }], LineCategory: [{ Name: "Line1", Value: dataset.v05 }] },
{ Date: "exports", Categories: [{ Name: "Category1", Value: dataset.v15, gg:"category2" }], LineCategory: [{ Name: "Line1", Value: dataset.v15 }] },
       ]

       var margin = { top: Math.round((+d3.select("#dd01").style('height').slice(0, -2))*0.1), right: Math.round((+d3.select("#dd01").style('width').slice(0, -2))*0.05), bottom: Math.round((+d3.select("#dd01").style('height').slice(0, -2))*0.02), left: Math.round((+d3.select("#dd01").style('width').slice(0, -2))*0.1) },
            width = Math.round((+d3.select("#dd01").style('width').slice(0, -2))*0.5) - margin.left - margin.right,
            height = Math.round((+d3.select("#dd01").style('height').slice(0, -2))*1) - margin.top - margin.bottom;

        var textWidthHolder = 0;
        /// Adding Date in LineCategory
        Data.forEach(function (d) {
            d.LineCategory.forEach(function (b) {
                b.Date = d.Date;
            })
        });




        var Categories = new Array();
        // Extension method declaration

        Categories.pro

        var Data;
        var ageNames;
        var x0 = d3.scale.ordinal()
            .rangeRoundBands([0, width], .1);
        var XLine = d3.scale.ordinal()
            .rangeRoundPoints([0, width], .1);
        var x1 = d3.scale.ordinal();

        var y = d3.scale.linear()
            .range([height, 0]);

        /*/*var YLine = d3.scale.linear().range([height, 0])
        .domain([0, d3.max(Data, function (d) { return d3.max(d.LineCategory, function (b) { return b.Value }) })]);*/

        var color = d3.scale.ordinal()
            .range(["#d0743c", "#8a89a6", "#7b6888", "#6b486b", "#a05d56", "#d0743c", "#ff8c00"]);

        var line = d3.svg.line().x(function (d) {
            return x0(d.Date) + x0.rangeBand() / 2;
        }).y(function (d) { return YLine(d.Value) });




        var xAxis = d3.svg.axis()
            .scale(x0)
            .orient("bottom");

        var yAxis = d3.svg.axis()
            .scale(y)
            .orient("left")
            .tickFormat(d3.format(".2s"));

        var YLeftAxis = d3.svg.axis().scale(YLine).orient("right").tickFormat(d3.format(".2s"));

        var svg = d3.select("#dd05").append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
          .append("g")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");





        // Bar Data categories
        Data.forEach(function (d) {
            d.Categories.forEach(function (b) {
                if (Categories.findIndex(function (c) { return c.Name===b.Name}) == -1) {
                    b.Type = "bar";
                    console.log(JSON.stringify(b))
                    Categories.push(b)
                }
            })
        });


        // Line Data categories
        Data.forEach(function (d) {
            d.LineCategory.forEach(function (b) {
                if (Categories.findIndex(function (c) { return c.Name === b.Name }) == -1) {
                    b.Type = "line";
                    console.log(JSON.stringify(b))
                    Categories.push(b)
                }
            })
        });

        // Processing Line data
        lineData = DataSegregator(Data.map(function (d) { return d.LineCategory }), "Name");

        // Line Coloring
        LineColor = d3.scale.ordinal();
        LineColor.domain(Categories.filter(function (d) { return d.Type == "line" }).map(function (d) { return d.Name }));
        LineColor.range(["#d40606", "#06bf00", "#98bdc5", "#671919", "#0b172b"])
        x0.domain(Data.map(function (d) { return d.Date; }));
        XLine.domain(Data.map(function (d) { return d.Date; }));
        x1.domain(Categories.filter(function (d) { return d.Type == "bar" }).map(function (d) { return d.Name})).rangeRoundBands([0, x0.rangeBand()]);
        y.domain([0, maxds]);

        svg.append("g")
            .attr("class", "x axis")
            .attr("transform", "translate(0," + height + ")")
            .call(xAxis);

        /*svg.append("g")
           .attr("class", "y axis")
            .attr("transform", "translate(" + (width) + ",0)")
           .call(YLeftAxis)

         .append("text")
           .attr("transform", "rotate(-90)")
           .attr("y", -10)

           .attr("dy", ".71em")
           .style("text-anchor", "end")
           .text("Percent");*/

        svg.append("g")
            .attr("class", "y axis")
            .attr("id","yaxis5")
            .call(yAxis)
          .append("text")
            .attr("transform", "rotate(-90)")
            .attr("y", 6)
            .attr("dy", ".71em")
            .style("text-anchor", "end")
            .text("Value");


        var state = svg.selectAll(".state")
            .data(Data)
          .enter().append("g")
            .attr("class", "state")
            .attr("transform", function (d) { return "translate(" + x0(d.Date) + ",0)"; });

        state.selectAll("rect")
            .data(function (d) { return d.Categories; })
          .enter().append("rect")
            .attr("width", x1.rangeBand())
            .attr("x", function (d) { return x1(d.Name); })
            .attr("y", function (d) { return y(d.Value); })
            .attr("class", function (d) { return 'l5' + (d.gg); })
            //.attr("height", function (d) { return height - y(d.Value); })
            .style("fill", function (d) { return color(d.gg); })
            .transition().delay(500).attrTween("height", function (d) {
                var i = d3.interpolate(0, height - y(d.Value));
                return function (t)
                {
                    return i(t);
                }
            });

        // drawaing lines
        svg.selectAll(".lines").data(lineData).enter().append("g").attr("class", "line")
        .each(function (d) {
            Name=d[0].Name
            d3.select(this).append("path").attr("d", function (b) { return line(b) }).style({ "stroke-width": "6px", "fill": "none" }).style("stroke", LineColor(Name)).style("stroke-linecap", "round").transition().duration(1500);
        })

    
        // Legends

        var LegendHolder = svg.append("g").attr("class", "legendHolder");
        var legend = LegendHolder.selectAll(".legend")
            .data(Categories.map(function (d) { return {"Name":d.Name,"Type":d.Type}}))
          .enter().append("g")
            .attr("class", "legend")
            .attr("transform", function (d, i) { return "translate(0," +( height+ margin.bottom/2 )+ ")"; })
            .each(function (d,i) {
                //  Legend Symbols

/*
                d3.select(this).append("rect")
                .attr("width", function () { return 18 })
                .attr("x", function (b) {

                    left = (i+1) * 15 + i * 18 + i * 5 + textWidthHolder;
                    return left;
                })
                 .attr("y", function (b) { return b.Type == 'bar'?0:7})
                .attr("height", function (b) { return b.Type== 'bar'? 18:5 })
                .style("fill", function (b) { return b.Type == 'bar' ? color(d.Name) : LineColor(d.Name) });
*/
                //  Legend Text
/*
                d3.select(this).append("text")
                .attr("x", function (b) {

                    left = (i+1) * 15 + (i+1) * 18 + (i + 1) * 5 + textWidthHolder;

                    return left;
                })
                .attr("y", 9)
                .attr("dy", ".35em")
                .style("text-anchor", "start")
                .text(d.Name);

                textWidthHolder += getTextWidth(d.Name, "10px", "calibri");*/
            });


        // Legend Placing

        d3.select(".legendHolder").attr("transform", function (d) {
            thisWidth = d3.select(this).node().getBBox().width;
            return "translate(" + ((width) / 2 - thisWidth / 2) + ",0)";
        })


        svg.append('image')
          .attr('xlink:href', 'https://raw.githubusercontent.com/ssissouf/ha/master/butter.bmp')
          .attr('width', ((width))+margin.left)
           .attr('height', 150)
           .attr("x",width+(margin.left/2))
           .attr("y",margin.top)


		   

//0000


Data = [
{ Date: "imports", Categories: [{ Name: "Category1", Value: dataset.v06, gg:"category1" }], LineCategory: [{ Name: "Line1", Value: dataset.v06 }] },
{ Date: "exports", Categories: [{ Name: "Category1", Value: dataset.v16, gg:"category2" }], LineCategory: [{ Name: "Line1", Value: dataset.v16 }] },
       ]

       var margin = { top: Math.round((+d3.select("#dd01").style('height').slice(0, -2))*0.1), right: Math.round((+d3.select("#dd01").style('width').slice(0, -2))*0.05), bottom: Math.round((+d3.select("#dd01").style('height').slice(0, -2))*0.02), left: Math.round((+d3.select("#dd01").style('width').slice(0, -2))*0.1) },
            width = Math.round((+d3.select("#dd01").style('width').slice(0, -2))*0.5) - margin.left - margin.right,
            height = Math.round((+d3.select("#dd01").style('height').slice(0, -2))*1) - margin.top - margin.bottom;

        var textWidthHolder = 0;
        /// Adding Date in LineCategory
        Data.forEach(function (d) {
            d.LineCategory.forEach(function (b) {
                b.Date = d.Date;
            })
        });




        var Categories = new Array();
        // Extension method declaration

        Categories.pro

        var Data;
        var ageNames;
        var x0 = d3.scale.ordinal()
            .rangeRoundBands([0, width], .1);
        var XLine = d3.scale.ordinal()
            .rangeRoundPoints([0, width], .1);
        var x1 = d3.scale.ordinal();

        var y = d3.scale.linear()
            .range([height, 0]);

        /*/*var YLine = d3.scale.linear().range([height, 0])
        .domain([0, d3.max(Data, function (d) { return d3.max(d.LineCategory, function (b) { return b.Value }) })]);*/

        var color = d3.scale.ordinal()
            .range(["#d0743c", "#8a89a6", "#7b6888", "#6b486b", "#a05d56", "#d0743c", "#ff8c00"]);

        var line = d3.svg.line().x(function (d) {
            return x0(d.Date) + x0.rangeBand() / 2;
        }).y(function (d) { return YLine(d.Value) });




        var xAxis = d3.svg.axis()
            .scale(x0)
            .orient("bottom");

        var yAxis = d3.svg.axis()
            .scale(y)
            .orient("left")
            .tickFormat(d3.format(".2s"));

        var YLeftAxis = d3.svg.axis().scale(YLine).orient("right").tickFormat(d3.format(".2s"));

        var svg = d3.select("#dd21").append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
          .append("g")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");





        // Bar Data categories
        Data.forEach(function (d) {
            d.Categories.forEach(function (b) {
                if (Categories.findIndex(function (c) { return c.Name===b.Name}) == -1) {
                    b.Type = "bar";
                    console.log(JSON.stringify(b))
                    Categories.push(b)
                }
            })
        });


        // Line Data categories
        Data.forEach(function (d) {
            d.LineCategory.forEach(function (b) {
                if (Categories.findIndex(function (c) { return c.Name === b.Name }) == -1) {
                    b.Type = "line";
                    console.log(JSON.stringify(b))
                    Categories.push(b)
                }
            })
        });

        // Processing Line data
        lineData = DataSegregator(Data.map(function (d) { return d.LineCategory }), "Name");

        // Line Coloring
        LineColor = d3.scale.ordinal();
        LineColor.domain(Categories.filter(function (d) { return d.Type == "line" }).map(function (d) { return d.Name }));
        LineColor.range(["#d40606", "#06bf00", "#98bdc5", "#671919", "#0b172b"])
        x0.domain(Data.map(function (d) { return d.Date; }));
        XLine.domain(Data.map(function (d) { return d.Date; }));
        x1.domain(Categories.filter(function (d) { return d.Type == "bar" }).map(function (d) { return d.Name})).rangeRoundBands([0, x0.rangeBand()]);
        y.domain([0, maxds]);

        svg.append("g")
            .attr("class", "x axis")
            .attr("transform", "translate(0," + height + ")")
            .call(xAxis);

        /*svg.append("g")
           .attr("class", "y axis")
            .attr("transform", "translate(" + (width) + ",0)")
           .call(YLeftAxis)

         .append("text")
           .attr("transform", "rotate(-90)")
           .attr("y", -10)

           .attr("dy", ".71em")
           .style("text-anchor", "end")
           .text("Percent");*/

        svg.append("g")
            .attr("class", "y axis")
            .attr("id","yaxis6")
            .call(yAxis)
          .append("text")
            .attr("transform", "rotate(-90)")
            .attr("y", 6)
            .attr("dy", ".71em")
            .style("text-anchor", "end")
            .text("Value");


        var state = svg.selectAll(".state")
            .data(Data)
          .enter().append("g")
            .attr("class", "state")
            .attr("transform", function (d) { return "translate(" + x0(d.Date) + ",0)"; });

        state.selectAll("rect")
            .data(function (d) { return d.Categories; })
          .enter().append("rect")
            .attr("width", x1.rangeBand())
            .attr("x", function (d) { return x1(d.Name); })
            .attr("y", function (d) { return y(d.Value); })
            .attr("class", function (d) { return 'l6' + (d.gg); })
            //.attr("height", function (d) { return height - y(d.Value); })
            .style("fill", function (d) { return color(d.gg); })
            .transition().delay(500).attrTween("height", function (d) {
                var i = d3.interpolate(0, height - y(d.Value));
                return function (t)
                {
                    return i(t);
                }
            });

        // drawaing lines
        svg.selectAll(".lines").data(lineData).enter().append("g").attr("class", "line")
        .each(function (d) {
            Name=d[0].Name
            d3.select(this).append("path").attr("d", function (b) { return line(b) }).style({ "stroke-width": "6px", "fill": "none" }).style("stroke", LineColor(Name)).style("stroke-linecap", "round").transition().duration(1500);
        })

    
        // Legends

        var LegendHolder = svg.append("g").attr("class", "legendHolder");
        var legend = LegendHolder.selectAll(".legend")
            .data(Categories.map(function (d) { return {"Name":d.Name,"Type":d.Type}}))
          .enter().append("g")
            .attr("class", "legend")
            .attr("transform", function (d, i) { return "translate(0," +( height+ margin.bottom/2 )+ ")"; })
            .each(function (d,i) {
                //  Legend Symbols

/*
                d3.select(this).append("rect")
                .attr("width", function () { return 18 })
                .attr("x", function (b) {

                    left = (i+1) * 15 + i * 18 + i * 5 + textWidthHolder;
                    return left;
                })
                 .attr("y", function (b) { return b.Type == 'bar'?0:7})
                .attr("height", function (b) { return b.Type== 'bar'? 18:5 })
                .style("fill", function (b) { return b.Type == 'bar' ? color(d.Name) : LineColor(d.Name) });
*/
                //  Legend Text
/*
                d3.select(this).append("text")
                .attr("x", function (b) {

                    left = (i+1) * 15 + (i+1) * 18 + (i + 1) * 5 + textWidthHolder;

                    return left;
                })
                .attr("y", 9)
                .attr("dy", ".35em")
                .style("text-anchor", "start")
                .text(d.Name);

                textWidthHolder += getTextWidth(d.Name, "10px", "calibri");*/
            });


        // Legend Placing

        d3.select(".legendHolder").attr("transform", function (d) {
            thisWidth = d3.select(this).node().getBBox().width;
            return "translate(" + ((width) / 2 - thisWidth / 2) + ",0)";
        })

        svg.append('image')
          .attr('xlink:href', 'https://raw.githubusercontent.com/ssissouf/ha/master/chemistry.bmp')
          .attr('width', ((width))+margin.left)
           .attr('height', 150)
           .attr("x",width+(margin.left/2))
           .attr("y",margin.top)

//0000


Data = [
{ Date: "imports", Categories: [{ Name: "Category1", Value: dataset.v07, gg:"category1" }], LineCategory: [{ Name: "Line1", Value: dataset.v07 }] },
{ Date: "exports", Categories: [{ Name: "Category1", Value: dataset.v17, gg:"category2" }], LineCategory: [{ Name: "Line1", Value: dataset.v17 }] },
       ]

       var margin = { top: Math.round((+d3.select("#dd01").style('height').slice(0, -2))*0.1), right: Math.round((+d3.select("#dd01").style('width').slice(0, -2))*0.05), bottom: Math.round((+d3.select("#dd01").style('height').slice(0, -2))*0.02), left: Math.round((+d3.select("#dd01").style('width').slice(0, -2))*0.1) },
            width = Math.round((+d3.select("#dd01").style('width').slice(0, -2))*0.5) - margin.left - margin.right,
            height = Math.round((+d3.select("#dd01").style('height').slice(0, -2))*1) - margin.top - margin.bottom;

        var textWidthHolder = 0;
        /// Adding Date in LineCategory
        Data.forEach(function (d) {
            d.LineCategory.forEach(function (b) {
                b.Date = d.Date;
            })
        });




        var Categories = new Array();
        // Extension method declaration

        Categories.pro

        var Data;
        var ageNames;
        var x0 = d3.scale.ordinal()
            .rangeRoundBands([0, width], .1);
        var XLine = d3.scale.ordinal()
            .rangeRoundPoints([0, width], .1);
        var x1 = d3.scale.ordinal();

        var y = d3.scale.linear()
            .range([height, 0]);

        /*var YLine = d3.scale.linear().range([height, 0])
        .domain([0, d3.max(Data, function (d) { return d3.max(d.LineCategory, function (b) { return b.Value }) })]);*/

        var color = d3.scale.ordinal()
            .range(["#d0743c", "#8a89a6", "#7b6888", "#6b486b", "#a05d56", "#d0743c", "#ff8c00"]);

        var line = d3.svg.line().x(function (d) {
            return x0(d.Date) + x0.rangeBand() / 2;
        }).y(function (d) { return YLine(d.Value) });




        var xAxis = d3.svg.axis()
            .scale(x0)
            .orient("bottom");

        var yAxis = d3.svg.axis()
            .scale(y)
            .orient("left")
            .tickFormat(d3.format(".2s"));

        var YLeftAxis = d3.svg.axis().scale(YLine).orient("right").tickFormat(d3.format(".2s"));

        var svg = d3.select("#dd22").append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
          .append("g")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");





        // Bar Data categories
        Data.forEach(function (d) {
            d.Categories.forEach(function (b) {
                if (Categories.findIndex(function (c) { return c.Name===b.Name}) == -1) {
                    b.Type = "bar";
                    console.log(JSON.stringify(b))
                    Categories.push(b)
                }
            })
        });


        // Line Data categories
        Data.forEach(function (d) {
            d.LineCategory.forEach(function (b) {
                if (Categories.findIndex(function (c) { return c.Name === b.Name }) == -1) {
                    b.Type = "line";
                    console.log(JSON.stringify(b))
                    Categories.push(b)
                }
            })
        });

        // Processing Line data
        lineData = DataSegregator(Data.map(function (d) { return d.LineCategory }), "Name");

        // Line Coloring
        LineColor = d3.scale.ordinal();
        LineColor.domain(Categories.filter(function (d) { return d.Type == "line" }).map(function (d) { return d.Name }));
        LineColor.range(["#d40606", "#06bf00", "#98bdc5", "#671919", "#0b172b"])
        x0.domain(Data.map(function (d) { return d.Date; }));
        XLine.domain(Data.map(function (d) { return d.Date; }));
        x1.domain(Categories.filter(function (d) { return d.Type == "bar" }).map(function (d) { return d.Name})).rangeRoundBands([0, x0.rangeBand()]);
        y.domain([0, maxds]);

        svg.append("g")
            .attr("class", "x axis")
            .attr("transform", "translate(0," + height + ")")
            .call(xAxis);

        /*svg.append("g")
           .attr("class", "y axis")
            .attr("transform", "translate(" + (width) + ",0)")
           .call(YLeftAxis)

         .append("text")
           .attr("transform", "rotate(-90)")
           .attr("y", -10)

           .attr("dy", ".71em")
           .style("text-anchor", "end")
           .text("Percent");*/

        svg.append("g")
            .attr("class", "y axis")
            .attr("id","yaxis7")
            .call(yAxis)
          .append("text")
            .attr("transform", "rotate(-90)")
            .attr("y", 6)
            .attr("dy", ".71em")
            .style("text-anchor", "end")
            .text("Value");


        var state = svg.selectAll(".state")
            .data(Data)
          .enter().append("g")
            .attr("class", "state")
            .attr("transform", function (d) { return "translate(" + x0(d.Date) + ",0)"; });

        state.selectAll("rect")
            .data(function (d) { return d.Categories; })
          .enter().append("rect")
            .attr("width", x1.rangeBand())
            .attr("x", function (d) { return x1(d.Name); })
            .attr("y", function (d) { return y(d.Value); })
            .attr("class", function (d) { return 'l7' + (d.gg); })
            //.attr("height", function (d) { return height - y(d.Value); })
            .style("fill", function (d) { return color(d.gg); })
            .transition().delay(500).attrTween("height", function (d) {
                var i = d3.interpolate(0, height - y(d.Value));
                return function (t)
                {
                    return i(t);
                }
            });

        // drawaing lines
        svg.selectAll(".lines").data(lineData).enter().append("g").attr("class", "line")
        .each(function (d) {
            Name=d[0].Name
            d3.select(this).append("path").attr("d", function (b) { return line(b) }).style({ "stroke-width": "6px", "fill": "none" }).style("stroke", LineColor(Name)).style("stroke-linecap", "round").transition().duration(1500);
        })

    
        // Legends

        var LegendHolder = svg.append("g").attr("class", "legendHolder");
        var legend = LegendHolder.selectAll(".legend")
            .data(Categories.map(function (d) { return {"Name":d.Name,"Type":d.Type}}))
          .enter().append("g")
            .attr("class", "legend")
            .attr("transform", function (d, i) { return "translate(0," +( height+ margin.bottom/2 )+ ")"; })
            .each(function (d,i) {
                //  Legend Symbols

/*
                d3.select(this).append("rect")
                .attr("width", function () { return 18 })
                .attr("x", function (b) {

                    left = (i+1) * 15 + i * 18 + i * 5 + textWidthHolder;
                    return left;
                })
                 .attr("y", function (b) { return b.Type == 'bar'?0:7})
                .attr("height", function (b) { return b.Type== 'bar'? 18:5 })
                .style("fill", function (b) { return b.Type == 'bar' ? color(d.Name) : LineColor(d.Name) });
*/
                //  Legend Text
/*
                d3.select(this).append("text")
                .attr("x", function (b) {

                    left = (i+1) * 15 + (i+1) * 18 + (i + 1) * 5 + textWidthHolder;

                    return left;
                })
                .attr("y", 9)
                .attr("dy", ".35em")
                .style("text-anchor", "start")
                .text(d.Name);

                textWidthHolder += getTextWidth(d.Name, "10px", "calibri");*/
            });


        // Legend Placing

        d3.select(".legendHolder").attr("transform", function (d) {
            thisWidth = d3.select(this).node().getBBox().width;
            return "translate(" + ((width) / 2 - thisWidth / 2) + ",0)";
        })

        svg.append('image')
          .attr('xlink:href', 'https://raw.githubusercontent.com/ssissouf/ha/master/clothes.bmp')
          .attr('width', ((width))+margin.left)
           .attr('height', 150)
           .attr("x",width+(margin.left/2))
           .attr("y",margin.top)


		   

//0000


Data = [
{ Date: "imports", Categories: [{ Name: "Category1", Value: dataset.v08, gg:"category1" }], LineCategory: [{ Name: "Line1", Value: dataset.v08 }] },
{ Date: "exports", Categories: [{ Name: "Category1", Value: dataset.v18, gg:"category2" }], LineCategory: [{ Name: "Line1", Value: dataset.v18 }] },
       ]

       var margin = { top: Math.round((+d3.select("#dd01").style('height').slice(0, -2))*0.1), right: Math.round((+d3.select("#dd01").style('width').slice(0, -2))*0.05), bottom: Math.round((+d3.select("#dd01").style('height').slice(0, -2))*0.02), left: Math.round((+d3.select("#dd01").style('width').slice(0, -2))*0.1) },
            width = Math.round((+d3.select("#dd01").style('width').slice(0, -2))*0.5) - margin.left - margin.right,
            height = Math.round((+d3.select("#dd01").style('height').slice(0, -2))*1) - margin.top - margin.bottom;

        var textWidthHolder = 0;
        /// Adding Date in LineCategory
        Data.forEach(function (d) {
            d.LineCategory.forEach(function (b) {
                b.Date = d.Date;
            })
        });




        var Categories = new Array();
        // Extension method declaration

        Categories.pro

        var Data;
        var ageNames;
        var x0 = d3.scale.ordinal()
            .rangeRoundBands([0, width], .1);
        var XLine = d3.scale.ordinal()
            .rangeRoundPoints([0, width], .1);
        var x1 = d3.scale.ordinal();

        var y = d3.scale.linear()
            .range([height, 0]);

        /*var YLine = d3.scale.linear().range([height, 0])
        .domain([0, d3.max(Data, function (d) { return d3.max(d.LineCategory, function (b) { return b.Value }) })]);*/

        var color = d3.scale.ordinal()
            .range(["#d0743c", "#8a89a6", "#7b6888", "#6b486b", "#a05d56", "#d0743c", "#ff8c00"]);

        var line = d3.svg.line().x(function (d) {
            return x0(d.Date) + x0.rangeBand() / 2;
        }).y(function (d) { return YLine(d.Value) });




        var xAxis = d3.svg.axis()
            .scale(x0)
            .orient("bottom");

        var yAxis = d3.svg.axis()
            .scale(y)
            .orient("left")
            .tickFormat(d3.format(".2s"));

        var YLeftAxis = d3.svg.axis().scale(YLine).orient("right").tickFormat(d3.format(".2s"));

        var svg = d3.select("#dd23").append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
          .append("g")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");





        // Bar Data categories
        Data.forEach(function (d) {
            d.Categories.forEach(function (b) {
                if (Categories.findIndex(function (c) { return c.Name===b.Name}) == -1) {
                    b.Type = "bar";
                    console.log(JSON.stringify(b))
                    Categories.push(b)
                }
            })
        });


        // Line Data categories
        Data.forEach(function (d) {
            d.LineCategory.forEach(function (b) {
                if (Categories.findIndex(function (c) { return c.Name === b.Name }) == -1) {
                    b.Type = "line";
                    console.log(JSON.stringify(b))
                    Categories.push(b)
                }
            })
        });

        // Processing Line data
        lineData = DataSegregator(Data.map(function (d) { return d.LineCategory }), "Name");

        // Line Coloring
        LineColor = d3.scale.ordinal();
        LineColor.domain(Categories.filter(function (d) { return d.Type == "line" }).map(function (d) { return d.Name }));
        LineColor.range(["#d40606", "#06bf00", "#98bdc5", "#671919", "#0b172b"])
        x0.domain(Data.map(function (d) { return d.Date; }));
        XLine.domain(Data.map(function (d) { return d.Date; }));
        x1.domain(Categories.filter(function (d) { return d.Type == "bar" }).map(function (d) { return d.Name})).rangeRoundBands([0, x0.rangeBand()]);
        y.domain([0, maxds]);

        svg.append("g")
            .attr("class", "x axis")
            .attr("transform", "translate(0," + height + ")")
            .call(xAxis);

        /*svg.append("g")
           .attr("class", "y axis")
            .attr("transform", "translate(" + (width) + ",0)")
           .call(YLeftAxis)

         .append("text")
           .attr("transform", "rotate(-90)")
           .attr("y", -10)

           .attr("dy", ".71em")
           .style("text-anchor", "end")
           .text("Percent");*/

        svg.append("g")
            .attr("class", "y axis")
            .attr("id","yaxis8")
            .call(yAxis)
          .append("text")
            .attr("transform", "rotate(-90)")
            .attr("y", 6)
            .attr("dy", ".71em")
            .style("text-anchor", "end")
            .text("Value");


        var state = svg.selectAll(".state")
            .data(Data)
          .enter().append("g")
            .attr("class", "state")
            .attr("transform", function (d) { return "translate(" + x0(d.Date) + ",0)"; });

        state.selectAll("rect")
            .data(function (d) { return d.Categories; })
          .enter().append("rect")
            .attr("width", x1.rangeBand())
            .attr("x", function (d) { return x1(d.Name); })
            .attr("y", function (d) { return y(d.Value); })
            .attr("class", function (d) { return 'l8' + (d.gg); })
            //.attr("height", function (d) { return height - y(d.Value); })
            .style("fill", function (d) { return color(d.gg); })
            .transition().delay(500).attrTween("height", function (d) {
                var i = d3.interpolate(0, height - y(d.Value));
                return function (t)
                {
                    return i(t);
                }
            });

        // drawaing lines
        svg.selectAll(".lines").data(lineData).enter().append("g").attr("class", "line")
        .each(function (d) {
            Name=d[0].Name
            d3.select(this).append("path").attr("d", function (b) { return line(b) }).style({ "stroke-width": "6px", "fill": "none" }).style("stroke", LineColor(Name)).style("stroke-linecap", "round").transition().duration(1500);
        })

    
        // Legends

        var LegendHolder = svg.append("g").attr("class", "legendHolder");
        var legend = LegendHolder.selectAll(".legend")
            .data(Categories.map(function (d) { return {"Name":d.Name,"Type":d.Type}}))
          .enter().append("g")
            .attr("class", "legend")
            .attr("transform", function (d, i) { return "translate(0," +( height+ margin.bottom/2 )+ ")"; })
            .each(function (d,i) {
                //  Legend Symbols

/*
                d3.select(this).append("rect")
                .attr("width", function () { return 18 })
                .attr("x", function (b) {

                    left = (i+1) * 15 + i * 18 + i * 5 + textWidthHolder;
                    return left;
                })
                 .attr("y", function (b) { return b.Type == 'bar'?0:7})
                .attr("height", function (b) { return b.Type== 'bar'? 18:5 })
                .style("fill", function (b) { return b.Type == 'bar' ? color(d.Name) : LineColor(d.Name) });
*/
                //  Legend Text
/*
                d3.select(this).append("text")
                .attr("x", function (b) {

                    left = (i+1) * 15 + (i+1) * 18 + (i + 1) * 5 + textWidthHolder;

                    return left;
                })
                .attr("y", 9)
                .attr("dy", ".35em")
                .style("text-anchor", "start")
                .text(d.Name);

                textWidthHolder += getTextWidth(d.Name, "10px", "calibri");*/
            });


        // Legend Placing

        d3.select(".legendHolder").attr("transform", function (d) {
            thisWidth = d3.select(this).node().getBBox().width;
            return "translate(" + ((width) / 2 - thisWidth / 2) + ",0)";
        })

        svg.append('image')
          .attr('xlink:href', 'https://raw.githubusercontent.com/ssissouf/ha/master/bus.bmp')
          .attr('width', ((width))+margin.left)
           .attr('height', 150)
           .attr("x",width+(margin.left/2))
           .attr("y",margin.top)

		   		   		  
//0000


Data = [
{ Date: "imports", Categories: [{ Name: "Category1", Value: dataset.v09, gg:"category1" }], LineCategory: [{ Name: "Line1", Value: dataset.v09 }] },
{ Date: "exports", Categories: [{ Name: "Category1", Value: dataset.v19, gg:"category2" }], LineCategory: [{ Name: "Line1", Value: dataset.v19 }] },
       ]

       var margin = { top: Math.round((+d3.select("#dd01").style('height').slice(0, -2))*0.1), right: Math.round((+d3.select("#dd01").style('width').slice(0, -2))*0.05), bottom: Math.round((+d3.select("#dd01").style('height').slice(0, -2))*0.02), left: Math.round((+d3.select("#dd01").style('width').slice(0, -2))*0.1) },
            width = Math.round((+d3.select("#dd01").style('width').slice(0, -2))*0.5) - margin.left - margin.right,
            height = Math.round((+d3.select("#dd01").style('height').slice(0, -2))*1) - margin.top - margin.bottom;

        var textWidthHolder = 0;
        /// Adding Date in LineCategory
        Data.forEach(function (d) {
            d.LineCategory.forEach(function (b) {
                b.Date = d.Date;
            })
        });




        var Categories = new Array();
        // Extension method declaration

        Categories.pro

        var Data;
        var ageNames;
        var x0 = d3.scale.ordinal()
            .rangeRoundBands([0, width], .1);
        var XLine = d3.scale.ordinal()
            .rangeRoundPoints([0, width], .1);
        var x1 = d3.scale.ordinal();

        var y = d3.scale.linear()
            .range([height, 0]);

        /*var YLine = d3.scale.linear().range([height, 0])
        .domain([0, d3.max(Data, function (d) { return d3.max(d.LineCategory, function (b) { return b.Value }) })]);*/

        var color = d3.scale.ordinal()
            .range(["#d0743c", "#8a89a6", "#7b6888", "#6b486b", "#a05d56", "#d0743c", "#ff8c00"]);

        var line = d3.svg.line().x(function (d) {
            return x0(d.Date) + x0.rangeBand() / 2;
        }).y(function (d) { return YLine(d.Value) });




        var xAxis = d3.svg.axis()
            .scale(x0)
            .orient("bottom");

        var yAxis = d3.svg.axis()
            .scale(y)
            .orient("left")
            .tickFormat(d3.format(".2s"));

        var YLeftAxis = d3.svg.axis().scale(YLine).orient("right").tickFormat(d3.format(".2s"));

        var svg = d3.select("#dd24").append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
          .append("g")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");





        // Bar Data categories
        Data.forEach(function (d) {
            d.Categories.forEach(function (b) {
                if (Categories.findIndex(function (c) { return c.Name===b.Name}) == -1) {
                    b.Type = "bar";
                    console.log(JSON.stringify(b))
                    Categories.push(b)
                }
            })
        });


        // Line Data categories
        Data.forEach(function (d) {
            d.LineCategory.forEach(function (b) {
                if (Categories.findIndex(function (c) { return c.Name === b.Name }) == -1) {
                    b.Type = "line";
                    console.log(JSON.stringify(b))
                    Categories.push(b)
                }
            })
        });

        // Processing Line data
        lineData = DataSegregator(Data.map(function (d) { return d.LineCategory }), "Name");

        // Line Coloring
        LineColor = d3.scale.ordinal();
        LineColor.domain(Categories.filter(function (d) { return d.Type == "line" }).map(function (d) { return d.Name }));
        LineColor.range(["#d40606", "#06bf00", "#98bdc5", "#671919", "#0b172b"])
        x0.domain(Data.map(function (d) { return d.Date; }));
        XLine.domain(Data.map(function (d) { return d.Date; }));
        x1.domain(Categories.filter(function (d) { return d.Type == "bar" }).map(function (d) { return d.Name})).rangeRoundBands([0, x0.rangeBand()]);
        y.domain([0, maxds]);

        svg.append("g")
            .attr("class", "x axis")
            .attr("transform", "translate(0," + height + ")")
            .call(xAxis);

        /*svg.append("g")
           .attr("class", "y axis")
            .attr("transform", "translate(" + (width) + ",0)")
           .call(YLeftAxis)

         .append("text")
           .attr("transform", "rotate(-90)")
           .attr("y", -10)

           .attr("dy", ".71em")
           .style("text-anchor", "end")
           .text("Percent");*/

        svg.append("g")
            .attr("class", "y axis")
            .attr("id","yaxis9")
            .call(yAxis)
          .append("text")
            .attr("transform", "rotate(-90)")
            .attr("y", 6)
            .attr("dy", ".71em")
            .style("text-anchor", "end")
            .text("Value");


        var state = svg.selectAll(".state")
            .data(Data)
          .enter().append("g")
            .attr("class", "state")
            .attr("transform", function (d) { return "translate(" + x0(d.Date) + ",0)"; });

        state.selectAll("rect")
            .data(function (d) { return d.Categories; })
          .enter().append("rect")
            .attr("width", x1.rangeBand())
            .attr("x", function (d) { return x1(d.Name); })
            .attr("y", function (d) { return y(d.Value); })
            .attr("class", function (d) { return 'l9' + (d.gg); })
            //.attr("height", function (d) { return height - y(d.Value); })
            .style("fill", function (d) { return color(d.gg); })
            .transition().delay(500).attrTween("height", function (d) {
                var i = d3.interpolate(0, height - y(d.Value));
                return function (t)
                {
                    return i(t);
                }
            });

        // drawaing lines
        svg.selectAll(".lines").data(lineData).enter().append("g").attr("class", "line")
        .each(function (d) {
            Name=d[0].Name
            d3.select(this).append("path").attr("d", function (b) { return line(b) }).style({ "stroke-width": "6px", "fill": "none" }).style("stroke", LineColor(Name)).style("stroke-linecap", "round").transition().duration(1500);
        })

    
        // Legends

        var LegendHolder = svg.append("g").attr("class", "legendHolder");
        var legend = LegendHolder.selectAll(".legend")
            .data(Categories.map(function (d) { return {"Name":d.Name,"Type":d.Type}}))
          .enter().append("g")
            .attr("class", "legend")
            .attr("transform", function (d, i) { return "translate(0," +( height+ margin.bottom/2 )+ ")"; })
            .each(function (d,i) {
                //  Legend Symbols

/*
                d3.select(this).append("rect")
                .attr("width", function () { return 18 })
                .attr("x", function (b) {

                    left = (i+1) * 15 + i * 18 + i * 5 + textWidthHolder;
                    return left;
                })
                 .attr("y", function (b) { return b.Type == 'bar'?0:7})
                .attr("height", function (b) { return b.Type== 'bar'? 18:5 })
                .style("fill", function (b) { return b.Type == 'bar' ? color(d.Name) : LineColor(d.Name) });
*/
                //  Legend Text
/*
                d3.select(this).append("text")
                .attr("x", function (b) {

                    left = (i+1) * 15 + (i+1) * 18 + (i + 1) * 5 + textWidthHolder;

                    return left;
                })
                .attr("y", 9)
                .attr("dy", ".35em")
                .style("text-anchor", "start")
                .text(d.Name);

                textWidthHolder += getTextWidth(d.Name, "10px", "calibri");*/
            });


        // Legend Placing

        d3.select(".legendHolder").attr("transform", function (d) {
            thisWidth = d3.select(this).node().getBBox().width;
            return "translate(" + ((width) / 2 - thisWidth / 2) + ",0)";
        })

        svg.append('image')
          .attr('xlink:href', 'https://raw.githubusercontent.com/ssissouf/ha/master/amd.bmp')
          .attr('width', ((width))+margin.left)
           .attr('height', 150)
           .attr("x",width+(margin.left/2))
           .attr("y",margin.top)


//0000


Data = [
{ Date: "imports", Categories: [{ Name: "Category1", Value: dataset.v10, gg:"category1" }], LineCategory: [{ Name: "Line1", Value: dataset.v10 }] },
{ Date: "exports", Categories: [{ Name: "Category1", Value: dataset.v20, gg:"category2" }], LineCategory: [{ Name: "Line1", Value: dataset.v20 }] },
       ]

       var margin = { top: Math.round((+d3.select("#dd01").style('height').slice(0, -2))*0.1), right: Math.round((+d3.select("#dd01").style('width').slice(0, -2))*0.05), bottom: Math.round((+d3.select("#dd01").style('height').slice(0, -2))*0.02), left: Math.round((+d3.select("#dd01").style('width').slice(0, -2))*0.1) },
            width = Math.round((+d3.select("#dd01").style('width').slice(0, -2))*0.5) - margin.left - margin.right,
            height = Math.round((+d3.select("#dd01").style('height').slice(0, -2))*1) - margin.top - margin.bottom;

        var textWidthHolder = 0;
        /// Adding Date in LineCategory
        Data.forEach(function (d) {
            d.LineCategory.forEach(function (b) {
                b.Date = d.Date;
            })
        });




        var Categories = new Array();
        // Extension method declaration

        Categories.pro

        var Data;
        var ageNames;
        var x0 = d3.scale.ordinal()
            .rangeRoundBands([0, width], .1);
        var XLine = d3.scale.ordinal()
            .rangeRoundPoints([0, width], .1);
        var x1 = d3.scale.ordinal();

        var y = d3.scale.linear()
            .range([height, 0]);

        /*var YLine = d3.scale.linear().range([height, 0])
        .domain([0, d3.max(Data, function (d) { return d3.max(d.LineCategory, function (b) { return b.Value }) })]);*/

        var color = d3.scale.ordinal()
            .range(["#d0743c", "#8a89a6", "#7b6888", "#6b486b", "#a05d56", "#d0743c", "#ff8c00"]);

        var line = d3.svg.line().x(function (d) {
            return x0(d.Date) + x0.rangeBand() / 2;
        }).y(function (d) { return YLine(d.Value) });




        var xAxis = d3.svg.axis()
            .scale(x0)
            .orient("bottom");

        var yAxis = d3.svg.axis()
            .scale(y)
            .orient("left")
            .tickFormat(d3.format(".2s"));

        var YLeftAxis = d3.svg.axis().scale(YLine).orient("right").tickFormat(d3.format(".2s"));

        var svg = d3.select("#dd25").append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
          .append("g")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

        



        // Bar Data categories
        Data.forEach(function (d) {
            d.Categories.forEach(function (b) {
                if (Categories.findIndex(function (c) { return c.Name===b.Name}) == -1) {
                    b.Type = "bar";
                    console.log(JSON.stringify(b))
                    Categories.push(b)
                }
            })
        });


        // Line Data categories
        Data.forEach(function (d) {
            d.LineCategory.forEach(function (b) {
                if (Categories.findIndex(function (c) { return c.Name === b.Name }) == -1) {
                    b.Type = "line";
                    console.log(JSON.stringify(b))
                    Categories.push(b)
                }
            })
        });

        // Processing Line data
        lineData = DataSegregator(Data.map(function (d) { return d.LineCategory }), "Name");

        // Line Coloring
        LineColor = d3.scale.ordinal();
        LineColor.domain(Categories.filter(function (d) { return d.Type == "line" }).map(function (d) { return d.Name }));
        LineColor.range(["#d40606", "#06bf00", "#98bdc5", "#671919", "#0b172b"])
        x0.domain(Data.map(function (d) { return d.Date; }));
        XLine.domain(Data.map(function (d) { return d.Date; }));
        x1.domain(Categories.filter(function (d) { return d.Type == "bar" }).map(function (d) { return d.Name})).rangeRoundBands([0, x0.rangeBand()]);
        y.domain([0, maxds]);

        svg.append("g")
            .attr("class", "x axis")
            .attr("transform", "translate(0," + height + ")")
            .call(xAxis);

        /*svg.append("g")
           .attr("class", "y axis")
            .attr("transform", "translate(" + (width) + ",0)")
           .call(YLeftAxis)

         .append("text")
           .attr("transform", "rotate(-90)")
           .attr("y", -10)

           .attr("dy", ".71em")
           .style("text-anchor", "end")
           .text("Percent");*/

        svg.append("g")
            .attr("class", "y axis")
            .attr("id","yaxis10")
            .call(yAxis)
          .append("text")
            .attr("transform", "rotate(-90)")
            .attr("y", 6)
            .attr("dy", ".71em")
            .style("text-anchor", "end")
            .text("Value");


        var state = svg.selectAll(".state")
            .data(Data)
          .enter().append("g")
            .attr("class", "state")
            .attr("transform", function (d) { return "translate(" + x0(d.Date) + ",0)"; });

        state.selectAll("rect")
            .data(function (d) { return d.Categories; })
          .enter().append("rect")
            .attr("width", x1.rangeBand())
            .attr("x", function (d) { return x1(d.Name); })
            .attr("y", function (d) { return y(d.Value); })
            .attr("class", function (d) { return 'l10' + (d.gg); })
            //.attr("height", function (d) { return height - y(d.Value); })
            .style("fill", function (d) { return color(d.gg); })
            .transition().delay(500).attrTween("height", function (d) {
                var i = d3.interpolate(0, height - y(d.Value));
                return function (t)
                {
                    return i(t);
                }
            });

        // drawaing lines
        svg.selectAll(".lines").data(lineData).enter().append("g").attr("class", "line")
        .each(function (d) {
            Name=d[0].Name
            d3.select(this).append("path").attr("d", function (b) { return line(b) }).style({ "stroke-width": "6px", "fill": "none" }).style("stroke", LineColor(Name)).style("stroke-linecap", "round").transition().duration(1500);
        })

    
        // Legends

        var LegendHolder = svg.append("g").attr("class", "legendHolder");
        var legend = LegendHolder.selectAll(".legend")
            .data(Categories.map(function (d) { return {"Name":d.Name,"Type":d.Type}}))
          .enter().append("g")
            .attr("class", "legend")
            .attr("transform", function (d, i) { return "translate(0," +( height+ margin.bottom/2 )+ ")"; })
            .each(function (d,i) {
                //  Legend Symbols

/*
                d3.select(this).append("rect")
                .attr("width", function () { return 18 })
                .attr("x", function (b) {

                    left = (i+1) * 15 + i * 18 + i * 5 + textWidthHolder;
                    return left;
                })
                 .attr("y", function (b) { return b.Type == 'bar'?0:7})
                .attr("height", function (b) { return b.Type== 'bar'? 18:5 })
                .style("fill", function (b) { return b.Type == 'bar' ? color(d.Name) : LineColor(d.Name) });
*/
                //  Legend Text
/*
                d3.select(this).append("text")
                .attr("x", function (b) {

                    left = (i+1) * 15 + (i+1) * 18 + (i + 1) * 5 + textWidthHolder;

                    return left;
                })
                .attr("y", 9)
                .attr("dy", ".35em")
                .style("text-anchor", "start")
                .text(d.Name);

                textWidthHolder += getTextWidth(d.Name, "10px", "calibri");*/
            });


        // Legend Placing

        d3.select(".legendHolder").attr("transform", function (d) {
            thisWidth = d3.select(this).node().getBBox().width;
            return "translate(" + ((width) / 2 - thisWidth / 2) + ",0)";
        })
        svg.append('image')
          .attr('xlink:href', 'https://raw.githubusercontent.com/ssissouf/ha/master/tourism0.bmp')
          .attr('width', ((width))+margin.left)
           .attr('height', 150)
           .attr("x",width+(margin.left/2))
           .attr("y",margin.top)

		   		    /*


           {label:'value10',
            value:'35',
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/tourism0.bmp'},*/

}) // d3.csv.then.... 
function countrychange(){
    //alert(999)

    var scountry = d3.select('#ocountries option:checked').text();
    //alert(scountry)
    var imageurl = ""
    if (scountry == "Angola"){imageurl = 'https://raw.githubusercontent.com/ssissouf/ha/master/ANGOLA001.png'}
    if (scountry == "Burundi"){imageurl = 'Burundi001.png'}

    //var svgtmp = d3.select("#mmp")
    d3.select("#mmp").attr("opacity", 1)
    d3.select("#mmp").transition().duration(500).attr("opacity", 0)

    setTimeout(function () {
    d3.selectAll(".chart").remove();
    d3.select("#dd14").append("svg:svg").attr("class","chart")

    var chart = d3.select(".chart")
	.attr("width", Math.round((+d3.select("#dd14").style('width').slice(0, -2))*1))
	.attr("height", Math.round((+d3.select("#dd14").style('height').slice(0, -2))*1))

    var img6 = chart.append("image")
          .attr("id", "mmp")
          .attr('xlink:href', imageurl)
           .attr('width', Math.round((+d3.select("#dd14").style('width').slice(0, -2))*1))
           .attr('height', Math.round((+d3.select("#dd14").style('height').slice(0, -2))*1))
           .attr("x",0)
           .attr("y",0)
           .attr("opacity", 0);

    img6.transition().duration(3000).attr("opacity", 1)

    yearchange()

    },500)
/*
    d3.selectAll(".chart").remove();
    d3.select("#dd14").append("svg:svg").attr("class","chart")

    var chart = d3.select(".chart")
	.attr("width", Math.round((+d3.select("#dd14").style('width').slice(0, -2))*1))
	.attr("height", Math.round((+d3.select("#dd14").style('height').slice(0, -2))*1))

    var img6 = chart.append("image")
          .attr("id", "mmap")
          .attr('xlink:href', imageurl)
           .attr('width', Math.round((+d3.select("#dd14").style('width').slice(0, -2))*1))
           .attr('height', Math.round((+d3.select("#dd14").style('height').slice(0, -2))*1))
           .attr("x",0)
           .attr("y",0)
           .attr("opacity", 0);

    img6.transition().duration(3000).attr("opacity", 1)*/
}

    function countrychange_old(){
    d3.selectAll('svg').remove();
	//alert(dataset.ccode)
    var i;
	var i0;
	for (i=0; i< alldata.length;i++){
	//	alert(i)
		//alert(data[i].ccode)
		//alert(data[i].year)
		if (alldata[i].ccode ==ccode){
			if (alldata[i].year == syear){
				//alert ("oui")
				i0 = i
				dataset = alldata[i]
				if (parseFloat(dataset.v01) > maxds){maxds = parseFloat(dataset.v01)}
				if (parseFloat(dataset.v02) > maxds){maxds = parseFloat(dataset.v02)}
				if (parseFloat(dataset.v03) > maxds){maxds = parseFloat(dataset.v03)}
				if (parseFloat(dataset.v04) > maxds){maxds = parseFloat(dataset.v04)}
				if (parseFloat(dataset.v05) > maxds){maxds = parseFloat(dataset.v05)}
				if (parseFloat(dataset.v06) > maxds){maxds = parseFloat(dataset.v06)}
				if (parseFloat(dataset.v07) > maxds){maxds = parseFloat(dataset.v07)}
				if (parseFloat(dataset.v08) > maxds){maxds = parseFloat(dataset.v08)}
				if (parseFloat(dataset.v09) > maxds){maxds = parseFloat(dataset.v09)}
				if (parseFloat(dataset.v10) > maxds){maxds = parseFloat(dataset.v10)}
				if (parseFloat(dataset.v11) > maxds){maxds = parseFloat(dataset.v11)}
				if (parseFloat(dataset.v12) > maxds){maxds = parseFloat(dataset.v12)}
				if (parseFloat(dataset.v13) > maxds){maxds = parseFloat(dataset.v13)}
				if (parseFloat(dataset.v14) > maxds){maxds = parseFloat(dataset.v14)}
				if (parseFloat(dataset.v15) > maxds){maxds = parseFloat(dataset.v15)}
				if (parseFloat(dataset.v16) > maxds){maxds = parseFloat(dataset.v16)}
				if (parseFloat(dataset.v17) > maxds){maxds = parseFloat(dataset.v17)}
				if (parseFloat(dataset.v18) > maxds){maxds = parseFloat(dataset.v18)}
				if (parseFloat(dataset.v19) > maxds){maxds = parseFloat(dataset.v19)}
				if (parseFloat(dataset.v20) > maxds){maxds = parseFloat(dataset.v20)}
			}
		}
	};
    maxds=1000

	//alert(maxds);
    //alert (dataset.country);
  
   
   //lert(654)
	var svg = d3.select("#dd11")
		.append("svg").attr('id','tre44')
		.append("g").attr('id','tre444')

svg.append("g")
	.attr("class", "slices");
svg.append("g")
	.attr("class", "labels");
svg.append("g")
	.attr("class", "lines");
svg.append("g")
  .attr("class", "images");
//alert(76)
var width = 940,
    height = 550,
	radius = Math.min(width, height) / 3;

var pie = d3.layout.pie()
	.sort(null)
	.value(function(d) {
		return d.value;
	});

var arc = d3.svg.arc()
	.outerRadius(radius * 0.8)
	.innerRadius(radius * 0.4);

var outerArc = d3.svg.arc()
	.innerRadius(radius * 1.1)
	.outerRadius(radius * 1.1);

svg.attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");

var key = function(d){ return d.data.label; };

var color = d3.scale.ordinal()
	.domain(["Lorem ipsum", "dolor sit", "amet", "consectetur", "adipisicing", "elit", "sed", "do", "eiusmod", "tempor", "incididunt"])
	.range(["#98abc5", "#8a89a6", "#7b6888", "#6b486b", "#a05d56", "#d0743c", "#ff8c00"]);

function randomData (){
	var labels = color.domain();
	return labels.map(function(label){
		return { label: label, value: Math.random(), imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/agri.png' }
	});
}

var arr=[
           {label:'value1',
            value:'15',
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/FoodAndLA_EN.bmp'},
           {label:'value2',
            value:'35',
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/boissons1.bmp'},
           {label:'value3',
            value:'5',
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/merauxnonc.bmp'},
            {label:'value4',
            value:'50',
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/mineral%20fuels%20etc.bmp'},
			{label:'value5',
            value:'15',
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/butter.bmp'},
           {label:'value6',
            value:'35',
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/chemistry.bmp'},
           {label:'value7',
            value:'5',
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/clothes.bmp'},
            {label:'value8',
            value:'50',
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/bus.bmp'},
			{label:'value9',
            value:'15',
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/amd.bmp'},
           {label:'value10',
            value:'35',
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/tourism0.bmp'},
        ];

function mydata (){
		return arr;
}

d3.select(".randomize")
	.on("click", function(){
		change(randomData());
	});

// change(randomData());
//alert(5674)
change(arr);

function change(data) {

	/* ------- PIE SLICES -------*/
	var slice = svg.select(".slices").selectAll("path.slice")
		.data(pie(data), key);

	slice.enter()
		.insert("path")
		.style("fill", function(d) { return color(d.data.label); })
		.attr("class", "slice");

	slice		
		.transition().duration(1000)
		.attrTween("d", function(d) {
			this._current = this._current || d;
			var interpolate = d3.interpolate(this._current, d);
			this._current = interpolate(0);
			return function(t) {
				return arc(interpolate(t));
			};
		})

	slice.exit()
		.remove();

	/* ------- TEXT LABELS -------*/

	var text = svg.select(".labels").selectAll("text")
		.data(pie(data), key);
		
	var img = svg.select(".images").selectAll("image")
	  .data(pie(data), key);
	  
	 text.enter()
		.append("text")
		.filter(function(d,i){
		  return d.data.label !== "do";
		})
		.attr("dy", ".35em")
		.text(function(d) {
			return "(" + d.data.value+ ")";
		});

	text.transition().duration(1000)
		.attrTween("transform", function(d) {
			this._current = this._current || d;
			var interpolate = d3.interpolate(this._current, d);
			this._current = interpolate(0);
			return function(t) {
				var d2 = interpolate(t);
				var pos = outerArc.centroid(d2);
				pos[0] = radius * (midAngle(d2) < Math.PI ? 2 : -2);
				return "translate("+ pos +")";
			};
		})
		.styleTween("text-anchor", function(d){
			this._current = this._current || d;
			var interpolate = d3.interpolate(this._current, d);
			this._current = interpolate(0);
			return function(t) {
				var d2 = interpolate(t);
				return midAngle(d2) < Math.PI ? "start":"end";
			};
		});
		
	function midAngle(d){
		return d.startAngle + (d.endAngle - d.startAngle)/2;
	}

	text.exit()
		.remove();
		
	img.enter()
		.append("image")
		.filter(function(d,i){
		  return d.data.label;
		})
		.attr("xlink:href", function(d,i){
		  return d.data.imglink;
		})
    .attr("width", 200)
    .attr("height", 70);
    
  img.transition().duration(1000)
		.attrTween("transform", function(d) {
			this._current = this._current || d;
			var interpolate = d3.interpolate(this._current, d);
			this._current = interpolate(0);
			return function(t) {
				var d2 = interpolate(t);
				var pos = outerArc.centroid(d2);
				pos[0] = radius * 0.6 * (midAngle(d2) < Math.PI ? 2 : -3);
				return "translate("+ pos +")";
			};
		})
    
	img.exit()
		.remove();

	/* ------- SLICE TO TEXT POLYLINES -------*/

	var polyline = svg.select(".lines").selectAll("polyline")
		.data(pie(data), key);
	
	polyline.enter()
		.append("polyline");

	polyline.transition().duration(1000)
		.attrTween("points", function(d){
			this._current = this._current || d;
			var interpolate = d3.interpolate(this._current, d);
			this._current = interpolate(0);
			return function(t) {
				var d2 = interpolate(t);
				var pos = outerArc.centroid(d2);
				pos[0] = radius * 0.6 * (midAngle(d2) < Math.PI ? 2 : -2);
				return [arc.centroid(d2), outerArc.centroid(d2), pos];
			};			
		});
	
	polyline.exit()
		.remove();
};

//============================================================================================================

var svg = d3.select("#dd16")
	.append("svg")
	.append("g")

svg.append("g")
	.attr("class", "slices");
svg.append("g")
	.attr("class", "labels");
svg.append("g")
	.attr("class", "lines");
svg.append("g")
  .attr("class", "images");

var width = 1000,
    height = 550,
	radius = Math.min(width, height) / 3;

var pie = d3.layout.pie()
	.sort(null)
	.value(function(d) {
		return d.value;
	});

var arc = d3.svg.arc()
	.outerRadius(radius * 0.8)
	.innerRadius(radius * 0.4);

var outerArc = d3.svg.arc()
	.innerRadius(radius * 1.1)
	.outerRadius(radius * 1.1);

svg.attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");

var key = function(d){ return d.data.label; };

var color = d3.scale.ordinal()
	.domain(["Lorem ipsum", "dolor sit", "amet", "consectetur", "adipisicing", "elit", "sed", "do", "eiusmod", "tempor", "incididunt"])
	.range(["#98abc5", "#8a89a6", "#7b6888", "#6b486b", "#a05d56", "#d0743c", "#ff8c00"]);

function randomData (){
	var labels = color.domain();
	return labels.map(function(label){
		return { label: label, value: Math.random(), imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/agri.png' }
	});
}

var arr=[
           {label:'value1',
            value:'15',
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/FoodAndLA_EN.bmp'},
           {label:'value2',
            value:'35',
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/boissons1.bmp'},
           {label:'value3',
            value:'5',
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/merauxnonc.bmp'},
            {label:'value4',
            value:'50',
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/mineral%20fuels%20etc.bmp'},
			{label:'value5',
            value:'15',
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/butter.bmp'},
           {label:'value6',
            value:'35',
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/chemistry.bmp'},
           {label:'value7',
            value:'5',
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/clothes.bmp'},
            {label:'value8',
            value:'50',
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/bus.bmp'},
			{label:'value9',
            value:'15',
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/amd.bmp'},
           {label:'value10',
            value:'35',
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/tourism0.bmp'},
        ];

function mydata (){
		return arr;
}

d3.select(".randomize")
	.on("click", function(){
		change(randomData());
	});

// change(randomData());

change(arr);

function change(data) {

	/* ------- PIE SLICES -------*/
	var slice = svg.select(".slices").selectAll("path.slice")
		.data(pie(data), key);

	slice.enter()
		.insert("path")
		.style("fill", function(d) { return color(d.data.label); })
		.attr("class", "slice");

	slice		
		.transition().duration(1000)
		.attrTween("d", function(d) {
			this._current = this._current || d;
			var interpolate = d3.interpolate(this._current, d);
			this._current = interpolate(0);
			return function(t) {
				return arc(interpolate(t));
			};
		})

	slice.exit()
		.remove();

	/* ------- TEXT LABELS -------*/

	var text = svg.select(".labels").selectAll("text")
		.data(pie(data), key);
		
	var img = svg.select(".images").selectAll("image")
	  .data(pie(data), key);
	  
	 text.enter()
		.append("text")
		.filter(function(d,i){
		  return d.data.label !== "do";
		})
		.attr("dy", ".35em")
		.text(function(d) {
			return "(" + d.data.value+ ")";
		});

	text.transition().duration(1000)
		.attrTween("transform", function(d) {
			this._current = this._current || d;
			var interpolate = d3.interpolate(this._current, d);
			this._current = interpolate(0);
			return function(t) {
				var d2 = interpolate(t);
				var pos = outerArc.centroid(d2);
				pos[0] = radius * (midAngle(d2) < Math.PI ? 2 : -2);
				return "translate("+ pos +")";
			};
		})
		.styleTween("text-anchor", function(d){
			this._current = this._current || d;
			var interpolate = d3.interpolate(this._current, d);
			this._current = interpolate(0);
			return function(t) {
				var d2 = interpolate(t);
				return midAngle(d2) < Math.PI ? "start":"end";
			};
		});
		
	function midAngle(d){
		return d.startAngle + (d.endAngle - d.startAngle)/2;
	}

	text.exit()
		.remove();
		
	img.enter()
		.append("image")
		.filter(function(d,i){
		  return d.data.label;
		})
		.attr("xlink:href", function(d,i){
		  return d.data.imglink;
		})
    .attr("width", 200)
    .attr("height", 70);
    
  img.transition().duration(1000)
		.attrTween("transform", function(d) {
			this._current = this._current || d;
			var interpolate = d3.interpolate(this._current, d);
			this._current = interpolate(0);
			return function(t) {
				var d2 = interpolate(t);
				var pos = outerArc.centroid(d2);
				pos[0] = radius * 0.6 * (midAngle(d2) < Math.PI ? 2 : -3);
				return "translate("+ pos +")";
			};
		})
    
	img.exit()
		.remove();

	/* ------- SLICE TO TEXT POLYLINES -------*/

	var polyline = svg.select(".lines").selectAll("polyline")
		.data(pie(data), key);
	
	polyline.enter()
		.append("polyline");

	polyline.transition().duration(1000)
		.attrTween("points", function(d){
			this._current = this._current || d;
			var interpolate = d3.interpolate(this._current, d);
			this._current = interpolate(0);
			return function(t) {
				var d2 = interpolate(t);
				var pos = outerArc.centroid(d2);
				pos[0] = radius * 0.6 * (midAngle(d2) < Math.PI ? 2 : -2);
				return [arc.centroid(d2), outerArc.centroid(d2), pos];
			};			
		});
	
	polyline.exit()
		.remove();
};

//============================================================================================================
//d3.csv("https://raw.githubusercontent.com/ssissouf/ha/master/ddd23.txt", function(data) {

///////////////////////
// Chart Size Setup
var margin = { top: 35, right: 0, bottom: 30, left: 40 };

var width = 960 - margin.left - margin.right;
var height = 500 - margin.top - margin.bottom;

var chart = d3.select(".chart")
	.attr("width", Math.round((+d3.select("#dd14").style('width').slice(0, -2))*0.5))
	.attr("height", 500)
          .append("image")
          .attr("class","mmap")
          .attr('xlink:href', 'https://raw.githubusercontent.com/ssissouf/ha/master/ANGOLA001.png')
           .attr('width', Math.round((+d3.select("#dd14").style('width').slice(0, -2))*0.5))
           .attr('height', "100%")
           .attr("x",0)
           .attr("y",5);

    var chart234 = d3.select(".chart1")
	.attr("width", 960)
	.attr("height", 500)
          .append("image")
          .attr('xlink:href', 'https://raw.githubusercontent.com/ssissouf/ha/master/arrow001.png')
           .attr('width', 280)
           .attr('height', 150)
           .attr("x",0)
           .attr("y",5);

    var chart2344 = d3.select(".chart2")
	.attr("width", 960)
	.attr("height", 500)
          .append("image")
          .attr('xlink:href', 'https://raw.githubusercontent.com/ssissouf/ha/master/arrow001.png')
           .attr('width', 280)
           .attr('height', 150)
           .attr("x",0)
           .attr("y",5);
///////////////////////
// Scales
var x = d3.scale.ordinal()
	.domain(data.map(function(d) { return d['state']; }))
	.rangeRoundBands([0, width], .1);

var y = d3.scale.linear()
	.domain([0, d3.max(data, function(d) { return d['starbucks']; }) * 1.1])
	.range([height, 0]);

///////////////////////
// Axis
var xAxis = d3.svg.axis()
	.scale(x)
	.orient("bottom");

var yAxis = d3.svg.axis()
	.scale(y)
	.orient("left");

chart.append("g")
	.attr("class", "x axis")
	.attr("transform", "translate(0," + height + ")")
	.call(xAxis);

chart.append("g")
	.attr("class", "y axis")
	.call(yAxis);

///////////////////////
// Title
chart.append("text")
  .text('Bar Chart!')
  .attr("text-anchor", "middle")
  .attr("class", "graph-title")
  .attr("y", -10)
  .attr("x", width / 2.0);

///////////////////////
// Bars
var bar = chart.selectAll(".bar")
	.data(data)
  .enter().append("rect")
	.attr("class", "bar")
	.attr("x", function(d) { return x(d['state']); })
	.attr("y", height)
	.attr("width", x.rangeBand())
	.attr("height", 0);

bar.transition()
	.duration(1500)
	.ease("elastic")
	.attr("y", function(d) { return y(d['starbucks']); })
	.attr("height", function(d) { return height - y(d['starbucks']); })

///////////////////////
// Tooltips
var tooltip = d3.select("body").append("div")
	.attr("class", "tooltip");

bar.on("mouseover", function(d) {
	  tooltip.html(d['value'])
		  .style("visibility", "visible");
	})
	.on("mousemove", function(d) {
	  tooltip.style("top", event.pageY - (tooltip[0][0].clientHeight + 5) + "px")
		  .style("left", event.pageX - (tooltip[0][0].clientWidth / 2.0) + "px");
	})
	.on("mouseout", function(d) {
	  tooltip.style("visibility", "hidden");
	});
//});

var data01 = [
	{ "indicator": "exports", "value": 1253},
    { "indicator": "imports", "value": 492}
];










function getTextWidth(text, fontSize, fontName) {
            c = document.createElement("canvas");
            ctx = c.getContext("2d");
            ctx.font = fontSize + ' ' + fontName;
            return ctx.measureText(text).width;
        }

        function DataSegregator2(array, on) {
            var SegData;
            OrdinalPositionHolder = {
                valueOf: function () {
                    thisObject = this;
                    keys = Object.keys(thisObject);
                    keys.splice(keys.indexOf("valueOf"), 1);
                    keys.splice(keys.indexOf("keys"), 1);
                    return keys.length == 0 ? -1 : d3.max(keys, function (d) { return thisObject[d] })
                }
                , keys: function () {
                    keys = Object.keys(thisObject);
                    keys.splice(keys.indexOf("valueOf"), 1);
                    keys.splice(keys.indexOf("keys"), 1);
                    return keys;
                }
            }
            array[0].map(function (d) { return d[on] }).forEach(function (b) {
                value = OrdinalPositionHolder.valueOf();
                OrdinalPositionHolder[b] = OrdinalPositionHolder > -1 ? ++value : 0;
            })

            SegData = OrdinalPositionHolder.keys().map(function () {
                return [];
            });

            array.forEach(function (d) {
                d.forEach(function (b) {
                    SegData[OrdinalPositionHolder[b[on]]].push(b);
                })
            });

            return SegData;
        }

//0000


Data = [
{ Date: "imports", Categories: [{ Name: "Category1", Value: dataset.v01, gg:"category1" }], LineCategory: [{ Name: "Line1", Value: dataset.v01 }] },
{ Date: "exports", Categories: [{ Name: "Category1", Value: dataset.v11, gg:"category2" }], LineCategory: [{ Name: "Line1", Value: dataset.v11 }] },
       ]

        var margin = { top: 20, right: 30, bottom: 60, left: 40 },
            width = 400 - margin.left - margin.right,
            height = 500 - margin.top - margin.bottom;

        var textWidthHolder = 0;
        /// Adding Date in LineCategory
        Data.forEach(function (d) {
            d.LineCategory.forEach(function (b) {
                b.Date = d.Date;
            })
        });




        var Categories = new Array();
        // Extension method declaration

        Categories.pro

        var Data;
        var ageNames;
        var x0 = d3.scale.ordinal()
            .rangeRoundBands([0, width], .1);
        var XLine = d3.scale.ordinal()
            .rangeRoundPoints([0, width], .1);
        var x1 = d3.scale.ordinal();

        var y = d3.scale.linear()
            .range([height, 0]);

        /*/*var YLine = d3.scale.linear().range([height, 0])
        .domain([0, d3.max(Data, function (d) { return d3.max(d.LineCategory, function (b) { return b.Value }) })]);*/

        var YLine = d3.scale.linear().range([height, 0])
        .domain([0, maxds]);

        var color = d3.scale.ordinal()
            .range(["#d0743c", "#8a89a6", "#7b6888", "#6b486b", "#a05d56", "#d0743c", "#ff8c00"]);

        var line = d3.svg.line().x(function (d) {
            return x0(d.Date) + x0.rangeBand() / 2;
        }).y(function (d) { return YLine(d.Value) });




        var xAxis = d3.svg.axis()
            .scale(x0)
            .orient("bottom");

        var yAxis = d3.svg.axis()
            .scale(y)
            .orient("left")
            .tickFormat(d3.format(".2s"));

        var YLeftAxis = d3.svg.axis().scale(YLine).orient("right").tickFormat(d3.format(".2s"));

        var svg = d3.select("#dd01").append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
          .append("g")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");





        // Bar Data categories
        Data.forEach(function (d) {
            d.Categories.forEach(function (b) {
                if (Categories.findIndex(function (c) { return c.Name===b.Name}) == -1) {
                    b.Type = "bar";
                    console.log(JSON.stringify(b))
                    Categories.push(b)
                }
            })
        });


        // Line Data categories
        Data.forEach(function (d) {
            d.LineCategory.forEach(function (b) {
                if (Categories.findIndex(function (c) { return c.Name === b.Name }) == -1) {
                    b.Type = "line";
                    console.log(JSON.stringify(b))
                    Categories.push(b)
                }
            })
        });

        // Processing Line data
        lineData = DataSegregator2(Data.map(function (d) { return d.LineCategory }), "Name");

        // Line Coloring
        LineColor = d3.scale.ordinal();
        LineColor.domain(Categories.filter(function (d) { return d.Type == "line" }).map(function (d) { return d.Name }));
        LineColor.range(["#d40606", "#06bf00", "#98bdc5", "#671919", "#0b172b"])
        x0.domain(Data.map(function (d) { return d.Date; }));
        XLine.domain(Data.map(function (d) { return d.Date; }));
        x1.domain(Categories.filter(function (d) { return d.Type == "bar" }).map(function (d) { return d.Name})).rangeRoundBands([0, x0.rangeBand()]);
        //y.domain([0, maxds]);
		y.domain([0, maxds]);
        svg.append("g")
            .attr("class", "x axis")
            .attr("transform", "translate(0," + height + ")")
            .call(xAxis);

        /*svg.append("g")
           .attr("class", "y axis")
            .attr("transform", "translate(" + (width) + ",0)")
           .call(YLeftAxis)

         .append("text")
           .attr("transform", "rotate(-90)")
           .attr("y", -10)

           .attr("dy", ".71em")
           .style("text-anchor", "end")
           .text("Percent");*/

        svg.append("g")
            .attr("class", "y axis")
            .call(yAxis)
          .append("text")
            .attr("transform", "rotate(-90)")
            .attr("y", 6)
            .attr("dy", ".71em")
            .style("text-anchor", "end")
            .text("Value");


        var state = svg.selectAll(".state")
            .data(Data)
          .enter().append("g")
            .attr("class", "state")
            .attr("transform", function (d) { return "translate(" + x0(d.Date) + ",0)"; });

        state.selectAll("rect")
            .data(function (d) { return d.Categories; })
          .enter().append("rect")
            .attr("width", x1.rangeBand())
            .attr("x", function (d) { return x1(d.Name); })
            .attr("y", function (d) { return y(d.Value); })
            //.attr("height", function (d) { return height - y(d.Value); })
            .style("fill", function (d) { return color(d.gg); })
            .transition().delay(500).attrTween("height", function (d) {
                var i = d3.interpolate(0, height - y(d.Value));
                return function (t)
                {
                    return i(t);
                }
            });

        // drawaing lines
        svg.selectAll(".lines").data(lineData).enter().append("g").attr("class", "line")
        .each(function (d) {
            Name=d[0].Name
            d3.select(this).append("path").attr("d", function (b) { return line(b) }).style({ "stroke-width": "6px", "fill": "none" }).style("stroke", LineColor(Name)).style("stroke-linecap", "round").transition().duration(1500);
        })

    
        // Legends

        var LegendHolder = svg.append("g").attr("class", "legendHolder");
        var legend = LegendHolder.selectAll(".legend")
            .data(Categories.map(function (d) { return {"Name":d.Name,"Type":d.Type}}))
          .enter().append("g")
            .attr("class", "legend")
            .attr("transform", function (d, i) { return "translate(0," +( height+ margin.bottom/2 )+ ")"; })
            .each(function (d,i) {
                //  Legend Symbols

/*
                d3.select(this).append("rect")
                .attr("width", function () { return 18 })
                .attr("x", function (b) {

                    left = (i+1) * 15 + i * 18 + i * 5 + textWidthHolder;
                    return left;
                })
                 .attr("y", function (b) { return b.Type == 'bar'?0:7})
                .attr("height", function (b) { return b.Type== 'bar'? 18:5 })
                .style("fill", function (b) { return b.Type == 'bar' ? color(d.Name) : LineColor(d.Name) });
*/
                //  Legend Text
/*
                d3.select(this).append("text")
                .attr("x", function (b) {

                    left = (i+1) * 15 + (i+1) * 18 + (i + 1) * 5 + textWidthHolder;

                    return left;
                })
                .attr("y", 9)
                .attr("dy", ".35em")
                .style("text-anchor", "start")
                .text(d.Name);

                textWidthHolder += getTextWidth(d.Name, "10px", "calibri");*/
            });


        // Legend Placing

        d3.select(".legendHolder").attr("transform", function (d) {
            thisWidth = d3.select(this).node().getBBox().width;
            return "translate(" + ((width) / 2 - thisWidth / 2) + ",0)";
        })
        svg.append('image')
          .attr('xlink:href', 'https://raw.githubusercontent.com/ssissouf/ha/master/FoodAndLA_EN.bmp')
           .attr('width', 260)
           .attr('height', 150)
           .attr("x",330)
           .attr("y",100)
//0000


Data = [
{ Date: "imports", Categories: [{ Name: "Category1", Value: dataset.v02, gg:"category1" }], LineCategory: [{ Name: "Line1", Value: dataset.v02 }] },
{ Date: "exports", Categories: [{ Name: "Category1", Value: dataset.v12, gg:"category2" }], LineCategory: [{ Name: "Line1", Value: dataset.v12 }] },
       ]

        var margin = { top: 20, right: 30, bottom: 60, left: 40 },
            width = 400 - margin.left - margin.right,
            height = 500 - margin.top - margin.bottom;

        var textWidthHolder = 0;
        /// Adding Date in LineCategory
        Data.forEach(function (d) {
            d.LineCategory.forEach(function (b) {
                b.Date = d.Date;
            })
        });




        var Categories = new Array();
        // Extension method declaration

        Categories.pro

        var Data;
        var ageNames;
        var x0 = d3.scale.ordinal()
            .rangeRoundBands([0, width], .1);
        var XLine = d3.scale.ordinal()
            .rangeRoundPoints([0, width], .1);
        var x1 = d3.scale.ordinal();

        var y = d3.scale.linear()
            .range([height, 0]);

       /* /*var YLine = d3.scale.linear().range([height, 0])
        .domain([0, d3.max(Data, function (d) { return d3.max(d.LineCategory, function (b) { return b.Value }) })]);*/

        var color = d3.scale.ordinal()
            .range(["#d0743c", "#8a89a6", "#7b6888", "#6b486b", "#a05d56", "#d0743c", "#ff8c00"]);

        var line = d3.svg.line().x(function (d) {
            return x0(d.Date) + x0.rangeBand() / 2;
        }).y(function (d) { return YLine(d.Value) });




        var xAxis = d3.svg.axis()
            .scale(x0)
            .orient("bottom");

        var yAxis = d3.svg.axis()
            .scale(y)
            .orient("left")
            .tickFormat(d3.format(".2s"));

        var YLeftAxis = d3.svg.axis().scale(YLine).orient("right").tickFormat(d3.format(".2s"));

        var svg = d3.select("#dd02").append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
          .append("g")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");





        // Bar Data categories
        Data.forEach(function (d) {
            d.Categories.forEach(function (b) {
                if (Categories.findIndex(function (c) { return c.Name===b.Name}) == -1) {
                    b.Type = "bar";
                    console.log(JSON.stringify(b))
                    Categories.push(b)
                }
            })
        });


        // Line Data categories
        Data.forEach(function (d) {
            d.LineCategory.forEach(function (b) {
                if (Categories.findIndex(function (c) { return c.Name === b.Name }) == -1) {
                    b.Type = "line";
                    console.log(JSON.stringify(b))
                    Categories.push(b)
                }
            })
        });

        // Processing Line data
        lineData = DataSegregator(Data.map(function (d) { return d.LineCategory }), "Name");

        // Line Coloring
        LineColor = d3.scale.ordinal();
        LineColor.domain(Categories.filter(function (d) { return d.Type == "line" }).map(function (d) { return d.Name }));
        LineColor.range(["#d40606", "#06bf00", "#98bdc5", "#671919", "#0b172b"])
        x0.domain(Data.map(function (d) { return d.Date; }));
        XLine.domain(Data.map(function (d) { return d.Date; }));
        x1.domain(Categories.filter(function (d) { return d.Type == "bar" }).map(function (d) { return d.Name})).rangeRoundBands([0, x0.rangeBand()]);
        y.domain([0, maxds]);

        svg.append("g")
            .attr("class", "x axis")
            .attr("transform", "translate(0," + height + ")")
            .call(xAxis);

        /*svg.append("g")
           .attr("class", "y axis")
            .attr("transform", "translate(" + (width) + ",0)")
           .call(YLeftAxis)

         .append("text")
           .attr("transform", "rotate(-90)")
           .attr("y", -10)

           .attr("dy", ".71em")
           .style("text-anchor", "end")
           .text("Percent");*/

        svg.append("g")
            .attr("class", "y axis")
            .call(yAxis)
          .append("text")
            .attr("transform", "rotate(-90)")
            .attr("y", 6)
            .attr("dy", ".71em")
            .style("text-anchor", "end")
            .text("Value");


        var state = svg.selectAll(".state")
            .data(Data)
          .enter().append("g")
            .attr("class", "state")
            .attr("transform", function (d) { return "translate(" + x0(d.Date) + ",0)"; });

        state.selectAll("rect")
            .data(function (d) { return d.Categories; })
          .enter().append("rect")
            .attr("width", x1.rangeBand())
            .attr("x", function (d) { return x1(d.Name); })
            .attr("y", function (d) { return y(d.Value); })
            //.attr("height", function (d) { return height - y(d.Value); })
            .style("fill", function (d) { return color(d.gg); })
            .transition().delay(500).attrTween("height", function (d) {
                var i = d3.interpolate(0, height - y(d.Value));
                return function (t)
                {
                    return i(t);
                }
            });

        // drawaing lines
        svg.selectAll(".lines").data(lineData).enter().append("g").attr("class", "line")
        .each(function (d) {
            Name=d[0].Name
            d3.select(this).append("path").attr("d", function (b) { return line(b) }).style({ "stroke-width": "6px", "fill": "none" }).style("stroke", LineColor(Name)).style("stroke-linecap", "round").transition().duration(1500);
        })

    
        // Legends

        var LegendHolder = svg.append("g").attr("class", "legendHolder");
        var legend = LegendHolder.selectAll(".legend")
            .data(Categories.map(function (d) { return {"Name":d.Name,"Type":d.Type}}))
          .enter().append("g")
            .attr("class", "legend")
            .attr("transform", function (d, i) { return "translate(0," +( height+ margin.bottom/2 )+ ")"; })
            .each(function (d,i) {
                //  Legend Symbols

/*
                d3.select(this).append("rect")
                .attr("width", function () { return 18 })
                .attr("x", function (b) {

                    left = (i+1) * 15 + i * 18 + i * 5 + textWidthHolder;
                    return left;
                })
                 .attr("y", function (b) { return b.Type == 'bar'?0:7})
                .attr("height", function (b) { return b.Type== 'bar'? 18:5 })
                .style("fill", function (b) { return b.Type == 'bar' ? color(d.Name) : LineColor(d.Name) });
*/
                //  Legend Text
/*
                d3.select(this).append("text")
                .attr("x", function (b) {

                    left = (i+1) * 15 + (i+1) * 18 + (i + 1) * 5 + textWidthHolder;

                    return left;
                })
                .attr("y", 9)
                .attr("dy", ".35em")
                .style("text-anchor", "start")
                .text(d.Name);

                textWidthHolder += getTextWidth(d.Name, "10px", "calibri");*/
            });


        // Legend Placing

        d3.select(".legendHolder").attr("transform", function (d) {
            thisWidth = d3.select(this).node().getBBox().width;
            return "translate(" + ((width) / 2 - thisWidth / 2) + ",0)";
        })
        svg.append('image')
          .attr('xlink:href', 'https://raw.githubusercontent.com/ssissouf/ha/master/boissons1.bmp')
           .attr('width', 260)
           .attr('height', 150)
           .attr("x",330)
           .attr("y",100)
//0000

//0000



Data = [
{ Date: "imports", Categories: [{ Name: "Category1", Value: dataset.v03, gg:"category1" }], LineCategory: [{ Name: "Line1", Value: dataset.v03 }] },
{ Date: "exports", Categories: [{ Name: "Category1", Value: dataset.v13, gg:"category2" }], LineCategory: [{ Name: "Line1", Value: dataset.v13 }] },
       ]

        var margin = { top: 20, right: 30, bottom: 60, left: 40 },
            width = 400 - margin.left - margin.right,
            height = 500 - margin.top - margin.bottom;

        var textWidthHolder = 0;
        /// Adding Date in LineCategory
        Data.forEach(function (d) {
            d.LineCategory.forEach(function (b) {
                b.Date = d.Date;
            })
        });




        var Categories = new Array();
        // Extension method declaration

        Categories.pro

        var Data;
        var ageNames;
        var x0 = d3.scale.ordinal()
            .rangeRoundBands([0, width], .1);
        var XLine = d3.scale.ordinal()
            .rangeRoundPoints([0, width], .1);
        var x1 = d3.scale.ordinal();

        var y = d3.scale.linear()
            .range([height, 0]);

       /* /*var YLine = d3.scale.linear().range([height, 0])
        .domain([0, d3.max(Data, function (d) { return d3.max(d.LineCategory, function (b) { return b.Value }) })]);*/

        var color = d3.scale.ordinal()
            .range(["#d0743c", "#8a89a6", "#7b6888", "#6b486b", "#a05d56", "#d0743c", "#ff8c00"]);

        var line = d3.svg.line().x(function (d) {
            return x0(d.Date) + x0.rangeBand() / 2;
        }).y(function (d) { return YLine(d.Value) });




        var xAxis = d3.svg.axis()
            .scale(x0)
            .orient("bottom");

        var yAxis = d3.svg.axis()
            .scale(y)
            .orient("left")
            .tickFormat(d3.format(".2s"));

        var YLeftAxis = d3.svg.axis().scale(YLine).orient("right").tickFormat(d3.format(".2s"));

        var svg = d3.select("#dd03").append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
          .append("g")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");





        // Bar Data categories
        Data.forEach(function (d) {
            d.Categories.forEach(function (b) {
                if (Categories.findIndex(function (c) { return c.Name===b.Name}) == -1) {
                    b.Type = "bar";
                    console.log(JSON.stringify(b))
                    Categories.push(b)
                }
            })
        });


        // Line Data categories
        Data.forEach(function (d) {
            d.LineCategory.forEach(function (b) {
                if (Categories.findIndex(function (c) { return c.Name === b.Name }) == -1) {
                    b.Type = "line";
                    console.log(JSON.stringify(b))
                    Categories.push(b)
                }
            })
        });

        // Processing Line data
        lineData = DataSegregator(Data.map(function (d) { return d.LineCategory }), "Name");

        // Line Coloring
        LineColor = d3.scale.ordinal();
        LineColor.domain(Categories.filter(function (d) { return d.Type == "line" }).map(function (d) { return d.Name }));
        LineColor.range(["#d40606", "#06bf00", "#98bdc5", "#671919", "#0b172b"])
        x0.domain(Data.map(function (d) { return d.Date; }));
        XLine.domain(Data.map(function (d) { return d.Date; }));
        x1.domain(Categories.filter(function (d) { return d.Type == "bar" }).map(function (d) { return d.Name})).rangeRoundBands([0, x0.rangeBand()]);
        y.domain([0, maxds]);

        svg.append("g")
            .attr("class", "x axis")
            .attr("transform", "translate(0," + height + ")")
            .call(xAxis);

        /*svg.append("g")
           .attr("class", "y axis")
            .attr("transform", "translate(" + (width) + ",0)")
           .call(YLeftAxis)

         .append("text")
           .attr("transform", "rotate(-90)")
           .attr("y", -10)

           .attr("dy", ".71em")
           .style("text-anchor", "end")
           .text("Percent");*/

        svg.append("g")
            .attr("class", "y axis")
            .call(yAxis)
          .append("text")
            .attr("transform", "rotate(-90)")
            .attr("y", 6)
            .attr("dy", ".71em")
            .style("text-anchor", "end")
            .text("Value");


        var state = svg.selectAll(".state")
            .data(Data)
          .enter().append("g")
            .attr("class", "state")
            .attr("transform", function (d) { return "translate(" + x0(d.Date) + ",0)"; });

        state.selectAll("rect")
            .data(function (d) { return d.Categories; })
          .enter().append("rect")
            .attr("width", x1.rangeBand())
            .attr("x", function (d) { return x1(d.Name); })
            .attr("y", function (d) { return y(d.Value); })
            //.attr("height", function (d) { return height - y(d.Value); })
            .style("fill", function (d) { return color(d.gg); })
            .transition().delay(500).attrTween("height", function (d) {
                var i = d3.interpolate(0, height - y(d.Value));
                return function (t)
                {
                    return i(t);
                }
            });

        // drawaing lines
        svg.selectAll(".lines").data(lineData).enter().append("g").attr("class", "line")
        .each(function (d) {
            Name=d[0].Name
            d3.select(this).append("path").attr("d", function (b) { return line(b) }).style({ "stroke-width": "6px", "fill": "none" }).style("stroke", LineColor(Name)).style("stroke-linecap", "round").transition().duration(1500);
        })

    
        // Legends

        var LegendHolder = svg.append("g").attr("class", "legendHolder");
        var legend = LegendHolder.selectAll(".legend")
            .data(Categories.map(function (d) { return {"Name":d.Name,"Type":d.Type}}))
          .enter().append("g")
            .attr("class", "legend")
            .attr("transform", function (d, i) { return "translate(0," +( height+ margin.bottom/2 )+ ")"; })
            .each(function (d,i) {
                //  Legend Symbols

/*
                d3.select(this).append("rect")
                .attr("width", function () { return 18 })
                .attr("x", function (b) {

                    left = (i+1) * 15 + i * 18 + i * 5 + textWidthHolder;
                    return left;
                })
                 .attr("y", function (b) { return b.Type == 'bar'?0:7})
                .attr("height", function (b) { return b.Type== 'bar'? 18:5 })
                .style("fill", function (b) { return b.Type == 'bar' ? color(d.Name) : LineColor(d.Name) });
*/
                //  Legend Text
/*
                d3.select(this).append("text")
                .attr("x", function (b) {

                    left = (i+1) * 15 + (i+1) * 18 + (i + 1) * 5 + textWidthHolder;

                    return left;
                })
                .attr("y", 9)
                .attr("dy", ".35em")
                .style("text-anchor", "start")
                .text(d.Name);

                textWidthHolder += getTextWidth(d.Name, "10px", "calibri");*/
            });


        // Legend Placing

        d3.select(".legendHolder").attr("transform", function (d) {
            thisWidth = d3.select(this).node().getBBox().width;
            return "translate(" + ((width) / 2 - thisWidth / 2) + ",0)";
        })


        svg.append('image')
          .attr('xlink:href', 'https://raw.githubusercontent.com/ssissouf/ha/master/merauxnonc.bmp')
           .attr('width', 260)
           .attr('height', 150)
           .attr("x",330)
           .attr("y",100)
//0000


Data = [
{ Date: "imports", Categories: [{ Name: "Category1", Value: dataset.v04, gg:"category1" }], LineCategory: [{ Name: "Line1", Value: dataset.v04 }] },
{ Date: "exports", Categories: [{ Name: "Category1", Value: dataset.v14, gg:"category2" }], LineCategory: [{ Name: "Line1", Value: dataset.v14 }] },
       ]

        var margin = { top: 20, right: 30, bottom: 60, left: 40 },
            width = 400 - margin.left - margin.right,
            height = 500 - margin.top - margin.bottom;

        var textWidthHolder = 0;
        /// Adding Date in LineCategory
        Data.forEach(function (d) {
            d.LineCategory.forEach(function (b) {
                b.Date = d.Date;
            })
        });




        var Categories = new Array();
        // Extension method declaration

        Categories.pro

        var Data;
        var ageNames;
        var x0 = d3.scale.ordinal()
            .rangeRoundBands([0, width], .1);
        var XLine = d3.scale.ordinal()
            .rangeRoundPoints([0, width], .1);
        var x1 = d3.scale.ordinal();

        var y = d3.scale.linear()
            .range([height, 0]);

      /*  /*var YLine = d3.scale.linear().range([height, 0])
        .domain([0, d3.max(Data, function (d) { return d3.max(d.LineCategory, function (b) { return b.Value }) })]);*/

        var color = d3.scale.ordinal()
            .range(["#d0743c", "#8a89a6", "#7b6888", "#6b486b", "#a05d56", "#d0743c", "#ff8c00"]);

        var line = d3.svg.line().x(function (d) {
            return x0(d.Date) + x0.rangeBand() / 2;
        }).y(function (d) { return YLine(d.Value) });




        var xAxis = d3.svg.axis()
            .scale(x0)
            .orient("bottom");

        var yAxis = d3.svg.axis()
            .scale(y)
            .orient("left")
            .tickFormat(d3.format(".2s"));

        var YLeftAxis = d3.svg.axis().scale(YLine).orient("right").tickFormat(d3.format(".2s"));

        var svg = d3.select("#dd04").append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
          .append("g")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");





        // Bar Data categories
        Data.forEach(function (d) {
            d.Categories.forEach(function (b) {
                if (Categories.findIndex(function (c) { return c.Name===b.Name}) == -1) {
                    b.Type = "bar";
                    console.log(JSON.stringify(b))
                    Categories.push(b)
                }
            })
        });


        // Line Data categories
        Data.forEach(function (d) {
            d.LineCategory.forEach(function (b) {
                if (Categories.findIndex(function (c) { return c.Name === b.Name }) == -1) {
                    b.Type = "line";
                    console.log(JSON.stringify(b))
                    Categories.push(b)
                }
            })
        });

        // Processing Line data
        lineData = DataSegregator(Data.map(function (d) { return d.LineCategory }), "Name");

        // Line Coloring
        LineColor = d3.scale.ordinal();
        LineColor.domain(Categories.filter(function (d) { return d.Type == "line" }).map(function (d) { return d.Name }));
        LineColor.range(["#d40606", "#06bf00", "#98bdc5", "#671919", "#0b172b"])
        x0.domain(Data.map(function (d) { return d.Date; }));
        XLine.domain(Data.map(function (d) { return d.Date; }));
        x1.domain(Categories.filter(function (d) { return d.Type == "bar" }).map(function (d) { return d.Name})).rangeRoundBands([0, x0.rangeBand()]);
        y.domain([0, maxds]);

        svg.append("g")
            .attr("class", "x axis")
            .attr("transform", "translate(0," + height + ")")
            .call(xAxis);

        /*svg.append("g")
           .attr("class", "y axis")
            .attr("transform", "translate(" + (width) + ",0)")
           .call(YLeftAxis)

         .append("text")
           .attr("transform", "rotate(-90)")
           .attr("y", -10)

           .attr("dy", ".71em")
           .style("text-anchor", "end")
           .text("Percent");*/

        svg.append("g")
            .attr("class", "y axis")
            .call(yAxis)
          .append("text")
            .attr("transform", "rotate(-90)")
            .attr("y", 6)
            .attr("dy", ".71em")
            .style("text-anchor", "end")
            .text("Value");


        var state = svg.selectAll(".state")
            .data(Data)
          .enter().append("g")
            .attr("class", "state")
            .attr("transform", function (d) { return "translate(" + x0(d.Date) + ",0)"; });

        state.selectAll("rect")
            .data(function (d) { return d.Categories; })
          .enter().append("rect")
            .attr("width", x1.rangeBand())
            .attr("x", function (d) { return x1(d.Name); })
            .attr("y", function (d) { return y(d.Value); })
            //.attr("height", function (d) { return height - y(d.Value); })
            .style("fill", function (d) { return color(d.gg); })
            .transition().delay(500).attrTween("height", function (d) {
                var i = d3.interpolate(0, height - y(d.Value));
                return function (t)
                {
                    return i(t);
                }
            });

        // drawaing lines
        svg.selectAll(".lines").data(lineData).enter().append("g").attr("class", "line")
        .each(function (d) {
            Name=d[0].Name
            d3.select(this).append("path").attr("d", function (b) { return line(b) }).style({ "stroke-width": "6px", "fill": "none" }).style("stroke", LineColor(Name)).style("stroke-linecap", "round").transition().duration(1500);
        })

    
        // Legends

        var LegendHolder = svg.append("g").attr("class", "legendHolder");
        var legend = LegendHolder.selectAll(".legend")
            .data(Categories.map(function (d) { return {"Name":d.Name,"Type":d.Type}}))
          .enter().append("g")
            .attr("class", "legend")
            .attr("transform", function (d, i) { return "translate(0," +( height+ margin.bottom/2 )+ ")"; })
            .each(function (d,i) {
                //  Legend Symbols

/*
                d3.select(this).append("rect")
                .attr("width", function () { return 18 })
                .attr("x", function (b) {

                    left = (i+1) * 15 + i * 18 + i * 5 + textWidthHolder;
                    return left;
                })
                 .attr("y", function (b) { return b.Type == 'bar'?0:7})
                .attr("height", function (b) { return b.Type== 'bar'? 18:5 })
                .style("fill", function (b) { return b.Type == 'bar' ? color(d.Name) : LineColor(d.Name) });
*/
                //  Legend Text
/*
                d3.select(this).append("text")
                .attr("x", function (b) {

                    left = (i+1) * 15 + (i+1) * 18 + (i + 1) * 5 + textWidthHolder;

                    return left;
                })
                .attr("y", 9)
                .attr("dy", ".35em")
                .style("text-anchor", "start")
                .text(d.Name);

                textWidthHolder += getTextWidth(d.Name, "10px", "calibri");*/
            });


        // Legend Placing

        d3.select(".legendHolder").attr("transform", function (d) {
            thisWidth = d3.select(this).node().getBBox().width;
            return "translate(" + ((width) / 2 - thisWidth / 2) + ",0)";
        })

        svg.append('image')
          .attr('xlink:href', 'https://raw.githubusercontent.com/ssissouf/ha/master/mineral%20fuels%20etc.bmp')
           .attr('width', 260)
           .attr('height', 150)
           .attr("x",330)
           .attr("y",100)


//0000


Data = [
{ Date: "imports", Categories: [{ Name: "Category1", Value: dataset.v05, gg:"category1" }], LineCategory: [{ Name: "Line1", Value: dataset.v05 }] },
{ Date: "exports", Categories: [{ Name: "Category1", Value: dataset.v15, gg:"category2" }], LineCategory: [{ Name: "Line1", Value: dataset.v15 }] },
       ]

        var margin = { top: 20, right: 30, bottom: 60, left: 40 },
            width = 400 - margin.left - margin.right,
            height = 500 - margin.top - margin.bottom;

        var textWidthHolder = 0;
        /// Adding Date in LineCategory
        Data.forEach(function (d) {
            d.LineCategory.forEach(function (b) {
                b.Date = d.Date;
            })
        });




        var Categories = new Array();
        // Extension method declaration

        Categories.pro

        var Data;
        var ageNames;
        var x0 = d3.scale.ordinal()
            .rangeRoundBands([0, width], .1);
        var XLine = d3.scale.ordinal()
            .rangeRoundPoints([0, width], .1);
        var x1 = d3.scale.ordinal();

        var y = d3.scale.linear()
            .range([height, 0]);

        /*/*var YLine = d3.scale.linear().range([height, 0])
        .domain([0, d3.max(Data, function (d) { return d3.max(d.LineCategory, function (b) { return b.Value }) })]);*/

        var color = d3.scale.ordinal()
            .range(["#d0743c", "#8a89a6", "#7b6888", "#6b486b", "#a05d56", "#d0743c", "#ff8c00"]);

        var line = d3.svg.line().x(function (d) {
            return x0(d.Date) + x0.rangeBand() / 2;
        }).y(function (d) { return YLine(d.Value) });




        var xAxis = d3.svg.axis()
            .scale(x0)
            .orient("bottom");

        var yAxis = d3.svg.axis()
            .scale(y)
            .orient("left")
            .tickFormat(d3.format(".2s"));

        var YLeftAxis = d3.svg.axis().scale(YLine).orient("right").tickFormat(d3.format(".2s"));

        var svg = d3.select("#dd05").append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
          .append("g")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");





        // Bar Data categories
        Data.forEach(function (d) {
            d.Categories.forEach(function (b) {
                if (Categories.findIndex(function (c) { return c.Name===b.Name}) == -1) {
                    b.Type = "bar";
                    console.log(JSON.stringify(b))
                    Categories.push(b)
                }
            })
        });


        // Line Data categories
        Data.forEach(function (d) {
            d.LineCategory.forEach(function (b) {
                if (Categories.findIndex(function (c) { return c.Name === b.Name }) == -1) {
                    b.Type = "line";
                    console.log(JSON.stringify(b))
                    Categories.push(b)
                }
            })
        });

        // Processing Line data
        lineData = DataSegregator(Data.map(function (d) { return d.LineCategory }), "Name");

        // Line Coloring
        LineColor = d3.scale.ordinal();
        LineColor.domain(Categories.filter(function (d) { return d.Type == "line" }).map(function (d) { return d.Name }));
        LineColor.range(["#d40606", "#06bf00", "#98bdc5", "#671919", "#0b172b"])
        x0.domain(Data.map(function (d) { return d.Date; }));
        XLine.domain(Data.map(function (d) { return d.Date; }));
        x1.domain(Categories.filter(function (d) { return d.Type == "bar" }).map(function (d) { return d.Name})).rangeRoundBands([0, x0.rangeBand()]);
        y.domain([0, maxds]);

        svg.append("g")
            .attr("class", "x axis")
            .attr("transform", "translate(0," + height + ")")
            .call(xAxis);

        /*svg.append("g")
           .attr("class", "y axis")
            .attr("transform", "translate(" + (width) + ",0)")
           .call(YLeftAxis)

         .append("text")
           .attr("transform", "rotate(-90)")
           .attr("y", -10)

           .attr("dy", ".71em")
           .style("text-anchor", "end")
           .text("Percent");*/

        svg.append("g")
            .attr("class", "y axis")
            .call(yAxis)
          .append("text")
            .attr("transform", "rotate(-90)")
            .attr("y", 6)
            .attr("dy", ".71em")
            .style("text-anchor", "end")
            .text("Value");


        var state = svg.selectAll(".state")
            .data(Data)
          .enter().append("g")
            .attr("class", "state")
            .attr("transform", function (d) { return "translate(" + x0(d.Date) + ",0)"; });

        state.selectAll("rect")
            .data(function (d) { return d.Categories; })
          .enter().append("rect")
            .attr("width", x1.rangeBand())
            .attr("x", function (d) { return x1(d.Name); })
            .attr("y", function (d) { return y(d.Value); })
            //.attr("height", function (d) { return height - y(d.Value); })
            .style("fill", function (d) { return color(d.gg); })
            .transition().delay(500).attrTween("height", function (d) {
                var i = d3.interpolate(0, height - y(d.Value));
                return function (t)
                {
                    return i(t);
                }
            });

        // drawaing lines
        svg.selectAll(".lines").data(lineData).enter().append("g").attr("class", "line")
        .each(function (d) {
            Name=d[0].Name
            d3.select(this).append("path").attr("d", function (b) { return line(b) }).style({ "stroke-width": "6px", "fill": "none" }).style("stroke", LineColor(Name)).style("stroke-linecap", "round").transition().duration(1500);
        })

    
        // Legends

        var LegendHolder = svg.append("g").attr("class", "legendHolder");
        var legend = LegendHolder.selectAll(".legend")
            .data(Categories.map(function (d) { return {"Name":d.Name,"Type":d.Type}}))
          .enter().append("g")
            .attr("class", "legend")
            .attr("transform", function (d, i) { return "translate(0," +( height+ margin.bottom/2 )+ ")"; })
            .each(function (d,i) {
                //  Legend Symbols

/*
                d3.select(this).append("rect")
                .attr("width", function () { return 18 })
                .attr("x", function (b) {

                    left = (i+1) * 15 + i * 18 + i * 5 + textWidthHolder;
                    return left;
                })
                 .attr("y", function (b) { return b.Type == 'bar'?0:7})
                .attr("height", function (b) { return b.Type== 'bar'? 18:5 })
                .style("fill", function (b) { return b.Type == 'bar' ? color(d.Name) : LineColor(d.Name) });
*/
                //  Legend Text
/*
                d3.select(this).append("text")
                .attr("x", function (b) {

                    left = (i+1) * 15 + (i+1) * 18 + (i + 1) * 5 + textWidthHolder;

                    return left;
                })
                .attr("y", 9)
                .attr("dy", ".35em")
                .style("text-anchor", "start")
                .text(d.Name);

                textWidthHolder += getTextWidth(d.Name, "10px", "calibri");*/
            });


        // Legend Placing

        d3.select(".legendHolder").attr("transform", function (d) {
            thisWidth = d3.select(this).node().getBBox().width;
            return "translate(" + ((width) / 2 - thisWidth / 2) + ",0)";
        })


        svg.append('image')
          .attr('xlink:href', 'https://raw.githubusercontent.com/ssissouf/ha/master/butter.bmp')
           .attr('width', 260)
           .attr('height', 150)
           .attr("x",330)
           .attr("y",100)


		   

//0000


Data = [
{ Date: "imports", Categories: [{ Name: "Category1", Value: dataset.v06, gg:"category1" }], LineCategory: [{ Name: "Line1", Value: dataset.v06 }] },
{ Date: "exports", Categories: [{ Name: "Category1", Value: dataset.v16, gg:"category2" }], LineCategory: [{ Name: "Line1", Value: dataset.v16 }] },
       ]

        var margin = { top: 20, right: 30, bottom: 60, left: 40 },
            width = 400 - margin.left - margin.right,
            height = 500 - margin.top - margin.bottom;

        var textWidthHolder = 0;
        /// Adding Date in LineCategory
        Data.forEach(function (d) {
            d.LineCategory.forEach(function (b) {
                b.Date = d.Date;
            })
        });




        var Categories = new Array();
        // Extension method declaration

        Categories.pro

        var Data;
        var ageNames;
        var x0 = d3.scale.ordinal()
            .rangeRoundBands([0, width], .1);
        var XLine = d3.scale.ordinal()
            .rangeRoundPoints([0, width], .1);
        var x1 = d3.scale.ordinal();

        var y = d3.scale.linear()
            .range([height, 0]);

        /*/*var YLine = d3.scale.linear().range([height, 0])
        .domain([0, d3.max(Data, function (d) { return d3.max(d.LineCategory, function (b) { return b.Value }) })]);*/

        var color = d3.scale.ordinal()
            .range(["#d0743c", "#8a89a6", "#7b6888", "#6b486b", "#a05d56", "#d0743c", "#ff8c00"]);

        var line = d3.svg.line().x(function (d) {
            return x0(d.Date) + x0.rangeBand() / 2;
        }).y(function (d) { return YLine(d.Value) });




        var xAxis = d3.svg.axis()
            .scale(x0)
            .orient("bottom");

        var yAxis = d3.svg.axis()
            .scale(y)
            .orient("left")
            .tickFormat(d3.format(".2s"));

        var YLeftAxis = d3.svg.axis().scale(YLine).orient("right").tickFormat(d3.format(".2s"));

        var svg = d3.select("#dd21").append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
          .append("g")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");





        // Bar Data categories
        Data.forEach(function (d) {
            d.Categories.forEach(function (b) {
                if (Categories.findIndex(function (c) { return c.Name===b.Name}) == -1) {
                    b.Type = "bar";
                    console.log(JSON.stringify(b))
                    Categories.push(b)
                }
            })
        });


        // Line Data categories
        Data.forEach(function (d) {
            d.LineCategory.forEach(function (b) {
                if (Categories.findIndex(function (c) { return c.Name === b.Name }) == -1) {
                    b.Type = "line";
                    console.log(JSON.stringify(b))
                    Categories.push(b)
                }
            })
        });

        // Processing Line data
        lineData = DataSegregator(Data.map(function (d) { return d.LineCategory }), "Name");

        // Line Coloring
        LineColor = d3.scale.ordinal();
        LineColor.domain(Categories.filter(function (d) { return d.Type == "line" }).map(function (d) { return d.Name }));
        LineColor.range(["#d40606", "#06bf00", "#98bdc5", "#671919", "#0b172b"])
        x0.domain(Data.map(function (d) { return d.Date; }));
        XLine.domain(Data.map(function (d) { return d.Date; }));
        x1.domain(Categories.filter(function (d) { return d.Type == "bar" }).map(function (d) { return d.Name})).rangeRoundBands([0, x0.rangeBand()]);
        y.domain([0, maxds]);

        svg.append("g")
            .attr("class", "x axis")
            .attr("transform", "translate(0," + height + ")")
            .call(xAxis);

        /*svg.append("g")
           .attr("class", "y axis")
            .attr("transform", "translate(" + (width) + ",0)")
           .call(YLeftAxis)

         .append("text")
           .attr("transform", "rotate(-90)")
           .attr("y", -10)

           .attr("dy", ".71em")
           .style("text-anchor", "end")
           .text("Percent");*/

        svg.append("g")
            .attr("class", "y axis")
            .call(yAxis)
          .append("text")
            .attr("transform", "rotate(-90)")
            .attr("y", 6)
            .attr("dy", ".71em")
            .style("text-anchor", "end")
            .text("Value");


        var state = svg.selectAll(".state")
            .data(Data)
          .enter().append("g")
            .attr("class", "state")
            .attr("transform", function (d) { return "translate(" + x0(d.Date) + ",0)"; });

        state.selectAll("rect")
            .data(function (d) { return d.Categories; })
          .enter().append("rect")
            .attr("width", x1.rangeBand())
            .attr("x", function (d) { return x1(d.Name); })
            .attr("y", function (d) { return y(d.Value); })
            //.attr("height", function (d) { return height - y(d.Value); })
            .style("fill", function (d) { return color(d.gg); })
            .transition().delay(500).attrTween("height", function (d) {
                var i = d3.interpolate(0, height - y(d.Value));
                return function (t)
                {
                    return i(t);
                }
            });

        // drawaing lines
        svg.selectAll(".lines").data(lineData).enter().append("g").attr("class", "line")
        .each(function (d) {
            Name=d[0].Name
            d3.select(this).append("path").attr("d", function (b) { return line(b) }).style({ "stroke-width": "6px", "fill": "none" }).style("stroke", LineColor(Name)).style("stroke-linecap", "round").transition().duration(1500);
        })

    
        // Legends

        var LegendHolder = svg.append("g").attr("class", "legendHolder");
        var legend = LegendHolder.selectAll(".legend")
            .data(Categories.map(function (d) { return {"Name":d.Name,"Type":d.Type}}))
          .enter().append("g")
            .attr("class", "legend")
            .attr("transform", function (d, i) { return "translate(0," +( height+ margin.bottom/2 )+ ")"; })
            .each(function (d,i) {
                //  Legend Symbols

/*
                d3.select(this).append("rect")
                .attr("width", function () { return 18 })
                .attr("x", function (b) {

                    left = (i+1) * 15 + i * 18 + i * 5 + textWidthHolder;
                    return left;
                })
                 .attr("y", function (b) { return b.Type == 'bar'?0:7})
                .attr("height", function (b) { return b.Type== 'bar'? 18:5 })
                .style("fill", function (b) { return b.Type == 'bar' ? color(d.Name) : LineColor(d.Name) });
*/
                //  Legend Text
/*
                d3.select(this).append("text")
                .attr("x", function (b) {

                    left = (i+1) * 15 + (i+1) * 18 + (i + 1) * 5 + textWidthHolder;

                    return left;
                })
                .attr("y", 9)
                .attr("dy", ".35em")
                .style("text-anchor", "start")
                .text(d.Name);

                textWidthHolder += getTextWidth(d.Name, "10px", "calibri");*/
            });


        // Legend Placing

        d3.select(".legendHolder").attr("transform", function (d) {
            thisWidth = d3.select(this).node().getBBox().width;
            return "translate(" + ((width) / 2 - thisWidth / 2) + ",0)";
        })

        svg.append('image')
          .attr('xlink:href', 'https://raw.githubusercontent.com/ssissouf/ha/master/chemistry.bmp')
           .attr('width', 260)
           .attr('height', 150)
           .attr("x",330)
           .attr("y",100)

//0000


Data = [
{ Date: "imports", Categories: [{ Name: "Category1", Value: dataset.v07, gg:"category1" }], LineCategory: [{ Name: "Line1", Value: dataset.v07 }] },
{ Date: "exports", Categories: [{ Name: "Category1", Value: dataset.v17, gg:"category2" }], LineCategory: [{ Name: "Line1", Value: dataset.v17 }] },
       ]

        var margin = { top: 20, right: 30, bottom: 60, left: 40 },
            width = 400 - margin.left - margin.right,
            height = 500 - margin.top - margin.bottom;

        var textWidthHolder = 0;
        /// Adding Date in LineCategory
        Data.forEach(function (d) {
            d.LineCategory.forEach(function (b) {
                b.Date = d.Date;
            })
        });




        var Categories = new Array();
        // Extension method declaration

        Categories.pro

        var Data;
        var ageNames;
        var x0 = d3.scale.ordinal()
            .rangeRoundBands([0, width], .1);
        var XLine = d3.scale.ordinal()
            .rangeRoundPoints([0, width], .1);
        var x1 = d3.scale.ordinal();

        var y = d3.scale.linear()
            .range([height, 0]);

        /*var YLine = d3.scale.linear().range([height, 0])
        .domain([0, d3.max(Data, function (d) { return d3.max(d.LineCategory, function (b) { return b.Value }) })]);*/

        var color = d3.scale.ordinal()
            .range(["#d0743c", "#8a89a6", "#7b6888", "#6b486b", "#a05d56", "#d0743c", "#ff8c00"]);

        var line = d3.svg.line().x(function (d) {
            return x0(d.Date) + x0.rangeBand() / 2;
        }).y(function (d) { return YLine(d.Value) });




        var xAxis = d3.svg.axis()
            .scale(x0)
            .orient("bottom");

        var yAxis = d3.svg.axis()
            .scale(y)
            .orient("left")
            .tickFormat(d3.format(".2s"));

        var YLeftAxis = d3.svg.axis().scale(YLine).orient("right").tickFormat(d3.format(".2s"));

        var svg = d3.select("#dd22").append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
          .append("g")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");





        // Bar Data categories
        Data.forEach(function (d) {
            d.Categories.forEach(function (b) {
                if (Categories.findIndex(function (c) { return c.Name===b.Name}) == -1) {
                    b.Type = "bar";
                    console.log(JSON.stringify(b))
                    Categories.push(b)
                }
            })
        });


        // Line Data categories
        Data.forEach(function (d) {
            d.LineCategory.forEach(function (b) {
                if (Categories.findIndex(function (c) { return c.Name === b.Name }) == -1) {
                    b.Type = "line";
                    console.log(JSON.stringify(b))
                    Categories.push(b)
                }
            })
        });

        // Processing Line data
        lineData = DataSegregator(Data.map(function (d) { return d.LineCategory }), "Name");

        // Line Coloring
        LineColor = d3.scale.ordinal();
        LineColor.domain(Categories.filter(function (d) { return d.Type == "line" }).map(function (d) { return d.Name }));
        LineColor.range(["#d40606", "#06bf00", "#98bdc5", "#671919", "#0b172b"])
        x0.domain(Data.map(function (d) { return d.Date; }));
        XLine.domain(Data.map(function (d) { return d.Date; }));
        x1.domain(Categories.filter(function (d) { return d.Type == "bar" }).map(function (d) { return d.Name})).rangeRoundBands([0, x0.rangeBand()]);
        y.domain([0, maxds]);

        svg.append("g")
            .attr("class", "x axis")
            .attr("transform", "translate(0," + height + ")")
            .call(xAxis);

        /*svg.append("g")
           .attr("class", "y axis")
            .attr("transform", "translate(" + (width) + ",0)")
           .call(YLeftAxis)

         .append("text")
           .attr("transform", "rotate(-90)")
           .attr("y", -10)

           .attr("dy", ".71em")
           .style("text-anchor", "end")
           .text("Percent");*/

        svg.append("g")
            .attr("class", "y axis")
            .call(yAxis)
          .append("text")
            .attr("transform", "rotate(-90)")
            .attr("y", 6)
            .attr("dy", ".71em")
            .style("text-anchor", "end")
            .text("Value");


        var state = svg.selectAll(".state")
            .data(Data)
          .enter().append("g")
            .attr("class", "state")
            .attr("transform", function (d) { return "translate(" + x0(d.Date) + ",0)"; });

        state.selectAll("rect")
            .data(function (d) { return d.Categories; })
          .enter().append("rect")
            .attr("width", x1.rangeBand())
            .attr("x", function (d) { return x1(d.Name); })
            .attr("y", function (d) { return y(d.Value); })
            //.attr("height", function (d) { return height - y(d.Value); })
            .style("fill", function (d) { return color(d.gg); })
            .transition().delay(500).attrTween("height", function (d) {
                var i = d3.interpolate(0, height - y(d.Value));
                return function (t)
                {
                    return i(t);
                }
            });

        // drawaing lines
        svg.selectAll(".lines").data(lineData).enter().append("g").attr("class", "line")
        .each(function (d) {
            Name=d[0].Name
            d3.select(this).append("path").attr("d", function (b) { return line(b) }).style({ "stroke-width": "6px", "fill": "none" }).style("stroke", LineColor(Name)).style("stroke-linecap", "round").transition().duration(1500);
        })

    
        // Legends

        var LegendHolder = svg.append("g").attr("class", "legendHolder");
        var legend = LegendHolder.selectAll(".legend")
            .data(Categories.map(function (d) { return {"Name":d.Name,"Type":d.Type}}))
          .enter().append("g")
            .attr("class", "legend")
            .attr("transform", function (d, i) { return "translate(0," +( height+ margin.bottom/2 )+ ")"; })
            .each(function (d,i) {
                //  Legend Symbols

/*
                d3.select(this).append("rect")
                .attr("width", function () { return 18 })
                .attr("x", function (b) {

                    left = (i+1) * 15 + i * 18 + i * 5 + textWidthHolder;
                    return left;
                })
                 .attr("y", function (b) { return b.Type == 'bar'?0:7})
                .attr("height", function (b) { return b.Type== 'bar'? 18:5 })
                .style("fill", function (b) { return b.Type == 'bar' ? color(d.Name) : LineColor(d.Name) });
*/
                //  Legend Text
/*
                d3.select(this).append("text")
                .attr("x", function (b) {

                    left = (i+1) * 15 + (i+1) * 18 + (i + 1) * 5 + textWidthHolder;

                    return left;
                })
                .attr("y", 9)
                .attr("dy", ".35em")
                .style("text-anchor", "start")
                .text(d.Name);

                textWidthHolder += getTextWidth(d.Name, "10px", "calibri");*/
            });


        // Legend Placing

        d3.select(".legendHolder").attr("transform", function (d) {
            thisWidth = d3.select(this).node().getBBox().width;
            return "translate(" + ((width) / 2 - thisWidth / 2) + ",0)";
        })

        svg.append('image')
          .attr('xlink:href', 'https://raw.githubusercontent.com/ssissouf/ha/master/clothes.bmp')
           .attr('width', 260)
           .attr('height', 150)
           .attr("x",330)
           .attr("y",100)


		   

//0000


Data = [
{ Date: "imports", Categories: [{ Name: "Category1", Value: dataset.v08, gg:"category1" }], LineCategory: [{ Name: "Line1", Value: dataset.v08 }] },
{ Date: "exports", Categories: [{ Name: "Category1", Value: dataset.v18, gg:"category2" }], LineCategory: [{ Name: "Line1", Value: dataset.v18 }] },
       ]

        var margin = { top: 20, right: 30, bottom: 60, left: 40 },
            width = 400 - margin.left - margin.right,
            height = 500 - margin.top - margin.bottom;

        var textWidthHolder = 0;
        /// Adding Date in LineCategory
        Data.forEach(function (d) {
            d.LineCategory.forEach(function (b) {
                b.Date = d.Date;
            })
        });




        var Categories = new Array();
        // Extension method declaration

        Categories.pro

        var Data;
        var ageNames;
        var x0 = d3.scale.ordinal()
            .rangeRoundBands([0, width], .1);
        var XLine = d3.scale.ordinal()
            .rangeRoundPoints([0, width], .1);
        var x1 = d3.scale.ordinal();

        var y = d3.scale.linear()
            .range([height, 0]);

        /*var YLine = d3.scale.linear().range([height, 0])
        .domain([0, d3.max(Data, function (d) { return d3.max(d.LineCategory, function (b) { return b.Value }) })]);*/

        var color = d3.scale.ordinal()
            .range(["#d0743c", "#8a89a6", "#7b6888", "#6b486b", "#a05d56", "#d0743c", "#ff8c00"]);

        var line = d3.svg.line().x(function (d) {
            return x0(d.Date) + x0.rangeBand() / 2;
        }).y(function (d) { return YLine(d.Value) });




        var xAxis = d3.svg.axis()
            .scale(x0)
            .orient("bottom");

        var yAxis = d3.svg.axis()
            .scale(y)
            .orient("left")
            .tickFormat(d3.format(".2s"));

        var YLeftAxis = d3.svg.axis().scale(YLine).orient("right").tickFormat(d3.format(".2s"));

        var svg = d3.select("#dd23").append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
          .append("g")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");





        // Bar Data categories
        Data.forEach(function (d) {
            d.Categories.forEach(function (b) {
                if (Categories.findIndex(function (c) { return c.Name===b.Name}) == -1) {
                    b.Type = "bar";
                    console.log(JSON.stringify(b))
                    Categories.push(b)
                }
            })
        });


        // Line Data categories
        Data.forEach(function (d) {
            d.LineCategory.forEach(function (b) {
                if (Categories.findIndex(function (c) { return c.Name === b.Name }) == -1) {
                    b.Type = "line";
                    console.log(JSON.stringify(b))
                    Categories.push(b)
                }
            })
        });

        // Processing Line data
        lineData = DataSegregator(Data.map(function (d) { return d.LineCategory }), "Name");

        // Line Coloring
        LineColor = d3.scale.ordinal();
        LineColor.domain(Categories.filter(function (d) { return d.Type == "line" }).map(function (d) { return d.Name }));
        LineColor.range(["#d40606", "#06bf00", "#98bdc5", "#671919", "#0b172b"])
        x0.domain(Data.map(function (d) { return d.Date; }));
        XLine.domain(Data.map(function (d) { return d.Date; }));
        x1.domain(Categories.filter(function (d) { return d.Type == "bar" }).map(function (d) { return d.Name})).rangeRoundBands([0, x0.rangeBand()]);
        y.domain([0, maxds]);

        svg.append("g")
            .attr("class", "x axis")
            .attr("transform", "translate(0," + height + ")")
            .call(xAxis);

        /*svg.append("g")
           .attr("class", "y axis")
            .attr("transform", "translate(" + (width) + ",0)")
           .call(YLeftAxis)

         .append("text")
           .attr("transform", "rotate(-90)")
           .attr("y", -10)

           .attr("dy", ".71em")
           .style("text-anchor", "end")
           .text("Percent");*/

        svg.append("g")
            .attr("class", "y axis")
            .call(yAxis)
          .append("text")
            .attr("transform", "rotate(-90)")
            .attr("y", 6)
            .attr("dy", ".71em")
            .style("text-anchor", "end")
            .text("Value");


        var state = svg.selectAll(".state")
            .data(Data)
          .enter().append("g")
            .attr("class", "state")
            .attr("transform", function (d) { return "translate(" + x0(d.Date) + ",0)"; });

        state.selectAll("rect")
            .data(function (d) { return d.Categories; })
          .enter().append("rect")
            .attr("width", x1.rangeBand())
            .attr("x", function (d) { return x1(d.Name); })
            .attr("y", function (d) { return y(d.Value); })
            //.attr("height", function (d) { return height - y(d.Value); })
            .style("fill", function (d) { return color(d.gg); })
            .transition().delay(500).attrTween("height", function (d) {
                var i = d3.interpolate(0, height - y(d.Value));
                return function (t)
                {
                    return i(t);
                }
            });

        // drawaing lines
        svg.selectAll(".lines").data(lineData).enter().append("g").attr("class", "line")
        .each(function (d) {
            Name=d[0].Name
            d3.select(this).append("path").attr("d", function (b) { return line(b) }).style({ "stroke-width": "6px", "fill": "none" }).style("stroke", LineColor(Name)).style("stroke-linecap", "round").transition().duration(1500);
        })

    
        // Legends

        var LegendHolder = svg.append("g").attr("class", "legendHolder");
        var legend = LegendHolder.selectAll(".legend")
            .data(Categories.map(function (d) { return {"Name":d.Name,"Type":d.Type}}))
          .enter().append("g")
            .attr("class", "legend")
            .attr("transform", function (d, i) { return "translate(0," +( height+ margin.bottom/2 )+ ")"; })
            .each(function (d,i) {
                //  Legend Symbols

/*
                d3.select(this).append("rect")
                .attr("width", function () { return 18 })
                .attr("x", function (b) {

                    left = (i+1) * 15 + i * 18 + i * 5 + textWidthHolder;
                    return left;
                })
                 .attr("y", function (b) { return b.Type == 'bar'?0:7})
                .attr("height", function (b) { return b.Type== 'bar'? 18:5 })
                .style("fill", function (b) { return b.Type == 'bar' ? color(d.Name) : LineColor(d.Name) });
*/
                //  Legend Text
/*
                d3.select(this).append("text")
                .attr("x", function (b) {

                    left = (i+1) * 15 + (i+1) * 18 + (i + 1) * 5 + textWidthHolder;

                    return left;
                })
                .attr("y", 9)
                .attr("dy", ".35em")
                .style("text-anchor", "start")
                .text(d.Name);

                textWidthHolder += getTextWidth(d.Name, "10px", "calibri");*/
            });


        // Legend Placing

        d3.select(".legendHolder").attr("transform", function (d) {
            thisWidth = d3.select(this).node().getBBox().width;
            return "translate(" + ((width) / 2 - thisWidth / 2) + ",0)";
        })

        svg.append('image')
          .attr('xlink:href', 'https://raw.githubusercontent.com/ssissouf/ha/master/bus.bmp')
           .attr('width', 260)
           .attr('height', 150)
           .attr("x",330)
           .attr("y",100)

		   		   		  
//0000


Data = [
{ Date: "imports", Categories: [{ Name: "Category1", Value: dataset.v09, gg:"category1" }], LineCategory: [{ Name: "Line1", Value: dataset.v09 }] },
{ Date: "exports", Categories: [{ Name: "Category1", Value: dataset.v19, gg:"category2" }], LineCategory: [{ Name: "Line1", Value: dataset.v19 }] },
       ]

        var margin = { top: 20, right: 30, bottom: 60, left: 40 },
            width = 400 - margin.left - margin.right,
            height = 500 - margin.top - margin.bottom;

        var textWidthHolder = 0;
        /// Adding Date in LineCategory
        Data.forEach(function (d) {
            d.LineCategory.forEach(function (b) {
                b.Date = d.Date;
            })
        });




        var Categories = new Array();
        // Extension method declaration

        Categories.pro

        var Data;
        var ageNames;
        var x0 = d3.scale.ordinal()
            .rangeRoundBands([0, width], .1);
        var XLine = d3.scale.ordinal()
            .rangeRoundPoints([0, width], .1);
        var x1 = d3.scale.ordinal();

        var y = d3.scale.linear()
            .range([height, 0]);

        /*var YLine = d3.scale.linear().range([height, 0])
        .domain([0, d3.max(Data, function (d) { return d3.max(d.LineCategory, function (b) { return b.Value }) })]);*/

        var color = d3.scale.ordinal()
            .range(["#d0743c", "#8a89a6", "#7b6888", "#6b486b", "#a05d56", "#d0743c", "#ff8c00"]);

        var line = d3.svg.line().x(function (d) {
            return x0(d.Date) + x0.rangeBand() / 2;
        }).y(function (d) { return YLine(d.Value) });




        var xAxis = d3.svg.axis()
            .scale(x0)
            .orient("bottom");

        var yAxis = d3.svg.axis()
            .scale(y)
            .orient("left")
            .tickFormat(d3.format(".2s"));

        var YLeftAxis = d3.svg.axis().scale(YLine).orient("right").tickFormat(d3.format(".2s"));

        var svg = d3.select("#dd24").append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
          .append("g")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");





        // Bar Data categories
        Data.forEach(function (d) {
            d.Categories.forEach(function (b) {
                if (Categories.findIndex(function (c) { return c.Name===b.Name}) == -1) {
                    b.Type = "bar";
                    console.log(JSON.stringify(b))
                    Categories.push(b)
                }
            })
        });


        // Line Data categories
        Data.forEach(function (d) {
            d.LineCategory.forEach(function (b) {
                if (Categories.findIndex(function (c) { return c.Name === b.Name }) == -1) {
                    b.Type = "line";
                    console.log(JSON.stringify(b))
                    Categories.push(b)
                }
            })
        });

        // Processing Line data
        lineData = DataSegregator(Data.map(function (d) { return d.LineCategory }), "Name");

        // Line Coloring
        LineColor = d3.scale.ordinal();
        LineColor.domain(Categories.filter(function (d) { return d.Type == "line" }).map(function (d) { return d.Name }));
        LineColor.range(["#d40606", "#06bf00", "#98bdc5", "#671919", "#0b172b"])
        x0.domain(Data.map(function (d) { return d.Date; }));
        XLine.domain(Data.map(function (d) { return d.Date; }));
        x1.domain(Categories.filter(function (d) { return d.Type == "bar" }).map(function (d) { return d.Name})).rangeRoundBands([0, x0.rangeBand()]);
        y.domain([0, maxds]);

        svg.append("g")
            .attr("class", "x axis")
            .attr("transform", "translate(0," + height + ")")
            .call(xAxis);

        /*svg.append("g")
           .attr("class", "y axis")
            .attr("transform", "translate(" + (width) + ",0)")
           .call(YLeftAxis)

         .append("text")
           .attr("transform", "rotate(-90)")
           .attr("y", -10)

           .attr("dy", ".71em")
           .style("text-anchor", "end")
           .text("Percent");*/

        svg.append("g")
            .attr("class", "y axis")
            .call(yAxis)
          .append("text")
            .attr("transform", "rotate(-90)")
            .attr("y", 6)
            .attr("dy", ".71em")
            .style("text-anchor", "end")
            .text("Value");


        var state = svg.selectAll(".state")
            .data(Data)
          .enter().append("g")
            .attr("class", "state")
            .attr("transform", function (d) { return "translate(" + x0(d.Date) + ",0)"; });

        state.selectAll("rect")
            .data(function (d) { return d.Categories; })
          .enter().append("rect")
            .attr("width", x1.rangeBand())
            .attr("x", function (d) { return x1(d.Name); })
            .attr("y", function (d) { return y(d.Value); })
            //.attr("height", function (d) { return height - y(d.Value); })
            .style("fill", function (d) { return color(d.gg); })
            .transition().delay(500).attrTween("height", function (d) {
                var i = d3.interpolate(0, height - y(d.Value));
                return function (t)
                {
                    return i(t);
                }
            });

        // drawaing lines
        svg.selectAll(".lines").data(lineData).enter().append("g").attr("class", "line")
        .each(function (d) {
            Name=d[0].Name
            d3.select(this).append("path").attr("d", function (b) { return line(b) }).style({ "stroke-width": "6px", "fill": "none" }).style("stroke", LineColor(Name)).style("stroke-linecap", "round").transition().duration(1500);
        })

    
        // Legends

        var LegendHolder = svg.append("g").attr("class", "legendHolder");
        var legend = LegendHolder.selectAll(".legend")
            .data(Categories.map(function (d) { return {"Name":d.Name,"Type":d.Type}}))
          .enter().append("g")
            .attr("class", "legend")
            .attr("transform", function (d, i) { return "translate(0," +( height+ margin.bottom/2 )+ ")"; })
            .each(function (d,i) {
                //  Legend Symbols

/*
                d3.select(this).append("rect")
                .attr("width", function () { return 18 })
                .attr("x", function (b) {

                    left = (i+1) * 15 + i * 18 + i * 5 + textWidthHolder;
                    return left;
                })
                 .attr("y", function (b) { return b.Type == 'bar'?0:7})
                .attr("height", function (b) { return b.Type== 'bar'? 18:5 })
                .style("fill", function (b) { return b.Type == 'bar' ? color(d.Name) : LineColor(d.Name) });
*/
                //  Legend Text
/*
                d3.select(this).append("text")
                .attr("x", function (b) {

                    left = (i+1) * 15 + (i+1) * 18 + (i + 1) * 5 + textWidthHolder;

                    return left;
                })
                .attr("y", 9)
                .attr("dy", ".35em")
                .style("text-anchor", "start")
                .text(d.Name);

                textWidthHolder += getTextWidth(d.Name, "10px", "calibri");*/
            });


        // Legend Placing

        d3.select(".legendHolder").attr("transform", function (d) {
            thisWidth = d3.select(this).node().getBBox().width;
            return "translate(" + ((width) / 2 - thisWidth / 2) + ",0)";
        })

        svg.append('image')
          .attr('xlink:href', 'https://raw.githubusercontent.com/ssissouf/ha/master/amd.bmp')
           .attr('width', 260)
           .attr('height', 150)
           .attr("x",330)
           .attr("y",100)


//0000


Data = [
{ Date: "imports", Categories: [{ Name: "Category1", Value: dataset.v10, gg:"category1" }], LineCategory: [{ Name: "Line1", Value: dataset.v10 }] },
{ Date: "exports", Categories: [{ Name: "Category1", Value: dataset.v20, gg:"category2" }], LineCategory: [{ Name: "Line1", Value: dataset.v20 }] },
       ]

        var margin = { top: 20, right: 30, bottom: 60, left: 40 },
            width = 400 - margin.left - margin.right,
            height = 500 - margin.top - margin.bottom;

        var textWidthHolder = 0;
        /// Adding Date in LineCategory
        Data.forEach(function (d) {
            d.LineCategory.forEach(function (b) {
                b.Date = d.Date;
            })
        });




        var Categories = new Array();
        // Extension method declaration

        Categories.pro

        var Data;
        var ageNames;
        var x0 = d3.scale.ordinal()
            .rangeRoundBands([0, width], .1);
        var XLine = d3.scale.ordinal()
            .rangeRoundPoints([0, width], .1);
        var x1 = d3.scale.ordinal();

        var y = d3.scale.linear()
            .range([height, 0]);

        /*var YLine = d3.scale.linear().range([height, 0])
        .domain([0, d3.max(Data, function (d) { return d3.max(d.LineCategory, function (b) { return b.Value }) })]);*/

        var color = d3.scale.ordinal()
            .range(["#d0743c", "#8a89a6", "#7b6888", "#6b486b", "#a05d56", "#d0743c", "#ff8c00"]);

        var line = d3.svg.line().x(function (d) {
            return x0(d.Date) + x0.rangeBand() / 2;
        }).y(function (d) { return YLine(d.Value) });




        var xAxis = d3.svg.axis()
            .scale(x0)
            .orient("bottom");

        var yAxis = d3.svg.axis()
            .scale(y)
            .orient("left")
            .tickFormat(d3.format(".2s"));

        var YLeftAxis = d3.svg.axis().scale(YLine).orient("right").tickFormat(d3.format(".2s"));

        var svg = d3.select("#dd25").append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
          .append("g")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

        



        // Bar Data categories
        Data.forEach(function (d) {
            d.Categories.forEach(function (b) {
                if (Categories.findIndex(function (c) { return c.Name===b.Name}) == -1) {
                    b.Type = "bar";
                    console.log(JSON.stringify(b))
                    Categories.push(b)
                }
            })
        });


        // Line Data categories
        Data.forEach(function (d) {
            d.LineCategory.forEach(function (b) {
                if (Categories.findIndex(function (c) { return c.Name === b.Name }) == -1) {
                    b.Type = "line";
                    console.log(JSON.stringify(b))
                    Categories.push(b)
                }
            })
        });

        // Processing Line data
        lineData = DataSegregator(Data.map(function (d) { return d.LineCategory }), "Name");

        // Line Coloring
        LineColor = d3.scale.ordinal();
        LineColor.domain(Categories.filter(function (d) { return d.Type == "line" }).map(function (d) { return d.Name }));
        LineColor.range(["#d40606", "#06bf00", "#98bdc5", "#671919", "#0b172b"])
        x0.domain(Data.map(function (d) { return d.Date; }));
        XLine.domain(Data.map(function (d) { return d.Date; }));
        x1.domain(Categories.filter(function (d) { return d.Type == "bar" }).map(function (d) { return d.Name})).rangeRoundBands([0, x0.rangeBand()]);
        y.domain([0, maxds]);

        svg.append("g")
            .attr("class", "x axis")
            .attr("transform", "translate(0," + height + ")")
            .call(xAxis);

        /*svg.append("g")
           .attr("class", "y axis")
            .attr("transform", "translate(" + (width) + ",0)")
           .call(YLeftAxis)

         .append("text")
           .attr("transform", "rotate(-90)")
           .attr("y", -10)

           .attr("dy", ".71em")
           .style("text-anchor", "end")
           .text("Percent");*/

        svg.append("g")
            .attr("class", "y axis")
            .attr("class", "yaxis")
            .call(yAxis)
          .append("text")
            .attr("transform", "rotate(-90)")
            .attr("y", 6)
            .attr("dy", ".71em")
            .style("text-anchor", "end")
            .text("Value");


        var state = svg.selectAll(".state")
            .data(Data)
          .enter().append("g")
            .attr("class", "state")
            .attr("transform", function (d) { return "translate(" + x0(d.Date) + ",0)"; });

        state.selectAll("rect")
            .data(function (d) { return d.Categories; })
          .enter().append("rect")
            .attr("width", x1.rangeBand())
            .attr("x", function (d) { return x1(d.Name); })
            .attr("y", function (d) { return y(d.Value); })
            //.attr("height", function (d) { return height - y(d.Value); })
            .style("fill", function (d) { return color(d.gg); })
            .transition().delay(500).attrTween("height", function (d) {
                var i = d3.interpolate(0, height - y(d.Value));
                return function (t)
                {
                    return i(t);
                }
            });

        // drawaing lines
        svg.selectAll(".lines").data(lineData).enter().append("g").attr("class", "line")
        .each(function (d) {
            Name=d[0].Name
            d3.select(this).append("path").attr("d", function (b) { return line(b) }).style({ "stroke-width": "6px", "fill": "none" }).style("stroke", LineColor(Name)).style("stroke-linecap", "round").transition().duration(1500);
        })

    
        // Legends

        var LegendHolder = svg.append("g").attr("class", "legendHolder");
        var legend = LegendHolder.selectAll(".legend")
            .data(Categories.map(function (d) { return {"Name":d.Name,"Type":d.Type}}))
          .enter().append("g")
            .attr("class", "legend")
            .attr("transform", function (d, i) { return "translate(0," +( height+ margin.bottom/2 )+ ")"; })
            .each(function (d,i) {
                //  Legend Symbols

/*
                d3.select(this).append("rect")
                .attr("width", function () { return 18 })
                .attr("x", function (b) {

                    left = (i+1) * 15 + i * 18 + i * 5 + textWidthHolder;
                    return left;
                })
                 .attr("y", function (b) { return b.Type == 'bar'?0:7})
                .attr("height", function (b) { return b.Type== 'bar'? 18:5 })
                .style("fill", function (b) { return b.Type == 'bar' ? color(d.Name) : LineColor(d.Name) });
*/
                //  Legend Text
/*
                d3.select(this).append("text")
                .attr("x", function (b) {

                    left = (i+1) * 15 + (i+1) * 18 + (i + 1) * 5 + textWidthHolder;

                    return left;
                })
                .attr("y", 9)
                .attr("dy", ".35em")
                .style("text-anchor", "start")
                .text(d.Name);

                textWidthHolder += getTextWidth(d.Name, "10px", "calibri");*/
            });


        // Legend Placing

        d3.select(".legendHolder").attr("transform", function (d) {
            thisWidth = d3.select(this).node().getBBox().width;
            return "translate(" + ((width) / 2 - thisWidth / 2) + ",0)";
        })
        svg.append('image')
          .attr('xlink:href', 'https://raw.githubusercontent.com/ssissouf/ha/master/tourism0.bmp')
           .attr('width', 260)
           .attr('height', 150)
           .attr("x",330)
           .attr("y",100)

		   		    /*


           {label:'value10',
            value:'35',
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/tourism0.bmp'},*/


}
function DataSegregator(array, on) {
            var SegData;
            OrdinalPositionHolder = {
                valueOf: function () {
                    thisObject = this;
                    keys = Object.keys(thisObject);
                    keys.splice(keys.indexOf("valueOf"), 1);
                    keys.splice(keys.indexOf("keys"), 1);
                    return keys.length == 0 ? -1 : d3.max(keys, function (d) { return thisObject[d] })
                }
                , keys: function () {
                    keys = Object.keys(thisObject);
                    keys.splice(keys.indexOf("valueOf"), 1);
                    keys.splice(keys.indexOf("keys"), 1);
                    return keys;
                }
            }
            array[0].map(function (d) { return d[on] }).forEach(function (b) {
                value = OrdinalPositionHolder.valueOf();
                OrdinalPositionHolder[b] = OrdinalPositionHolder > -1 ? ++value : 0;
            })

            SegData = OrdinalPositionHolder.keys().map(function () {
                return [];
            });
            array.forEach(function (d) {
                d.forEach(function (b) {
                    SegData[OrdinalPositionHolder[b[on]]].push(b);
                })
            });

            return SegData;
            }

function change(data) {

	/* ------- PIE SLICES -------*/
	var slice = svg.select(".slices").selectAll("path.slice")
		.data(pie(data), key);

	slice.enter()
		.insert("path")
		.style("fill", function(d) { return color(d.data.label); })
		.attr("class", "slice");

	slice		
		.transition().duration(1000)
		.attrTween("d", function(d) {
			this._current = this._current || d;
			var interpolate = d3.interpolate(this._current, d);
			this._current = interpolate(0);
			return function(t) {
				return arc(interpolate(t));
			};
		})

	slice.exit()
		.remove();

	/* ------- TEXT LABELS -------*/

	var text = svg.select(".labels").selectAll("text")
		.data(pie(data), key);
		
	var img = svg.select(".images").selectAll("image")
	  .data(pie(data), key);
	  
	 text.enter()
		.append("text")
		.filter(function(d,i){
		  return d.data.label !== "do";
		})
		.attr("dy", ".35em")
		.text(function(d) {
			return "(" + d.data.value+ ")";
		});

	text.transition().duration(1000)
		.attrTween("transform", function(d) {
			this._current = this._current || d;
			var interpolate = d3.interpolate(this._current, d);
			this._current = interpolate(0);
			return function(t) {
				var d2 = interpolate(t);
				var pos = outerArc.centroid(d2);
				pos[0] = radius * (midAngle(d2) < Math.PI ? 2 : -2);
				return "translate("+ pos +")";
			};
		})
		.styleTween("text-anchor", function(d){
			this._current = this._current || d;
			var interpolate = d3.interpolate(this._current, d);
			this._current = interpolate(0);
			return function(t) {
				var d2 = interpolate(t);
				return midAngle(d2) < Math.PI ? "start":"end";
			};
		});
		
	function midAngle(d){
		return d.startAngle + (d.endAngle - d.startAngle)/2;
	}

	text.exit()
		.remove();
		
	img.enter()
		.append("image")
		.filter(function(d,i){
		  return d.data.label;
		})
		.attr("xlink:href", function(d,i){
		  return d.data.imglink;
		})
    .attr("width", 60)
    .attr("height", 20);
    
  img.transition().duration(1000)
		.attrTween("transform", function(d) {
			this._current = this._current || d;
			var interpolate = d3.interpolate(this._current, d);
			this._current = interpolate(0);
			return function(t) {
				var d2 = interpolate(t);
				var pos = outerArc.centroid(d2);
				pos[0] = radius * 0.6 * (midAngle(d2) < Math.PI ? 1.8 : -3.3);
				return "translate("+ pos +")";
			};
		})
    
	img.exit()
		.remove();

	/* ------- SLICE TO TEXT POLYLINES -------*/

	var polyline = svg.select(".lines").selectAll("polyline")
		.data(pie(data), key);
	
	polyline.enter()
		.append("polyline");

	polyline.transition().duration(1000)
		.attrTween("points", function(d){
			this._current = this._current || d;
			var interpolate = d3.interpolate(this._current, d);
			this._current = interpolate(0);
			return function(t) {
				var d2 = interpolate(t);
				var pos = outerArc.centroid(d2);
				pos[0] = radius * 0.6 * (midAngle(d2) < Math.PI ? 2 : -2);
				return [arc.centroid(d2), outerArc.centroid(d2), pos];
			};			
		});
	
	polyline.exit()
		.remove();
};

//==============================================================

function drandomData (){

    var color = d3.scale.ordinal()
	.domain(["Lorem ipsum", "dolor sit", "amet", "consectetur", "adipisicing", "elit", "sed", "do", "eiusmod", "tempor", "incididunt"])
	.range(["#98abc5", "#8a89a6", "#7b6888", "#6b486b", "#a05d56", "#d0743c", "#ff8c00"]);


	var labels = color.domain();
	return labels.map(function(label){
		return { label: label, value: Math.random(), imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/agri.png' }
	});
}



function dchange(data) {

    alert(data)

/* ------- PIE SLICES -------*/
var slice = d3.select(".slices").selectAll("path.slice")
    .data(pie(data), key);

slice.enter()
    .insert("path")
    .style("fill", function(d) { return color(d.data.label); })
    .attr("class", "slice");

slice		
    .transition().duration(1000)
    .attrTween("d", function(d) {
        this._current = this._current || d;
        var interpolate = d3.interpolate(this._current, d);
        this._current = interpolate(0);
        return function(t) {
            return arc(interpolate(t));
        };
    })

slice.exit()
    .remove();

/* ------- TEXT LABELS -------*/

var text = svg.select(".labels").selectAll("text")
    .data(pie(data), key);
    
var img = svg.select(".images").selectAll("image")
  .data(pie(data), key);
  
 text.enter()
    .append("text")
    .filter(function(d,i){
      return d.data.label !== "do";
    })
    .attr("dy", ".35em")
    .text(function(d) {
        return "(" + d.data.value+ ")";
    });

text.transition().duration(1000)
    .attrTween("transform", function(d) {
        this._current = this._current || d;
        var interpolate = d3.interpolate(this._current, d);
        this._current = interpolate(0);
        return function(t) {
            var d2 = interpolate(t);
            var pos = outerArc.centroid(d2);
            pos[0] = radius * (midAngle(d2) < Math.PI ? 2 : -2);
            return "translate("+ pos +")";
        };
    })
    .styleTween("text-anchor", function(d){
        this._current = this._current || d;
        var interpolate = d3.interpolate(this._current, d);
        this._current = interpolate(0);
        return function(t) {
            var d2 = interpolate(t);
            return midAngle(d2) < Math.PI ? "start":"end";
        };
    });
    
function midAngle(d){
    return d.startAngle + (d.endAngle - d.startAngle)/2;
}

text.exit()
    .remove();
    
img.enter()
    .append("image")
    .filter(function(d,i){
      return d.data.label;
    })
    .attr("xlink:href", function(d,i){
      return d.data.imglink;
    })
.attr("width", 60)
.attr("height", 20);

img.transition().duration(1000)
    .attrTween("transform", function(d) {
        this._current = this._current || d;
        var interpolate = d3.interpolate(this._current, d);
        this._current = interpolate(0);
        return function(t) {
            var d2 = interpolate(t);
            var pos = outerArc.centroid(d2);
            pos[0] = radius * 0.6 * (midAngle(d2) < Math.PI ? 1.8 : -3.3);
            return "translate("+ pos +")";
        };
    })

img.exit()
    .remove();

/* ------- SLICE TO TEXT POLYLINES -------*/

var polyline = svg.select(".lines").selectAll("polyline")
    .data(pie(data), key);

polyline.enter()
    .append("polyline");

polyline.transition().duration(1000)
    .attrTween("points", function(d){
        this._current = this._current || d;
        var interpolate = d3.interpolate(this._current, d);
        this._current = interpolate(0);
        return function(t) {
            var d2 = interpolate(t);
            var pos = outerArc.centroid(d2);
            pos[0] = radius * 0.6 * (midAngle(d2) < Math.PI ? 2 : -2);
            return [arc.centroid(d2), outerArc.centroid(d2), pos];
        };			
    });

polyline.exit()
    .remove();
};


function yearchange(){

var scountry = d3.select('#ocountries option:checked').text();
//alert (scountry)

var syear = d3.select('#oyears option:checked').text();
////alert (syear)

var i;
	var i0;
	for (i=0; i< alldata.length;i++){
		//alert(i)
		//alert(data[i].ccode)
		//alert(data[i].year)//
		if (alldata[i].country ==scountry){
			if (alldata[i].year == syear){
				//alert ("oui")
				i0 = i
				dataset = alldata[i]
				if (parseFloat(dataset.v01) > maxds){maxds = parseFloat(dataset.v01)}
				if (parseFloat(dataset.v02) > maxds){maxds = parseFloat(dataset.v02)}
				if (parseFloat(dataset.v03) > maxds){maxds = parseFloat(dataset.v03)}
				if (parseFloat(dataset.v04) > maxds){maxds = parseFloat(dataset.v04)}
				if (parseFloat(dataset.v05) > maxds){maxds = parseFloat(dataset.v05)}
				if (parseFloat(dataset.v06) > maxds){maxds = parseFloat(dataset.v06)}
				if (parseFloat(dataset.v07) > maxds){maxds = parseFloat(dataset.v07)}
				if (parseFloat(dataset.v08) > maxds){maxds = parseFloat(dataset.v08)}
				if (parseFloat(dataset.v09) > maxds){maxds = parseFloat(dataset.v09)}
				if (parseFloat(dataset.v10) > maxds){maxds = parseFloat(dataset.v10)}
				if (parseFloat(dataset.v11) > maxds){maxds = parseFloat(dataset.v11)}
				if (parseFloat(dataset.v12) > maxds){maxds = parseFloat(dataset.v12)}
				if (parseFloat(dataset.v13) > maxds){maxds = parseFloat(dataset.v13)}
				if (parseFloat(dataset.v14) > maxds){maxds = parseFloat(dataset.v14)}
				if (parseFloat(dataset.v15) > maxds){maxds = parseFloat(dataset.v15)}
				if (parseFloat(dataset.v16) > maxds){maxds = parseFloat(dataset.v16)}
				if (parseFloat(dataset.v17) > maxds){maxds = parseFloat(dataset.v17)}
				if (parseFloat(dataset.v18) > maxds){maxds = parseFloat(dataset.v18)}
				if (parseFloat(dataset.v19) > maxds){maxds = parseFloat(dataset.v19)}
				if (parseFloat(dataset.v20) > maxds){maxds = parseFloat(dataset.v20)}
			}
		}
	};



    d3.selectAll("#yaxis1").remove();
    d3.selectAll(".line").remove();

    Data = [
{ Date: "imports", Categories: [{ Name: "Category1", Value: dataset.v02, gg:"category1" }], LineCategory: [{ Name: "Line1", Value: dataset.v02 }] },
{ Date: "exports", Categories: [{ Name: "Category1", Value: dataset.v12, gg:"category2" }], LineCategory: [{ Name: "Line1", Value: dataset.v12 }] },
       ]

       var margin = { top: Math.round((+d3.select("#dd01").style('height').slice(0, -2))*0.1), right: Math.round((+d3.select("#dd01").style('width').slice(0, -2))*0.05), bottom: Math.round((+d3.select("#dd01").style('height').slice(0, -2))*0.02), left: Math.round((+d3.select("#dd01").style('width').slice(0, -2))*0.1) },
            width = Math.round((+d3.select("#dd01").style('width').slice(0, -2))*0.5) - margin.left - margin.right,
            height = Math.round((+d3.select("#dd01").style('height').slice(0, -2))*1) - margin.top - margin.bottom;

        var textWidthHolder = 0;
        /// Adding Date in LineCategory
        Data.forEach(function (d) {
            d.LineCategory.forEach(function (b) {
                b.Date = d.Date;
            })
        });

//alert(maxds)


        var Categories = new Array();
        // Extension method declaration

        Categories.pro

        var Data;
        var ageNames;
        var x0 = d3.scale.ordinal()
            .rangeRoundBands([0, width], .1);
        var XLine = d3.scale.ordinal()
            .rangeRoundPoints([0, width], .1);
        var x1 = d3.scale.ordinal();

        var y = d3.scale.linear()
            .range([height, 0]);

        /*/*var YLine = d3.scale.linear().range([height, 0])
        .domain([0, d3.max(Data, function (d) { return d3.max(d.LineCategory, function (b) { return b.Value }) })]);*/

        var YLine = d3.scale.linear().range([height, 0])
        .domain([0, maxds]);

        var color = d3.scale.ordinal()
            .range(["#d0743c", "#8a89a6", "#7b6888", "#6b486b", "#a05d56", "#d0743c", "#ff8c00"]);

        var line = d3.svg.line().x(function (d) {
            return x0(d.Date) + x0.rangeBand() / 2;
        }).y(function (d) { return YLine(d.Value) });




        var xAxis = d3.svg.axis()
            .scale(x0)
            .orient("bottom");

        var yAxis = d3.svg.axis()
            .scale(y)
            .orient("left")
            .tickFormat(d3.format(".2s"));

        var YLeftAxis = d3.svg.axis().scale(YLine).orient("right").tickFormat(d3.format(".2s"));

        var svg1 = d3.select("#dd01").select("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
          .append("g")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");



        // Bar Data categories
        Data.forEach(function (d) {
            d.Categories.forEach(function (b) {
                if (Categories.findIndex(function (c) { return c.Name===b.Name}) == -1) {
                    b.Type = "bar";
                    console.log(JSON.stringify(b))
                    Categories.push(b)
                }
            })
        });


        // Line Data categories
        Data.forEach(function (d) {
            d.LineCategory.forEach(function (b) {
                if (Categories.findIndex(function (c) { return c.Name === b.Name }) == -1) {
                    b.Type = "line";
                    console.log(JSON.stringify(b))
                    Categories.push(b)
                }
            })
        });

        // Processing Line data
        lineData = DataSegregator(Data.map(function (d) { return d.LineCategory }), "Name");
//alert(lineData)
        // Line Coloring
        LineColor = d3.scale.ordinal();
        LineColor.domain(Categories.filter(function (d) { return d.Type == "line" }).map(function (d) { return d.Name }));
        LineColor.range(["#d40606", "#06bf00", "#98bdc5", "#671919", "#0b172b"])
        x0.domain(Data.map(function (d) { return d.Date; }));
        XLine.domain(Data.map(function (d) { return d.Date; }));
        x1.domain(Categories.filter(function (d) { return d.Type == "bar" }).map(function (d) { return d.Name})).rangeRoundBands([0, x0.rangeBand()]);
        //y.domain([0, maxds]);
		y.domain([0, maxds]);
       /*svg.append("g")
            .attr("class", "x axis")
            .attr("transform", "translate(0," + height + ")")
            .call(xAxis);*/

        /*svg.append("g")
           .attr("class", "y axis")
            .attr("transform", "translate(" + (width) + ",0)")
           .call(YLeftAxis)

         .append("text")
           .attr("transform", "rotate(-90)")
           .attr("y", -10)

           .attr("dy", ".71em")
           .style("text-anchor", "end")
           .text("Percent");*/

        svg1.append("g")
            .attr("class", "y axis")
            .attr("id","yaxis1")
            .call(yAxis)
          .append("text")
            .attr("transform", "rotate(-90)")
            .attr("y", 6)
            .attr("dy", ".71em")
            .style("text-anchor", "end")
            .text("Valueu");
var nv1  = (Data[0].Categories[0].Value)
//alert(nv1)
var newy1 = y(nv1)
///alert(newy1)
var neww1 = height-y(nv1)
//alert(neww1)
d3.select(".l1category1").transition().duration(1500).attr("y",newy1)
d3.select(".l1category1").attr("height",neww1)

var nv2  = (Data[1].Categories[0].Value)
//alert(nv2)
var newy2 = y(nv2)
//alert(newy2)
var neww2 = height-y(nv2)
//alert(neww2)
d3.select(".l1category2").transition().duration(1500).attr("y",newy2)
d3.select(".l1category2").attr("height",neww2)
/*        var state = svg.selectAll(".state")
            .data(Data).select('g')
            .enter().selectAll("g") /*
            .attr("class", "state")
            .attr("transform", function (d) { return "translate(" + x0(d.Date) + ",0)"; });
alert(675)
        state.selectAll("rect")
            .data(function (d) { return d.Categories; })
         // .enter().append("rect")
            .attr("width", x1.rangeBand())
            .attr("x", function (d) { return x1(d.Name); })
            .attr("y", function (d) { return y(d.Value); })
            .attr("class", function (d) { return 'l1' + (d.gg); })
            //.attr("height", function (d) { return height - y(d.Value); })
            .style("fill", function (d) { return color(d.gg); })
            .transition().delay(500).attrTween("height", function (d) {
                var i = d3.interpolate(0, height - y(d.Value));
                return function (t)
                {
                    return i(t);
                }
            });*/

        // drawaing lines
        setTimeout(function () {svg1.selectAll(".lines").data(lineData).enter().append("g").attr("class", "line")
        .each(function (d) {
            Name=d[0].Name
            d3.select(this).append("path").attr("d", function (b) { return line(b) }).style({ "stroke-width": "6px", "fill": "none" }).style("stroke", LineColor(Name)).style("stroke-linecap", "round").transition().duration(1500);
        })},1500)
        
/*   
        // Legends

        var LegendHolder = svg.append("g").attr("class", "legendHolder");
        var legend = LegendHolder.selectAll(".legend")
            .data(Categories.map(function (d) { return {"Name":d.Name,"Type":d.Type}}))
          .enter().append("g")
            .attr("class", "legend")
            .attr("transform", function (d, i) { return "translate(0," +( height+ margin.bottom/2 )+ ")"; })
            .each(function (d,i) {
                //  Legend Symbols

                d3.select(this).append("rect")
                .attr("width", function () { return 18 })
                .attr("x", function (b) {

                    left = (i+1) * 15 + i * 18 + i * 5 + textWidthHolder;
                    return left;
                })
                 .attr("y", function (b) { return b.Type == 'bar'?0:7})
                .attr("height", function (b) { return b.Type== 'bar'? 18:5 })
                .style("fill", function (b) { return b.Type == 'bar' ? color(d.Name) : LineColor(d.Name) });

                //  Legend Text

                d3.select(this).append("text")
                .attr("x", function (b) {

                    left = (i+1) * 15 + (i+1) * 18 + (i + 1) * 5 + textWidthHolder;

                    return left;
                })
                .attr("y", 9)
                .attr("dy", ".35em")
                .style("text-anchor", "start")
                .text(d.Name);

                textWidthHolder += getTextWidth(d.Name, "10px", "calibri");
            });


        // Legend Placing

        d3.select(".legendHolder").attr("transform", function (d) {
            thisWidth = d3.select(this).node().getBBox().width;
            return "translate(" + ((width) / 2 - thisWidth / 2) + ",0)";
        })
        svg.append('image')
          .attr('xlink:href', 'https://raw.githubusercontent.com/ssissouf/ha/master/FoodAndLA_EN.bmp')
           .attr('width', 260)
           .attr('height', 150)
           .attr("x",330)
           .attr("y",100)*/

           d3.selectAll("#yaxis2").remove();
           Data = [
{ Date: "imports", Categories: [{ Name: "Category1", Value: dataset.v03, gg:"category1" }], LineCategory: [{ Name: "Line1", Value: dataset.v03 }] },
{ Date: "exports", Categories: [{ Name: "Category1", Value: dataset.v13, gg:"category2" }], LineCategory: [{ Name: "Line1", Value: dataset.v13 }] },
       ]

       var margin = { top: Math.round((+d3.select("#dd01").style('height').slice(0, -2))*0.1), right: Math.round((+d3.select("#dd01").style('width').slice(0, -2))*0.05), bottom: Math.round((+d3.select("#dd01").style('height').slice(0, -2))*0.02), left: Math.round((+d3.select("#dd01").style('width').slice(0, -2))*0.1) },
            width = Math.round((+d3.select("#dd01").style('width').slice(0, -2))*0.5) - margin.left - margin.right,
            height = Math.round((+d3.select("#dd01").style('height').slice(0, -2))*1) - margin.top - margin.bottom;

        var textWidthHolder = 0;
        /// Adding Date in LineCategory
        Data.forEach(function (d) {
            d.LineCategory.forEach(function (b) {
                b.Date = d.Date;
            })
        });

//alert(maxds)


        var Categories = new Array();
        // Extension method declaration

        Categories.pro

        var Data;
        var ageNames;
        var x0 = d3.scale.ordinal()
            .rangeRoundBands([0, width], .1);
        var XLine = d3.scale.ordinal()
            .rangeRoundPoints([0, width], .1);
        var x1 = d3.scale.ordinal();

        var y = d3.scale.linear()
            .range([height, 0]);

        /*/*var YLine = d3.scale.linear().range([height, 0])
        .domain([0, d3.max(Data, function (d) { return d3.max(d.LineCategory, function (b) { return b.Value }) })]);*/

        var YLine = d3.scale.linear().range([height, 0])
        .domain([0, maxds]);

        var color = d3.scale.ordinal()
            .range(["#d0743c", "#8a89a6", "#7b6888", "#6b486b", "#a05d56", "#d0743c", "#ff8c00"]);

        var line = d3.svg.line().x(function (d) {
            return x0(d.Date) + x0.rangeBand() / 2;
        }).y(function (d) { return YLine(d.Value) });




        var xAxis = d3.svg.axis()
            .scale(x0)
            .orient("bottom");

        var yAxis = d3.svg.axis()
            .scale(y)
            .orient("left")
            .tickFormat(d3.format(".2s"));

        var YLeftAxis = d3.svg.axis().scale(YLine).orient("right").tickFormat(d3.format(".2s"));

        var svg2 = d3.select("#dd02").select("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
          .append("g")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");



        // Bar Data categories
        Data.forEach(function (d) {
            d.Categories.forEach(function (b) {
                if (Categories.findIndex(function (c) { return c.Name===b.Name}) == -1) {
                    b.Type = "bar";
                    console.log(JSON.stringify(b))
                    Categories.push(b)
                }
            })
        });


        // Line Data categories
        Data.forEach(function (d) {
            d.LineCategory.forEach(function (b) {
                if (Categories.findIndex(function (c) { return c.Name === b.Name }) == -1) {
                    b.Type = "line";
                    console.log(JSON.stringify(b))
                    Categories.push(b)
                }
            })
        });

        // Processing Line data
        lineData2 = DataSegregator(Data.map(function (d) { return d.LineCategory }), "Name");
//alert(lineData)
        // Line Coloring
        LineColor = d3.scale.ordinal();
        LineColor.domain(Categories.filter(function (d) { return d.Type == "line" }).map(function (d) { return d.Name }));
        LineColor.range(["#d40606", "#06bf00", "#98bdc5", "#671919", "#0b172b"])
        x0.domain(Data.map(function (d) { return d.Date; }));
        XLine.domain(Data.map(function (d) { return d.Date; }));
        x1.domain(Categories.filter(function (d) { return d.Type == "bar" }).map(function (d) { return d.Name})).rangeRoundBands([0, x0.rangeBand()]);
        //y.domain([0, maxds]);
		y.domain([0, maxds]);
       /*svg.append("g")
            .attr("class", "x axis")
            .attr("transform", "translate(0," + height + ")")
            .call(xAxis);*/

        /*svg.append("g")
           .attr("class", "y axis")
            .attr("transform", "translate(" + (width) + ",0)")
           .call(YLeftAxis)

         .append("text")
           .attr("transform", "rotate(-90)")
           .attr("y", -10)

           .attr("dy", ".71em")
           .style("text-anchor", "end")
           .text("Percent");*/

        svg2.append("g")
            .attr("class", "y axis")
            .attr("id","yaxis2")
            .call(yAxis)
          .append("text")
            .attr("transform", "rotate(-90)")
            .attr("y", 6)
            .attr("dy", ".71em")
            .style("text-anchor", "end")
            .text("Valueu");
var nv1  = (Data[0].Categories[0].Value)
//alert(nv1)
var newy1 = y(nv1)
///alert(newy1)
var neww1 = height-y(nv1)
//alert(neww1)
d3.select(".l2category1").transition().duration(1500).attr("y",newy1)
d3.select(".l2category1").attr("height",neww1)

var nv2  = (Data[1].Categories[0].Value)
//alert(nv2)
var newy2 = y(nv2)
//alert(newy2)
var neww2 = height-y(nv2)
//alert(neww2)
d3.select(".l2category2").transition().duration(1500).attr("y",newy2)
d3.select(".l2category2").attr("height",neww2)
/*        var state = svg.selectAll(".state")
            .data(Data).select('g')
            .enter().selectAll("g") /*
            .attr("class", "state")
            .attr("transform", function (d) { return "translate(" + x0(d.Date) + ",0)"; });
alert(675)
        state.selectAll("rect")
            .data(function (d) { return d.Categories; })
         // .enter().append("rect")
            .attr("width", x1.rangeBand())
            .attr("x", function (d) { return x1(d.Name); })
            .attr("y", function (d) { return y(d.Value); })
            .attr("class", function (d) { return 'l1' + (d.gg); })
            //.attr("height", function (d) { return height - y(d.Value); })
            .style("fill", function (d) { return color(d.gg); })
            .transition().delay(500).attrTween("height", function (d) {
                var i = d3.interpolate(0, height - y(d.Value));
                return function (t)
                {
                    return i(t);
                }
            });*/

        // drawaing lines
        setTimeout(function () {svg2.selectAll(".lines").data(lineData2).enter().append("g").attr("class", "line")
        .each(function (d) {
            Name=d[0].Name
            d3.select(this).append("path").attr("d", function (b) { return line(b) }).style({ "stroke-width": "6px", "fill": "none" }).style("stroke", LineColor(Name)).style("stroke-linecap", "round").transition().duration(1500);
        })},1500)
        
/*   
        // Legends

        var LegendHolder = svg.append("g").attr("class", "legendHolder");
        var legend = LegendHolder.selectAll(".legend")
            .data(Categories.map(function (d) { return {"Name":d.Name,"Type":d.Type}}))
          .enter().append("g")
            .attr("class", "legend")
            .attr("transform", function (d, i) { return "translate(0," +( height+ margin.bottom/2 )+ ")"; })
            .each(function (d,i) {
                //  Legend Symbols

                d3.select(this).append("rect")
                .attr("width", function () { return 18 })
                .attr("x", function (b) {

                    left = (i+1) * 15 + i * 18 + i * 5 + textWidthHolder;
                    return left;
                })
                 .attr("y", function (b) { return b.Type == 'bar'?0:7})
                .attr("height", function (b) { return b.Type== 'bar'? 18:5 })
                .style("fill", function (b) { return b.Type == 'bar' ? color(d.Name) : LineColor(d.Name) });

                //  Legend Text

                d3.select(this).append("text")
                .attr("x", function (b) {

                    left = (i+1) * 15 + (i+1) * 18 + (i + 1) * 5 + textWidthHolder;

                    return left;
                })
                .attr("y", 9)
                .attr("dy", ".35em")
                .style("text-anchor", "start")
                .text(d.Name);

                textWidthHolder += getTextWidth(d.Name, "10px", "calibri");
            });


        // Legend Placing

        d3.select(".legendHolder").attr("transform", function (d) {
            thisWidth = d3.select(this).node().getBBox().width;
            return "translate(" + ((width) / 2 - thisWidth / 2) + ",0)";
        })
        svg.append('image')
          .attr('xlink:href', 'https://raw.githubusercontent.com/ssissouf/ha/master/FoodAndLA_EN.bmp')
           .attr('width', 260)
           .attr('height', 150)
           .attr("x",330)
           .attr("y",100)*/

           d3.selectAll("#yaxis3").remove();
           Data = [
{ Date: "imports", Categories: [{ Name: "Category1", Value: dataset.v01, gg:"category1" }], LineCategory: [{ Name: "Line1", Value: dataset.v01 }] },
{ Date: "exports", Categories: [{ Name: "Category1", Value: dataset.v11, gg:"category2" }], LineCategory: [{ Name: "Line1", Value: dataset.v11 }] },
       ]

       var margin = { top: Math.round((+d3.select("#dd01").style('height').slice(0, -2))*0.1), right: Math.round((+d3.select("#dd01").style('width').slice(0, -2))*0.05), bottom: Math.round((+d3.select("#dd01").style('height').slice(0, -2))*0.02), left: Math.round((+d3.select("#dd01").style('width').slice(0, -2))*0.1) },
            width = Math.round((+d3.select("#dd01").style('width').slice(0, -2))*0.5) - margin.left - margin.right,
            height = Math.round((+d3.select("#dd01").style('height').slice(0, -2))*1) - margin.top - margin.bottom;

        var textWidthHolder = 0;
        /// Adding Date in LineCategory
        Data.forEach(function (d) {
            d.LineCategory.forEach(function (b) {
                b.Date = d.Date;
            })
        });

//alert(maxds)


        var Categories = new Array();
        // Extension method declaration

        Categories.pro

        var Data;
        var ageNames;
        var x0 = d3.scale.ordinal()
            .rangeRoundBands([0, width], .1);
        var XLine = d3.scale.ordinal()
            .rangeRoundPoints([0, width], .1);
        var x1 = d3.scale.ordinal();

        var y = d3.scale.linear()
            .range([height, 0]);

        /*/*var YLine = d3.scale.linear().range([height, 0])
        .domain([0, d3.max(Data, function (d) { return d3.max(d.LineCategory, function (b) { return b.Value }) })]);*/

        var YLine = d3.scale.linear().range([height, 0])
        .domain([0, maxds]);

        var color = d3.scale.ordinal()
            .range(["#d0743c", "#8a89a6", "#7b6888", "#6b486b", "#a05d56", "#d0743c", "#ff8c00"]);

        var line = d3.svg.line().x(function (d) {
            return x0(d.Date) + x0.rangeBand() / 2;
        }).y(function (d) { return YLine(d.Value) });




        var xAxis = d3.svg.axis()
            .scale(x0)
            .orient("bottom");

        var yAxis = d3.svg.axis()
            .scale(y)
            .orient("left")
            .tickFormat(d3.format(".2s"));

        var YLeftAxis = d3.svg.axis().scale(YLine).orient("right").tickFormat(d3.format(".2s"));

        var svg3 = d3.select("#dd03").select("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
          .append("g")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");



        // Bar Data categories
        Data.forEach(function (d) {
            d.Categories.forEach(function (b) {
                if (Categories.findIndex(function (c) { return c.Name===b.Name}) == -1) {
                    b.Type = "bar";
                    console.log(JSON.stringify(b))
                    Categories.push(b)
                }
            })
        });


        // Line Data categories
        Data.forEach(function (d) {
            d.LineCategory.forEach(function (b) {
                if (Categories.findIndex(function (c) { return c.Name === b.Name }) == -1) {
                    b.Type = "line";
                    console.log(JSON.stringify(b))
                    Categories.push(b)
                }
            })
        });

        // Processing Line data
        lineData3 = DataSegregator(Data.map(function (d) { return d.LineCategory }), "Name");
//alert(lineData)
        // Line Coloring
        LineColor = d3.scale.ordinal();
        LineColor.domain(Categories.filter(function (d) { return d.Type == "line" }).map(function (d) { return d.Name }));
        LineColor.range(["#d40606", "#06bf00", "#98bdc5", "#671919", "#0b172b"])
        x0.domain(Data.map(function (d) { return d.Date; }));
        XLine.domain(Data.map(function (d) { return d.Date; }));
        x1.domain(Categories.filter(function (d) { return d.Type == "bar" }).map(function (d) { return d.Name})).rangeRoundBands([0, x0.rangeBand()]);
        //y.domain([0, maxds]);
		y.domain([0, maxds]);
       /*svg.append("g")
            .attr("class", "x axis")
            .attr("transform", "translate(0," + height + ")")
            .call(xAxis);*/

        /*svg.append("g")
           .attr("class", "y axis")
            .attr("transform", "translate(" + (width) + ",0)")
           .call(YLeftAxis)

         .append("text")
           .attr("transform", "rotate(-90)")
           .attr("y", -10)

           .attr("dy", ".71em")
           .style("text-anchor", "end")
           .text("Percent");*/

        svg3.append("g")
            .attr("class", "y axis")
            .attr("id","yaxis3")
            .call(yAxis)
          .append("text")
            .attr("transform", "rotate(-90)")
            .attr("y", 6)
            .attr("dy", ".71em")
            .style("text-anchor", "end")
            .text("Valueu");
var nv1  = (Data[0].Categories[0].Value)
//alert(nv1)
var newy1 = y(nv1)
///alert(newy1)
var neww1 = height-y(nv1)
//alert(neww1)
d3.select(".l3category1").transition().duration(1500).attr("y",newy1)
d3.select(".l3category1").attr("height",neww1)

var nv2  = (Data[1].Categories[0].Value)
//alert(nv2)
var newy2 = y(nv2)
//alert(newy2)
var neww2 = height-y(nv2)
//alert(neww2)
d3.select(".l3category2").transition().duration(1500).attr("y",newy2)
d3.select(".l3category2").attr("height",neww2)
/*        var state = svg.selectAll(".state")
            .data(Data).select('g')
            .enter().selectAll("g") /*
            .attr("class", "state")
            .attr("transform", function (d) { return "translate(" + x0(d.Date) + ",0)"; });
alert(675)
        state.selectAll("rect")
            .data(function (d) { return d.Categories; })
         // .enter().append("rect")
            .attr("width", x1.rangeBand())
            .attr("x", function (d) { return x1(d.Name); })
            .attr("y", function (d) { return y(d.Value); })
            .attr("class", function (d) { return 'l1' + (d.gg); })
            //.attr("height", function (d) { return height - y(d.Value); })
            .style("fill", function (d) { return color(d.gg); })
            .transition().delay(500).attrTween("height", function (d) {
                var i = d3.interpolate(0, height - y(d.Value));
                return function (t)
                {
                    return i(t);
                }
            });*/

        // drawaing lines
        setTimeout(function () {svg3.selectAll(".lines").data(lineData3).enter().append("g").attr("class", "line")
        .each(function (d) {
            Name=d[0].Name
            d3.select(this).append("path").attr("d", function (b) { return line(b) }).style({ "stroke-width": "6px", "fill": "none" }).style("stroke", LineColor(Name)).style("stroke-linecap", "round").transition().duration(1500);
        })},1500)
        
/*   
        // Legends

        var LegendHolder = svg.append("g").attr("class", "legendHolder");
        var legend = LegendHolder.selectAll(".legend")
            .data(Categories.map(function (d) { return {"Name":d.Name,"Type":d.Type}}))
          .enter().append("g")
            .attr("class", "legend")
            .attr("transform", function (d, i) { return "translate(0," +( height+ margin.bottom/2 )+ ")"; })
            .each(function (d,i) {
                //  Legend Symbols

                d3.select(this).append("rect")
                .attr("width", function () { return 18 })
                .attr("x", function (b) {

                    left = (i+1) * 15 + i * 18 + i * 5 + textWidthHolder;
                    return left;
                })
                 .attr("y", function (b) { return b.Type == 'bar'?0:7})
                .attr("height", function (b) { return b.Type== 'bar'? 18:5 })
                .style("fill", function (b) { return b.Type == 'bar' ? color(d.Name) : LineColor(d.Name) });

                //  Legend Text

                d3.select(this).append("text")
                .attr("x", function (b) {

                    left = (i+1) * 15 + (i+1) * 18 + (i + 1) * 5 + textWidthHolder;

                    return left;
                })
                .attr("y", 9)
                .attr("dy", ".35em")
                .style("text-anchor", "start")
                .text(d.Name);

                textWidthHolder += getTextWidth(d.Name, "10px", "calibri");
            });


        // Legend Placing

        d3.select(".legendHolder").attr("transform", function (d) {
            thisWidth = d3.select(this).node().getBBox().width;
            return "translate(" + ((width) / 2 - thisWidth / 2) + ",0)";
        })
        svg.append('image')
          .attr('xlink:href', 'https://raw.githubusercontent.com/ssissouf/ha/master/FoodAndLA_EN.bmp')
           .attr('width', 260)
           .attr('height', 150)
           .attr("x",330)
           .attr("y",100)*/

           d3.selectAll("#yaxis4").remove();
           Data = [
{ Date: "imports", Categories: [{ Name: "Category1", Value: dataset.v03, gg:"category1" }], LineCategory: [{ Name: "Line1", Value: dataset.v03 }] },
{ Date: "exports", Categories: [{ Name: "Category1", Value: dataset.v13, gg:"category2" }], LineCategory: [{ Name: "Line1", Value: dataset.v13 }] },
       ]

       var margin = { top: Math.round((+d3.select("#dd01").style('height').slice(0, -2))*0.1), right: Math.round((+d3.select("#dd01").style('width').slice(0, -2))*0.05), bottom: Math.round((+d3.select("#dd01").style('height').slice(0, -2))*0.02), left: Math.round((+d3.select("#dd01").style('width').slice(0, -2))*0.1) },
            width = Math.round((+d3.select("#dd01").style('width').slice(0, -2))*0.5) - margin.left - margin.right,
            height = Math.round((+d3.select("#dd01").style('height').slice(0, -2))*1) - margin.top - margin.bottom;

        var textWidthHolder = 0;
        /// Adding Date in LineCategory
        Data.forEach(function (d) {
            d.LineCategory.forEach(function (b) {
                b.Date = d.Date;
            })
        });

//alert(maxds)


        var Categories = new Array();
        // Extension method declaration

        Categories.pro

        var Data;
        var ageNames;
        var x0 = d3.scale.ordinal()
            .rangeRoundBands([0, width], .1);
        var XLine = d3.scale.ordinal()
            .rangeRoundPoints([0, width], .1);
        var x1 = d3.scale.ordinal();

        var y = d3.scale.linear()
            .range([height, 0]);

        /*/*var YLine = d3.scale.linear().range([height, 0])
        .domain([0, d3.max(Data, function (d) { return d3.max(d.LineCategory, function (b) { return b.Value }) })]);*/

        var YLine = d3.scale.linear().range([height, 0])
        .domain([0, maxds]);

        var color = d3.scale.ordinal()
            .range(["#d0743c", "#8a89a6", "#7b6888", "#6b486b", "#a05d56", "#d0743c", "#ff8c00"]);

        var line = d3.svg.line().x(function (d) {
            return x0(d.Date) + x0.rangeBand() / 2;
        }).y(function (d) { return YLine(d.Value) });




        var xAxis = d3.svg.axis()
            .scale(x0)
            .orient("bottom");

        var yAxis = d3.svg.axis()
            .scale(y)
            .orient("left")
            .tickFormat(d3.format(".2s"));

        var YLeftAxis = d3.svg.axis().scale(YLine).orient("right").tickFormat(d3.format(".2s"));

        var svg4 = d3.select("#dd04").select("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
          .append("g")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");



        // Bar Data categories
        Data.forEach(function (d) {
            d.Categories.forEach(function (b) {
                if (Categories.findIndex(function (c) { return c.Name===b.Name}) == -1) {
                    b.Type = "bar";
                    console.log(JSON.stringify(b))
                    Categories.push(b)
                }
            })
        });


        // Line Data categories
        Data.forEach(function (d) {
            d.LineCategory.forEach(function (b) {
                if (Categories.findIndex(function (c) { return c.Name === b.Name }) == -1) {
                    b.Type = "line";
                    console.log(JSON.stringify(b))
                    Categories.push(b)
                }
            })
        });

        // Processing Line data
        lineData4 = DataSegregator(Data.map(function (d) { return d.LineCategory }), "Name");
//alert(lineData)
        // Line Coloring
        LineColor = d3.scale.ordinal();
        LineColor.domain(Categories.filter(function (d) { return d.Type == "line" }).map(function (d) { return d.Name }));
        LineColor.range(["#d40606", "#06bf00", "#98bdc5", "#671919", "#0b172b"])
        x0.domain(Data.map(function (d) { return d.Date; }));
        XLine.domain(Data.map(function (d) { return d.Date; }));
        x1.domain(Categories.filter(function (d) { return d.Type == "bar" }).map(function (d) { return d.Name})).rangeRoundBands([0, x0.rangeBand()]);
        //y.domain([0, maxds]);
		y.domain([0, maxds]);
       /*svg.append("g")
            .attr("class", "x axis")
            .attr("transform", "translate(0," + height + ")")
            .call(xAxis);*/

        /*svg.append("g")
           .attr("class", "y axis")
            .attr("transform", "translate(" + (width) + ",0)")
           .call(YLeftAxis)

         .append("text")
           .attr("transform", "rotate(-90)")
           .attr("y", -10)

           .attr("dy", ".71em")
           .style("text-anchor", "end")
           .text("Percent");*/

        svg2.append("g")
            .attr("class", "y axis")
            .attr("id","yaxis4")
            .call(yAxis)
          .append("text")
            .attr("transform", "rotate(-90)")
            .attr("y", 6)
            .attr("dy", ".71em")
            .style("text-anchor", "end")
            .text("Valueu");
var nv1  = (Data[0].Categories[0].Value)
//alert(nv1)
var newy1 = y(nv1)
///alert(newy1)
var neww1 = height-y(nv1)
//alert(neww1)
d3.select(".l4category1").transition().duration(1500).attr("y",newy1)
d3.select(".l4category1").attr("height",neww1)

var nv2  = (Data[1].Categories[0].Value)
//alert(nv2)
var newy2 = y(nv2)
//alert(newy2)
var neww2 = height-y(nv2)
//alert(neww2)
d3.select(".l4category2").transition().duration(1500).attr("y",newy2)
d3.select(".l4category2").attr("height",neww2)
/*        var state = svg.selectAll(".state")
            .data(Data).select('g')
            .enter().selectAll("g") /*
            .attr("class", "state")
            .attr("transform", function (d) { return "translate(" + x0(d.Date) + ",0)"; });
alert(675)
        state.selectAll("rect")
            .data(function (d) { return d.Categories; })
         // .enter().append("rect")
            .attr("width", x1.rangeBand())
            .attr("x", function (d) { return x1(d.Name); })
            .attr("y", function (d) { return y(d.Value); })
            .attr("class", function (d) { return 'l1' + (d.gg); })
            //.attr("height", function (d) { return height - y(d.Value); })
            .style("fill", function (d) { return color(d.gg); })
            .transition().delay(500).attrTween("height", function (d) {
                var i = d3.interpolate(0, height - y(d.Value));
                return function (t)
                {
                    return i(t);
                }
            });*/

        // drawaing lines
        setTimeout(function () {svg4.selectAll(".lines").data(lineData4).enter().append("g").attr("class", "line")
        .each(function (d) {
            Name=d[0].Name
            d3.select(this).append("path").attr("d", function (b) { return line(b) }).style({ "stroke-width": "6px", "fill": "none" }).style("stroke", LineColor(Name)).style("stroke-linecap", "round").transition().duration(1500);
        })},1500)
        
/*   
        // Legends

        var LegendHolder = svg.append("g").attr("class", "legendHolder");
        var legend = LegendHolder.selectAll(".legend")
            .data(Categories.map(function (d) { return {"Name":d.Name,"Type":d.Type}}))
          .enter().append("g")
            .attr("class", "legend")
            .attr("transform", function (d, i) { return "translate(0," +( height+ margin.bottom/2 )+ ")"; })
            .each(function (d,i) {
                //  Legend Symbols

                d3.select(this).append("rect")
                .attr("width", function () { return 18 })
                .attr("x", function (b) {

                    left = (i+1) * 15 + i * 18 + i * 5 + textWidthHolder;
                    return left;
                })
                 .attr("y", function (b) { return b.Type == 'bar'?0:7})
                .attr("height", function (b) { return b.Type== 'bar'? 18:5 })
                .style("fill", function (b) { return b.Type == 'bar' ? color(d.Name) : LineColor(d.Name) });

                //  Legend Text

                d3.select(this).append("text")
                .attr("x", function (b) {

                    left = (i+1) * 15 + (i+1) * 18 + (i + 1) * 5 + textWidthHolder;

                    return left;
                })
                .attr("y", 9)
                .attr("dy", ".35em")
                .style("text-anchor", "start")
                .text(d.Name);

                textWidthHolder += getTextWidth(d.Name, "10px", "calibri");
            });


        // Legend Placing

        d3.select(".legendHolder").attr("transform", function (d) {
            thisWidth = d3.select(this).node().getBBox().width;
            return "translate(" + ((width) / 2 - thisWidth / 2) + ",0)";
        })
        svg.append('image')
          .attr('xlink:href', 'https://raw.githubusercontent.com/ssissouf/ha/master/FoodAndLA_EN.bmp')
           .attr('width', 260)
           .attr('height', 150)
           .attr("x",330)
           .attr("y",100)*/

           d3.selectAll("#yaxis5").remove();
           Data = [
{ Date: "imports", Categories: [{ Name: "Category1", Value: dataset.v03, gg:"category1" }], LineCategory: [{ Name: "Line1", Value: dataset.v03 }] },
{ Date: "exports", Categories: [{ Name: "Category1", Value: dataset.v13, gg:"category2" }], LineCategory: [{ Name: "Line1", Value: dataset.v13 }] },
       ]

       var margin = { top: Math.round((+d3.select("#dd01").style('height').slice(0, -2))*0.1), right: Math.round((+d3.select("#dd01").style('width').slice(0, -2))*0.05), bottom: Math.round((+d3.select("#dd01").style('height').slice(0, -2))*0.02), left: Math.round((+d3.select("#dd01").style('width').slice(0, -2))*0.1) },
            width = Math.round((+d3.select("#dd01").style('width').slice(0, -2))*0.5) - margin.left - margin.right,
            height = Math.round((+d3.select("#dd01").style('height').slice(0, -2))*1) - margin.top - margin.bottom;

        var textWidthHolder = 0;
        /// Adding Date in LineCategory
        Data.forEach(function (d) {
            d.LineCategory.forEach(function (b) {
                b.Date = d.Date;
            })
        });

//alert(maxds)


        var Categories = new Array();
        // Extension method declaration

        Categories.pro

        var Data;
        var ageNames;
        var x0 = d3.scale.ordinal()
            .rangeRoundBands([0, width], .1);
        var XLine = d3.scale.ordinal()
            .rangeRoundPoints([0, width], .1);
        var x1 = d3.scale.ordinal();

        var y = d3.scale.linear()
            .range([height, 0]);

        /*/*var YLine = d3.scale.linear().range([height, 0])
        .domain([0, d3.max(Data, function (d) { return d3.max(d.LineCategory, function (b) { return b.Value }) })]);*/

        var YLine = d3.scale.linear().range([height, 0])
        .domain([0, maxds]);

        var color = d3.scale.ordinal()
            .range(["#d0743c", "#8a89a6", "#7b6888", "#6b486b", "#a05d56", "#d0743c", "#ff8c00"]);

        var line = d3.svg.line().x(function (d) {
            return x0(d.Date) + x0.rangeBand() / 2;
        }).y(function (d) { return YLine(d.Value) });




        var xAxis = d3.svg.axis()
            .scale(x0)
            .orient("bottom");

        var yAxis = d3.svg.axis()
            .scale(y)
            .orient("left")
            .tickFormat(d3.format(".2s"));

        var YLeftAxis = d3.svg.axis().scale(YLine).orient("right").tickFormat(d3.format(".2s"));

        var svg5 = d3.select("#dd05").select("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
          .append("g")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");



        // Bar Data categories
        Data.forEach(function (d) {
            d.Categories.forEach(function (b) {
                if (Categories.findIndex(function (c) { return c.Name===b.Name}) == -1) {
                    b.Type = "bar";
                    console.log(JSON.stringify(b))
                    Categories.push(b)
                }
            })
        });


        // Line Data categories
        Data.forEach(function (d) {
            d.LineCategory.forEach(function (b) {
                if (Categories.findIndex(function (c) { return c.Name === b.Name }) == -1) {
                    b.Type = "line";
                    console.log(JSON.stringify(b))
                    Categories.push(b)
                }
            })
        });

        // Processing Line data
        lineData5 = DataSegregator(Data.map(function (d) { return d.LineCategory }), "Name");
//alert(lineData)
        // Line Coloring
        LineColor = d3.scale.ordinal();
        LineColor.domain(Categories.filter(function (d) { return d.Type == "line" }).map(function (d) { return d.Name }));
        LineColor.range(["#d40606", "#06bf00", "#98bdc5", "#671919", "#0b172b"])
        x0.domain(Data.map(function (d) { return d.Date; }));
        XLine.domain(Data.map(function (d) { return d.Date; }));
        x1.domain(Categories.filter(function (d) { return d.Type == "bar" }).map(function (d) { return d.Name})).rangeRoundBands([0, x0.rangeBand()]);
        //y.domain([0, maxds]);
		y.domain([0, maxds]);
       /*svg.append("g")
            .attr("class", "x axis")
            .attr("transform", "translate(0," + height + ")")
            .call(xAxis);*/

        /*svg.append("g")
           .attr("class", "y axis")
            .attr("transform", "translate(" + (width) + ",0)")
           .call(YLeftAxis)

         .append("text")
           .attr("transform", "rotate(-90)")
           .attr("y", -10)

           .attr("dy", ".71em")
           .style("text-anchor", "end")
           .text("Percent");*/

        svg5.append("g")
            .attr("class", "y axis")
            .attr("id","yaxis5")
            .call(yAxis)
          .append("text")
            .attr("transform", "rotate(-90)")
            .attr("y", 6)
            .attr("dy", ".71em")
            .style("text-anchor", "end")
            .text("Valueu");
var nv1  = (Data[0].Categories[0].Value)
//alert(nv1)
var newy1 = y(nv1)
///alert(newy1)
var neww1 = height-y(nv1)
//alert(neww1)
d3.select(".l5category1").transition().duration(1500).attr("y",newy1)
d3.select(".l5category1").attr("height",neww1)

var nv2  = (Data[1].Categories[0].Value)
//alert(nv2)
var newy2 = y(nv2)
//alert(newy2)
var neww2 = height-y(nv2)
//alert(neww2)
d3.select(".l5category2").transition().duration(1500).attr("y",newy2)
d3.select(".l5category2").attr("height",neww2)
/*        var state = svg.selectAll(".state")
            .data(Data).select('g')
            .enter().selectAll("g") /*
            .attr("class", "state")
            .attr("transform", function (d) { return "translate(" + x0(d.Date) + ",0)"; });
alert(675)
        state.selectAll("rect")
            .data(function (d) { return d.Categories; })
         // .enter().append("rect")
            .attr("width", x1.rangeBand())
            .attr("x", function (d) { return x1(d.Name); })
            .attr("y", function (d) { return y(d.Value); })
            .attr("class", function (d) { return 'l1' + (d.gg); })
            //.attr("height", function (d) { return height - y(d.Value); })
            .style("fill", function (d) { return color(d.gg); })
            .transition().delay(500).attrTween("height", function (d) {
                var i = d3.interpolate(0, height - y(d.Value));
                return function (t)
                {
                    return i(t);
                }
            });*/

        // drawaing lines
        setTimeout(function () {svg5.selectAll(".lines").data(lineData5).enter().append("g").attr("class", "line")
        .each(function (d) {
            Name=d[0].Name
            d3.select(this).append("path").attr("d", function (b) { return line(b) }).style({ "stroke-width": "6px", "fill": "none" }).style("stroke", LineColor(Name)).style("stroke-linecap", "round").transition().duration(1500);
        })},1500)
        
/*   
        // Legends

        var LegendHolder = svg.append("g").attr("class", "legendHolder");
        var legend = LegendHolder.selectAll(".legend")
            .data(Categories.map(function (d) { return {"Name":d.Name,"Type":d.Type}}))
          .enter().append("g")
            .attr("class", "legend")
            .attr("transform", function (d, i) { return "translate(0," +( height+ margin.bottom/2 )+ ")"; })
            .each(function (d,i) {
                //  Legend Symbols

                d3.select(this).append("rect")
                .attr("width", function () { return 18 })
                .attr("x", function (b) {

                    left = (i+1) * 15 + i * 18 + i * 5 + textWidthHolder;
                    return left;
                })
                 .attr("y", function (b) { return b.Type == 'bar'?0:7})
                .attr("height", function (b) { return b.Type== 'bar'? 18:5 })
                .style("fill", function (b) { return b.Type == 'bar' ? color(d.Name) : LineColor(d.Name) });

                //  Legend Text

                d3.select(this).append("text")
                .attr("x", function (b) {

                    left = (i+1) * 15 + (i+1) * 18 + (i + 1) * 5 + textWidthHolder;

                    return left;
                })
                .attr("y", 9)
                .attr("dy", ".35em")
                .style("text-anchor", "start")
                .text(d.Name);

                textWidthHolder += getTextWidth(d.Name, "10px", "calibri");
            });


        // Legend Placing

        d3.select(".legendHolder").attr("transform", function (d) {
            thisWidth = d3.select(this).node().getBBox().width;
            return "translate(" + ((width) / 2 - thisWidth / 2) + ",0)";
        })
        svg.append('image')
          .attr('xlink:href', 'https://raw.githubusercontent.com/ssissouf/ha/master/FoodAndLA_EN.bmp')
           .attr('width', 260)
           .attr('height', 150)
           .attr("x",330)
           .attr("y",100)*/

           d3.selectAll("#yaxis6").remove();
           Data = [
{ Date: "imports", Categories: [{ Name: "Category1", Value: dataset.v03, gg:"category1" }], LineCategory: [{ Name: "Line1", Value: dataset.v03 }] },
{ Date: "exports", Categories: [{ Name: "Category1", Value: dataset.v13, gg:"category2" }], LineCategory: [{ Name: "Line1", Value: dataset.v13 }] },
       ]

       var margin = { top: Math.round((+d3.select("#dd01").style('height').slice(0, -2))*0.1), right: Math.round((+d3.select("#dd01").style('width').slice(0, -2))*0.05), bottom: Math.round((+d3.select("#dd01").style('height').slice(0, -2))*0.02), left: Math.round((+d3.select("#dd01").style('width').slice(0, -2))*0.1) },
            width = Math.round((+d3.select("#dd01").style('width').slice(0, -2))*0.5) - margin.left - margin.right,
            height = Math.round((+d3.select("#dd01").style('height').slice(0, -2))*1) - margin.top - margin.bottom;

        var textWidthHolder = 0;
        /// Adding Date in LineCategory
        Data.forEach(function (d) {
            d.LineCategory.forEach(function (b) {
                b.Date = d.Date;
            })
        });

//alert(maxds)


        var Categories = new Array();
        // Extension method declaration

        Categories.pro

        var Data;
        var ageNames;
        var x0 = d3.scale.ordinal()
            .rangeRoundBands([0, width], .1);
        var XLine = d3.scale.ordinal()
            .rangeRoundPoints([0, width], .1);
        var x1 = d3.scale.ordinal();

        var y = d3.scale.linear()
            .range([height, 0]);

        /*/*var YLine = d3.scale.linear().range([height, 0])
        .domain([0, d3.max(Data, function (d) { return d3.max(d.LineCategory, function (b) { return b.Value }) })]);*/

        var YLine = d3.scale.linear().range([height, 0])
        .domain([0, maxds]);

        var color = d3.scale.ordinal()
            .range(["#d0743c", "#8a89a6", "#7b6888", "#6b486b", "#a05d56", "#d0743c", "#ff8c00"]);

        var line = d3.svg.line().x(function (d) {
            return x0(d.Date) + x0.rangeBand() / 2;
        }).y(function (d) { return YLine(d.Value) });




        var xAxis = d3.svg.axis()
            .scale(x0)
            .orient("bottom");

        var yAxis = d3.svg.axis()
            .scale(y)
            .orient("left")
            .tickFormat(d3.format(".2s"));

        var YLeftAxis = d3.svg.axis().scale(YLine).orient("right").tickFormat(d3.format(".2s"));

        var svg6 = d3.select("#dd21").select("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
          .append("g")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");



        // Bar Data categories
        Data.forEach(function (d) {
            d.Categories.forEach(function (b) {
                if (Categories.findIndex(function (c) { return c.Name===b.Name}) == -1) {
                    b.Type = "bar";
                    console.log(JSON.stringify(b))
                    Categories.push(b)
                }
            })
        });


        // Line Data categories
        Data.forEach(function (d) {
            d.LineCategory.forEach(function (b) {
                if (Categories.findIndex(function (c) { return c.Name === b.Name }) == -1) {
                    b.Type = "line";
                    console.log(JSON.stringify(b))
                    Categories.push(b)
                }
            })
        });

        // Processing Line data
        lineData6 = DataSegregator(Data.map(function (d) { return d.LineCategory }), "Name");
//alert(lineData)
        // Line Coloring
        LineColor = d3.scale.ordinal();
        LineColor.domain(Categories.filter(function (d) { return d.Type == "line" }).map(function (d) { return d.Name }));
        LineColor.range(["#d40606", "#06bf00", "#98bdc5", "#671919", "#0b172b"])
        x0.domain(Data.map(function (d) { return d.Date; }));
        XLine.domain(Data.map(function (d) { return d.Date; }));
        x1.domain(Categories.filter(function (d) { return d.Type == "bar" }).map(function (d) { return d.Name})).rangeRoundBands([0, x0.rangeBand()]);
        //y.domain([0, maxds]);
		y.domain([0, maxds]);
       /*svg.append("g")
            .attr("class", "x axis")
            .attr("transform", "translate(0," + height + ")")
            .call(xAxis);*/

        /*svg.append("g")
           .attr("class", "y axis")
            .attr("transform", "translate(" + (width) + ",0)")
           .call(YLeftAxis)

         .append("text")
           .attr("transform", "rotate(-90)")
           .attr("y", -10)

           .attr("dy", ".71em")
           .style("text-anchor", "end")
           .text("Percent");*/

        svg6.append("g")
            .attr("class", "y axis")
            .attr("id","yaxis6")
            .call(yAxis)
          .append("text")
            .attr("transform", "rotate(-90)")
            .attr("y", 6)
            .attr("dy", ".71em")
            .style("text-anchor", "end")
            .text("Valueu");
var nv1  = (Data[0].Categories[0].Value)
//alert(nv1)
var newy1 = y(nv1)
///alert(newy1)
var neww1 = height-y(nv1)
//alert(neww1)
d3.select(".l6category1").transition().duration(1500).attr("y",newy1)
d3.select(".l6category1").attr("height",neww1)

var nv2  = (Data[1].Categories[0].Value)
//alert(nv2)
var newy2 = y(nv2)
//alert(newy2)
var neww2 = height-y(nv2)
//alert(neww2)
d3.select(".l6category2").transition().duration(1500).attr("y",newy2)
d3.select(".l6category2").attr("height",neww2)
/*        var state = svg.selectAll(".state")
            .data(Data).select('g')
            .enter().selectAll("g") /*
            .attr("class", "state")
            .attr("transform", function (d) { return "translate(" + x0(d.Date) + ",0)"; });
alert(675)
        state.selectAll("rect")
            .data(function (d) { return d.Categories; })
         // .enter().append("rect")
            .attr("width", x1.rangeBand())
            .attr("x", function (d) { return x1(d.Name); })
            .attr("y", function (d) { return y(d.Value); })
            .attr("class", function (d) { return 'l1' + (d.gg); })
            //.attr("height", function (d) { return height - y(d.Value); })
            .style("fill", function (d) { return color(d.gg); })
            .transition().delay(500).attrTween("height", function (d) {
                var i = d3.interpolate(0, height - y(d.Value));
                return function (t)
                {
                    return i(t);
                }
            });*/

        // drawaing lines
        setTimeout(function () {svg6.selectAll(".lines").data(lineData6).enter().append("g").attr("class", "line")
        .each(function (d) {
            Name=d[0].Name
            d3.select(this).append("path").attr("d", function (b) { return line(b) }).style({ "stroke-width": "6px", "fill": "none" }).style("stroke", LineColor(Name)).style("stroke-linecap", "round").transition().duration(1500);
        })},1500)
        
/*   
        // Legends

        var LegendHolder = svg.append("g").attr("class", "legendHolder");
        var legend = LegendHolder.selectAll(".legend")
            .data(Categories.map(function (d) { return {"Name":d.Name,"Type":d.Type}}))
          .enter().append("g")
            .attr("class", "legend")
            .attr("transform", function (d, i) { return "translate(0," +( height+ margin.bottom/2 )+ ")"; })
            .each(function (d,i) {
                //  Legend Symbols

                d3.select(this).append("rect")
                .attr("width", function () { return 18 })
                .attr("x", function (b) {

                    left = (i+1) * 15 + i * 18 + i * 5 + textWidthHolder;
                    return left;
                })
                 .attr("y", function (b) { return b.Type == 'bar'?0:7})
                .attr("height", function (b) { return b.Type== 'bar'? 18:5 })
                .style("fill", function (b) { return b.Type == 'bar' ? color(d.Name) : LineColor(d.Name) });

                //  Legend Text

                d3.select(this).append("text")
                .attr("x", function (b) {

                    left = (i+1) * 15 + (i+1) * 18 + (i + 1) * 5 + textWidthHolder;

                    return left;
                })
                .attr("y", 9)
                .attr("dy", ".35em")
                .style("text-anchor", "start")
                .text(d.Name);

                textWidthHolder += getTextWidth(d.Name, "10px", "calibri");
            });


        // Legend Placing

        d3.select(".legendHolder").attr("transform", function (d) {
            thisWidth = d3.select(this).node().getBBox().width;
            return "translate(" + ((width) / 2 - thisWidth / 2) + ",0)";
        })
        svg.append('image')
          .attr('xlink:href', 'https://raw.githubusercontent.com/ssissouf/ha/master/FoodAndLA_EN.bmp')
           .attr('width', 260)
           .attr('height', 150)
           .attr("x",330)
           .attr("y",100)*/

           d3.selectAll("#yaxis7").remove();
           Data = [
{ Date: "imports", Categories: [{ Name: "Category1", Value: dataset.v03, gg:"category1" }], LineCategory: [{ Name: "Line1", Value: dataset.v03 }] },
{ Date: "exports", Categories: [{ Name: "Category1", Value: dataset.v13, gg:"category2" }], LineCategory: [{ Name: "Line1", Value: dataset.v13 }] },
       ]

       var margin = { top: Math.round((+d3.select("#dd01").style('height').slice(0, -2))*0.1), right: Math.round((+d3.select("#dd01").style('width').slice(0, -2))*0.05), bottom: Math.round((+d3.select("#dd01").style('height').slice(0, -2))*0.02), left: Math.round((+d3.select("#dd01").style('width').slice(0, -2))*0.1) },
            width = Math.round((+d3.select("#dd01").style('width').slice(0, -2))*0.5) - margin.left - margin.right,
            height = Math.round((+d3.select("#dd01").style('height').slice(0, -2))*1) - margin.top - margin.bottom;

        var textWidthHolder = 0;
        /// Adding Date in LineCategory
        Data.forEach(function (d) {
            d.LineCategory.forEach(function (b) {
                b.Date = d.Date;
            })
        });

//alert(maxds)


        var Categories = new Array();
        // Extension method declaration

        Categories.pro

        var Data;
        var ageNames;
        var x0 = d3.scale.ordinal()
            .rangeRoundBands([0, width], .1);
        var XLine = d3.scale.ordinal()
            .rangeRoundPoints([0, width], .1);
        var x1 = d3.scale.ordinal();

        var y = d3.scale.linear()
            .range([height, 0]);

        /*/*var YLine = d3.scale.linear().range([height, 0])
        .domain([0, d3.max(Data, function (d) { return d3.max(d.LineCategory, function (b) { return b.Value }) })]);*/

        var YLine = d3.scale.linear().range([height, 0])
        .domain([0, maxds]);

        var color = d3.scale.ordinal()
            .range(["#d0743c", "#8a89a6", "#7b6888", "#6b486b", "#a05d56", "#d0743c", "#ff8c00"]);

        var line = d3.svg.line().x(function (d) {
            return x0(d.Date) + x0.rangeBand() / 2;
        }).y(function (d) { return YLine(d.Value) });




        var xAxis = d3.svg.axis()
            .scale(x0)
            .orient("bottom");

        var yAxis = d3.svg.axis()
            .scale(y)
            .orient("left")
            .tickFormat(d3.format(".2s"));

        var YLeftAxis = d3.svg.axis().scale(YLine).orient("right").tickFormat(d3.format(".2s"));

        var svg7 = d3.select("#dd22").select("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
          .append("g")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");



        // Bar Data categories
        Data.forEach(function (d) {
            d.Categories.forEach(function (b) {
                if (Categories.findIndex(function (c) { return c.Name===b.Name}) == -1) {
                    b.Type = "bar";
                    console.log(JSON.stringify(b))
                    Categories.push(b)
                }
            })
        });


        // Line Data categories
        Data.forEach(function (d) {
            d.LineCategory.forEach(function (b) {
                if (Categories.findIndex(function (c) { return c.Name === b.Name }) == -1) {
                    b.Type = "line";
                    console.log(JSON.stringify(b))
                    Categories.push(b)
                }
            })
        });

        // Processing Line data
        lineData7 = DataSegregator(Data.map(function (d) { return d.LineCategory }), "Name");
//alert(lineData)
        // Line Coloring
        LineColor = d3.scale.ordinal();
        LineColor.domain(Categories.filter(function (d) { return d.Type == "line" }).map(function (d) { return d.Name }));
        LineColor.range(["#d40606", "#06bf00", "#98bdc5", "#671919", "#0b172b"])
        x0.domain(Data.map(function (d) { return d.Date; }));
        XLine.domain(Data.map(function (d) { return d.Date; }));
        x1.domain(Categories.filter(function (d) { return d.Type == "bar" }).map(function (d) { return d.Name})).rangeRoundBands([0, x0.rangeBand()]);
        //y.domain([0, maxds]);
		y.domain([0, maxds]);
       /*svg.append("g")
            .attr("class", "x axis")
            .attr("transform", "translate(0," + height + ")")
            .call(xAxis);*/

        /*svg.append("g")
           .attr("class", "y axis")
            .attr("transform", "translate(" + (width) + ",0)")
           .call(YLeftAxis)

         .append("text")
           .attr("transform", "rotate(-90)")
           .attr("y", -10)

           .attr("dy", ".71em")
           .style("text-anchor", "end")
           .text("Percent");*/

        svg2.append("g")
            .attr("class", "y axis")
            .attr("id","yaxis1")
            .call(yAxis)
          .append("text")
            .attr("transform", "rotate(-90)")
            .attr("y", 6)
            .attr("dy", ".71em")
            .style("text-anchor", "end")
            .text("Valueu");
var nv1  = (Data[0].Categories[0].Value)
//alert(nv1)
var newy1 = y(nv1)
///alert(newy1)
var neww1 = height-y(nv1)
//alert(neww1)
d3.select(".l7category1").transition().duration(1500).attr("y",newy1)
d3.select(".l7category1").attr("height",neww1)

var nv2  = (Data[1].Categories[0].Value)
//alert(nv2)
var newy2 = y(nv2)
//alert(newy2)
var neww2 = height-y(nv2)
//alert(neww2)
d3.select(".l7category2").transition().duration(1500).attr("y",newy2)
d3.select(".l7category2").attr("height",neww2)
/*        var state = svg.selectAll(".state")
            .data(Data).select('g')
            .enter().selectAll("g") /*
            .attr("class", "state")
            .attr("transform", function (d) { return "translate(" + x0(d.Date) + ",0)"; });
alert(675)
        state.selectAll("rect")
            .data(function (d) { return d.Categories; })
         // .enter().append("rect")
            .attr("width", x1.rangeBand())
            .attr("x", function (d) { return x1(d.Name); })
            .attr("y", function (d) { return y(d.Value); })
            .attr("class", function (d) { return 'l1' + (d.gg); })
            //.attr("height", function (d) { return height - y(d.Value); })
            .style("fill", function (d) { return color(d.gg); })
            .transition().delay(500).attrTween("height", function (d) {
                var i = d3.interpolate(0, height - y(d.Value));
                return function (t)
                {
                    return i(t);
                }
            });*/

        // drawaing lines
        setTimeout(function () {svg7.selectAll(".lines").data(lineData7).enter().append("g").attr("class", "line")
        .each(function (d) {
            Name=d[0].Name
            d3.select(this).append("path").attr("d", function (b) { return line(b) }).style({ "stroke-width": "6px", "fill": "none" }).style("stroke", LineColor(Name)).style("stroke-linecap", "round").transition().duration(1500);
        })},1500)
        
/*   
        // Legends

        var LegendHolder = svg.append("g").attr("class", "legendHolder");
        var legend = LegendHolder.selectAll(".legend")
            .data(Categories.map(function (d) { return {"Name":d.Name,"Type":d.Type}}))
          .enter().append("g")
            .attr("class", "legend")
            .attr("transform", function (d, i) { return "translate(0," +( height+ margin.bottom/2 )+ ")"; })
            .each(function (d,i) {
                //  Legend Symbols

                d3.select(this).append("rect")
                .attr("width", function () { return 18 })
                .attr("x", function (b) {

                    left = (i+1) * 15 + i * 18 + i * 5 + textWidthHolder;
                    return left;
                })
                 .attr("y", function (b) { return b.Type == 'bar'?0:7})
                .attr("height", function (b) { return b.Type== 'bar'? 18:5 })
                .style("fill", function (b) { return b.Type == 'bar' ? color(d.Name) : LineColor(d.Name) });

                //  Legend Text

                d3.select(this).append("text")
                .attr("x", function (b) {

                    left = (i+1) * 15 + (i+1) * 18 + (i + 1) * 5 + textWidthHolder;

                    return left;
                })
                .attr("y", 9)
                .attr("dy", ".35em")
                .style("text-anchor", "start")
                .text(d.Name);

                textWidthHolder += getTextWidth(d.Name, "10px", "calibri");
            });


        // Legend Placing

        d3.select(".legendHolder").attr("transform", function (d) {
            thisWidth = d3.select(this).node().getBBox().width;
            return "translate(" + ((width) / 2 - thisWidth / 2) + ",0)";
        })
        svg.append('image')
          .attr('xlink:href', 'https://raw.githubusercontent.com/ssissouf/ha/master/FoodAndLA_EN.bmp')
           .attr('width', 260)
           .attr('height', 150)
           .attr("x",330)
           .attr("y",100)*/

           d3.selectAll("#yaxis8").remove();
           Data = [
{ Date: "imports", Categories: [{ Name: "Category1", Value: dataset.v03, gg:"category1" }], LineCategory: [{ Name: "Line1", Value: dataset.v03 }] },
{ Date: "exports", Categories: [{ Name: "Category1", Value: dataset.v13, gg:"category2" }], LineCategory: [{ Name: "Line1", Value: dataset.v13 }] },
       ]

       var margin = { top: Math.round((+d3.select("#dd01").style('height').slice(0, -2))*0.1), right: Math.round((+d3.select("#dd01").style('width').slice(0, -2))*0.05), bottom: Math.round((+d3.select("#dd01").style('height').slice(0, -2))*0.02), left: Math.round((+d3.select("#dd01").style('width').slice(0, -2))*0.1) },
            width = Math.round((+d3.select("#dd01").style('width').slice(0, -2))*0.5) - margin.left - margin.right,
            height = Math.round((+d3.select("#dd01").style('height').slice(0, -2))*1) - margin.top - margin.bottom;

        var textWidthHolder = 0;
        /// Adding Date in LineCategory
        Data.forEach(function (d) {
            d.LineCategory.forEach(function (b) {
                b.Date = d.Date;
            })
        });

//alert(maxds)


        var Categories = new Array();
        // Extension method declaration

        Categories.pro

        var Data;
        var ageNames;
        var x0 = d3.scale.ordinal()
            .rangeRoundBands([0, width], .1);
        var XLine = d3.scale.ordinal()
            .rangeRoundPoints([0, width], .1);
        var x1 = d3.scale.ordinal();

        var y = d3.scale.linear()
            .range([height, 0]);

        /*/*var YLine = d3.scale.linear().range([height, 0])
        .domain([0, d3.max(Data, function (d) { return d3.max(d.LineCategory, function (b) { return b.Value }) })]);*/

        var YLine = d3.scale.linear().range([height, 0])
        .domain([0, maxds]);

        var color = d3.scale.ordinal()
            .range(["#d0743c", "#8a89a6", "#7b6888", "#6b486b", "#a05d56", "#d0743c", "#ff8c00"]);

        var line = d3.svg.line().x(function (d) {
            return x0(d.Date) + x0.rangeBand() / 2;
        }).y(function (d) { return YLine(d.Value) });




        var xAxis = d3.svg.axis()
            .scale(x0)
            .orient("bottom");

        var yAxis = d3.svg.axis()
            .scale(y)
            .orient("left")
            .tickFormat(d3.format(".2s"));

        var YLeftAxis = d3.svg.axis().scale(YLine).orient("right").tickFormat(d3.format(".2s"));

        var svg8 = d3.select("#dd23").select("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
          .append("g")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");



        // Bar Data categories
        Data.forEach(function (d) {
            d.Categories.forEach(function (b) {
                if (Categories.findIndex(function (c) { return c.Name===b.Name}) == -1) {
                    b.Type = "bar";
                    console.log(JSON.stringify(b))
                    Categories.push(b)
                }
            })
        });


        // Line Data categories
        Data.forEach(function (d) {
            d.LineCategory.forEach(function (b) {
                if (Categories.findIndex(function (c) { return c.Name === b.Name }) == -1) {
                    b.Type = "line";
                    console.log(JSON.stringify(b))
                    Categories.push(b)
                }
            })
        });

        // Processing Line data
        lineData8 = DataSegregator(Data.map(function (d) { return d.LineCategory }), "Name");
//alert(lineData)
        // Line Coloring
        LineColor = d3.scale.ordinal();
        LineColor.domain(Categories.filter(function (d) { return d.Type == "line" }).map(function (d) { return d.Name }));
        LineColor.range(["#d40606", "#06bf00", "#98bdc5", "#671919", "#0b172b"])
        x0.domain(Data.map(function (d) { return d.Date; }));
        XLine.domain(Data.map(function (d) { return d.Date; }));
        x1.domain(Categories.filter(function (d) { return d.Type == "bar" }).map(function (d) { return d.Name})).rangeRoundBands([0, x0.rangeBand()]);
        //y.domain([0, maxds]);
		y.domain([0, maxds]);
       /*svg.append("g")
            .attr("class", "x axis")
            .attr("transform", "translate(0," + height + ")")
            .call(xAxis);*/

        /*svg.append("g")
           .attr("class", "y axis")
            .attr("transform", "translate(" + (width) + ",0)")
           .call(YLeftAxis)

         .append("text")
           .attr("transform", "rotate(-90)")
           .attr("y", -10)

           .attr("dy", ".71em")
           .style("text-anchor", "end")
           .text("Percent");*/

        svg8.append("g")
            .attr("class", "y axis")
            .attr("id","yaxis7")
            .call(yAxis)
          .append("text")
            .attr("transform", "rotate(-90)")
            .attr("y", 6)
            .attr("dy", ".71em")
            .style("text-anchor", "end")
            .text("Valueu");
var nv1  = (Data[0].Categories[0].Value)
//alert(nv1)
var newy1 = y(nv1)
///alert(newy1)
var neww1 = height-y(nv1)
//alert(neww1)
d3.select(".l8category1").transition().duration(1500).attr("y",newy1)
d3.select(".l8category1").attr("height",neww1)

var nv2  = (Data[1].Categories[0].Value)
//alert(nv2)
var newy2 = y(nv2)
//alert(newy2)
var neww2 = height-y(nv2)
//alert(neww2)
d3.select(".l8category2").transition().duration(1500).attr("y",newy2)
d3.select(".l8category2").attr("height",neww2)
/*        var state = svg.selectAll(".state")
            .data(Data).select('g')
            .enter().selectAll("g") /*
            .attr("class", "state")
            .attr("transform", function (d) { return "translate(" + x0(d.Date) + ",0)"; });
alert(675)
        state.selectAll("rect")
            .data(function (d) { return d.Categories; })
         // .enter().append("rect")
            .attr("width", x1.rangeBand())
            .attr("x", function (d) { return x1(d.Name); })
            .attr("y", function (d) { return y(d.Value); })
            .attr("class", function (d) { return 'l1' + (d.gg); })
            //.attr("height", function (d) { return height - y(d.Value); })
            .style("fill", function (d) { return color(d.gg); })
            .transition().delay(500).attrTween("height", function (d) {
                var i = d3.interpolate(0, height - y(d.Value));
                return function (t)
                {
                    return i(t);
                }
            });*/

        // drawaing lines
        setTimeout(function () {svg8.selectAll(".lines").data(lineData8).enter().append("g").attr("class", "line")
        .each(function (d) {
            Name=d[0].Name
            d3.select(this).append("path").attr("d", function (b) { return line(b) }).style({ "stroke-width": "6px", "fill": "none" }).style("stroke", LineColor(Name)).style("stroke-linecap", "round").transition().duration(1500);
        })},1500)
        
/*   
        // Legends

        var LegendHolder = svg.append("g").attr("class", "legendHolder");
        var legend = LegendHolder.selectAll(".legend")
            .data(Categories.map(function (d) { return {"Name":d.Name,"Type":d.Type}}))
          .enter().append("g")
            .attr("class", "legend")
            .attr("transform", function (d, i) { return "translate(0," +( height+ margin.bottom/2 )+ ")"; })
            .each(function (d,i) {
                //  Legend Symbols

                d3.select(this).append("rect")
                .attr("width", function () { return 18 })
                .attr("x", function (b) {

                    left = (i+1) * 15 + i * 18 + i * 5 + textWidthHolder;
                    return left;
                })
                 .attr("y", function (b) { return b.Type == 'bar'?0:7})
                .attr("height", function (b) { return b.Type== 'bar'? 18:5 })
                .style("fill", function (b) { return b.Type == 'bar' ? color(d.Name) : LineColor(d.Name) });

                //  Legend Text

                d3.select(this).append("text")
                .attr("x", function (b) {

                    left = (i+1) * 15 + (i+1) * 18 + (i + 1) * 5 + textWidthHolder;

                    return left;
                })
                .attr("y", 9)
                .attr("dy", ".35em")
                .style("text-anchor", "start")
                .text(d.Name);

                textWidthHolder += getTextWidth(d.Name, "10px", "calibri");
            });


        // Legend Placing

        d3.select(".legendHolder").attr("transform", function (d) {
            thisWidth = d3.select(this).node().getBBox().width;
            return "translate(" + ((width) / 2 - thisWidth / 2) + ",0)";
        })
        svg.append('image')
          .attr('xlink:href', 'https://raw.githubusercontent.com/ssissouf/ha/master/FoodAndLA_EN.bmp')
           .attr('width', 260)
           .attr('height', 150)
           .attr("x",330)
           .attr("y",100)*/

           d3.selectAll("#yaxis9").remove();
           Data = [
{ Date: "imports", Categories: [{ Name: "Category1", Value: dataset.v03, gg:"category1" }], LineCategory: [{ Name: "Line1", Value: dataset.v03 }] },
{ Date: "exports", Categories: [{ Name: "Category1", Value: dataset.v13, gg:"category2" }], LineCategory: [{ Name: "Line1", Value: dataset.v13 }] },
       ]

       var margin = { top: Math.round((+d3.select("#dd01").style('height').slice(0, -2))*0.1), right: Math.round((+d3.select("#dd01").style('width').slice(0, -2))*0.05), bottom: Math.round((+d3.select("#dd01").style('height').slice(0, -2))*0.02), left: Math.round((+d3.select("#dd01").style('width').slice(0, -2))*0.1) },
            width = Math.round((+d3.select("#dd01").style('width').slice(0, -2))*0.5) - margin.left - margin.right,
            height = Math.round((+d3.select("#dd01").style('height').slice(0, -2))*1) - margin.top - margin.bottom;

        var textWidthHolder = 0;
        /// Adding Date in LineCategory
        Data.forEach(function (d) {
            d.LineCategory.forEach(function (b) {
                b.Date = d.Date;
            })
        });

//alert(maxds)


        var Categories = new Array();
        // Extension method declaration

        Categories.pro

        var Data;
        var ageNames;
        var x0 = d3.scale.ordinal()
            .rangeRoundBands([0, width], .1);
        var XLine = d3.scale.ordinal()
            .rangeRoundPoints([0, width], .1);
        var x1 = d3.scale.ordinal();

        var y = d3.scale.linear()
            .range([height, 0]);

        /*/*var YLine = d3.scale.linear().range([height, 0])
        .domain([0, d3.max(Data, function (d) { return d3.max(d.LineCategory, function (b) { return b.Value }) })]);*/

        var YLine = d3.scale.linear().range([height, 0])
        .domain([0, maxds]);

        var color = d3.scale.ordinal()
            .range(["#d0743c", "#8a89a6", "#7b6888", "#6b486b", "#a05d56", "#d0743c", "#ff8c00"]);

        var line = d3.svg.line().x(function (d) {
            return x0(d.Date) + x0.rangeBand() / 2;
        }).y(function (d) { return YLine(d.Value) });




        var xAxis = d3.svg.axis()
            .scale(x0)
            .orient("bottom");

        var yAxis = d3.svg.axis()
            .scale(y)
            .orient("left")
            .tickFormat(d3.format(".2s"));

        var YLeftAxis = d3.svg.axis().scale(YLine).orient("right").tickFormat(d3.format(".2s"));

        var svg9 = d3.select("#dd24").select("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
          .append("g")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");



        // Bar Data categories
        Data.forEach(function (d) {
            d.Categories.forEach(function (b) {
                if (Categories.findIndex(function (c) { return c.Name===b.Name}) == -1) {
                    b.Type = "bar";
                    console.log(JSON.stringify(b))
                    Categories.push(b)
                }
            })
        });


        // Line Data categories
        Data.forEach(function (d) {
            d.LineCategory.forEach(function (b) {
                if (Categories.findIndex(function (c) { return c.Name === b.Name }) == -1) {
                    b.Type = "line";
                    console.log(JSON.stringify(b))
                    Categories.push(b)
                }
            })
        });

        // Processing Line data
        lineData9 = DataSegregator(Data.map(function (d) { return d.LineCategory }), "Name");
//alert(lineData)
        // Line Coloring
        LineColor = d3.scale.ordinal();
        LineColor.domain(Categories.filter(function (d) { return d.Type == "line" }).map(function (d) { return d.Name }));
        LineColor.range(["#d40606", "#06bf00", "#98bdc5", "#671919", "#0b172b"])
        x0.domain(Data.map(function (d) { return d.Date; }));
        XLine.domain(Data.map(function (d) { return d.Date; }));
        x1.domain(Categories.filter(function (d) { return d.Type == "bar" }).map(function (d) { return d.Name})).rangeRoundBands([0, x0.rangeBand()]);
        //y.domain([0, maxds]);
		y.domain([0, maxds]);
       /*svg.append("g")
            .attr("class", "x axis")
            .attr("transform", "translate(0," + height + ")")
            .call(xAxis);*/

        /*svg.append("g")
           .attr("class", "y axis")
            .attr("transform", "translate(" + (width) + ",0)")
           .call(YLeftAxis)

         .append("text")
           .attr("transform", "rotate(-90)")
           .attr("y", -10)

           .attr("dy", ".71em")
           .style("text-anchor", "end")
           .text("Percent");*/

        svg9.append("g")
            .attr("class", "y axis")
            .attr("id","yaxis9")
            .call(yAxis)
          .append("text")
            .attr("transform", "rotate(-90)")
            .attr("y", 6)
            .attr("dy", ".71em")
            .style("text-anchor", "end")
            .text("Valueu");
var nv1  = (Data[0].Categories[0].Value)
//alert(nv1)
var newy1 = y(nv1)
///alert(newy1)
var neww1 = height-y(nv1)
//alert(neww1)
d3.select(".l9category1").transition().duration(1500).attr("y",newy1)
d3.select(".l9category1").attr("height",neww1)

var nv2  = (Data[1].Categories[0].Value)
//alert(nv2)
var newy2 = y(nv2)
//alert(newy2)
var neww2 = height-y(nv2)
//alert(neww2)
d3.select(".l9category2").transition().duration(1500).attr("y",newy2)
d3.select(".l9category2").attr("height",neww2)
/*        var state = svg.selectAll(".state")
            .data(Data).select('g')
            .enter().selectAll("g") /*
            .attr("class", "state")
            .attr("transform", function (d) { return "translate(" + x0(d.Date) + ",0)"; });
alert(675)
        state.selectAll("rect")
            .data(function (d) { return d.Categories; })
         // .enter().append("rect")
            .attr("width", x1.rangeBand())
            .attr("x", function (d) { return x1(d.Name); })
            .attr("y", function (d) { return y(d.Value); })
            .attr("class", function (d) { return 'l1' + (d.gg); })
            //.attr("height", function (d) { return height - y(d.Value); })
            .style("fill", function (d) { return color(d.gg); })
            .transition().delay(500).attrTween("height", function (d) {
                var i = d3.interpolate(0, height - y(d.Value));
                return function (t)
                {
                    return i(t);
                }
            });*/

        // drawaing lines
        setTimeout(function () {svg9.selectAll(".lines").data(lineData9).enter().append("g").attr("class", "line")
        .each(function (d) {
            Name=d[0].Name
            d3.select(this).append("path").attr("d", function (b) { return line(b) }).style({ "stroke-width": "6px", "fill": "none" }).style("stroke", LineColor(Name)).style("stroke-linecap", "round").transition().duration(1500);
        })},1500)
        
/*   
        // Legends

        var LegendHolder = svg.append("g").attr("class", "legendHolder");
        var legend = LegendHolder.selectAll(".legend")
            .data(Categories.map(function (d) { return {"Name":d.Name,"Type":d.Type}}))
          .enter().append("g")
            .attr("class", "legend")
            .attr("transform", function (d, i) { return "translate(0," +( height+ margin.bottom/2 )+ ")"; })
            .each(function (d,i) {
                //  Legend Symbols

                d3.select(this).append("rect")
                .attr("width", function () { return 18 })
                .attr("x", function (b) {

                    left = (i+1) * 15 + i * 18 + i * 5 + textWidthHolder;
                    return left;
                })
                 .attr("y", function (b) { return b.Type == 'bar'?0:7})
                .attr("height", function (b) { return b.Type== 'bar'? 18:5 })
                .style("fill", function (b) { return b.Type == 'bar' ? color(d.Name) : LineColor(d.Name) });

                //  Legend Text

                d3.select(this).append("text")
                .attr("x", function (b) {

                    left = (i+1) * 15 + (i+1) * 18 + (i + 1) * 5 + textWidthHolder;

                    return left;
                })
                .attr("y", 9)
                .attr("dy", ".35em")
                .style("text-anchor", "start")
                .text(d.Name);

                textWidthHolder += getTextWidth(d.Name, "10px", "calibri");
            });


        // Legend Placing

        d3.select(".legendHolder").attr("transform", function (d) {
            thisWidth = d3.select(this).node().getBBox().width;
            return "translate(" + ((width) / 2 - thisWidth / 2) + ",0)";
        })
        svg.append('image')
          .attr('xlink:href', 'https://raw.githubusercontent.com/ssissouf/ha/master/FoodAndLA_EN.bmp')
           .attr('width', 260)
           .attr('height', 150)
           .attr("x",330)
           .attr("y",100)*/

           d3.selectAll("#yaxis10").remove();
           Data = [
{ Date: "imports", Categories: [{ Name: "Category1", Value: dataset.v03, gg:"category1" }], LineCategory: [{ Name: "Line1", Value: dataset.v03 }] },
{ Date: "exports", Categories: [{ Name: "Category1", Value: dataset.v13, gg:"category2" }], LineCategory: [{ Name: "Line1", Value: dataset.v13 }] },
       ]

       var margin = { top: Math.round((+d3.select("#dd01").style('height').slice(0, -2))*0.1), right: Math.round((+d3.select("#dd01").style('width').slice(0, -2))*0.05), bottom: Math.round((+d3.select("#dd01").style('height').slice(0, -2))*0.02), left: Math.round((+d3.select("#dd01").style('width').slice(0, -2))*0.1) },
            width = Math.round((+d3.select("#dd01").style('width').slice(0, -2))*0.5) - margin.left - margin.right,
            height = Math.round((+d3.select("#dd01").style('height').slice(0, -2))*1) - margin.top - margin.bottom;

        var textWidthHolder = 0;
        /// Adding Date in LineCategory
        Data.forEach(function (d) {
            d.LineCategory.forEach(function (b) {
                b.Date = d.Date;
            })
        });

//alert(maxds)


        var Categories = new Array();
        // Extension method declaration

        Categories.pro

        var Data;
        var ageNames;
        var x0 = d3.scale.ordinal()
            .rangeRoundBands([0, width], .1);
        var XLine = d3.scale.ordinal()
            .rangeRoundPoints([0, width], .1);
        var x1 = d3.scale.ordinal();

        var y = d3.scale.linear()
            .range([height, 0]);

        /*/*var YLine = d3.scale.linear().range([height, 0])
        .domain([0, d3.max(Data, function (d) { return d3.max(d.LineCategory, function (b) { return b.Value }) })]);*/

        var YLine = d3.scale.linear().range([height, 0])
        .domain([0, maxds]);

        var color = d3.scale.ordinal()
            .range(["#d0743c", "#8a89a6", "#7b6888", "#6b486b", "#a05d56", "#d0743c", "#ff8c00"]);

        var line = d3.svg.line().x(function (d) {
            return x0(d.Date) + x0.rangeBand() / 2;
        }).y(function (d) { return YLine(d.Value) });




        var xAxis = d3.svg.axis()
            .scale(x0)
            .orient("bottom");

        var yAxis = d3.svg.axis()
            .scale(y)
            .orient("left")
            .tickFormat(d3.format(".2s"));

        var YLeftAxis = d3.svg.axis().scale(YLine).orient("right").tickFormat(d3.format(".2s"));

        var svg10 = d3.select("#dd25").select("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
          .append("g")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");



        // Bar Data categories
        Data.forEach(function (d) {
            d.Categories.forEach(function (b) {
                if (Categories.findIndex(function (c) { return c.Name===b.Name}) == -1) {
                    b.Type = "bar";
                    console.log(JSON.stringify(b))
                    Categories.push(b)
                }
            })
        });


        // Line Data categories
        Data.forEach(function (d) {
            d.LineCategory.forEach(function (b) {
                if (Categories.findIndex(function (c) { return c.Name === b.Name }) == -1) {
                    b.Type = "line";
                    console.log(JSON.stringify(b))
                    Categories.push(b)
                }
            })
        });

        // Processing Line data
        lineData10 = DataSegregator(Data.map(function (d) { return d.LineCategory }), "Name");
//alert(lineData)
        // Line Coloring
        LineColor = d3.scale.ordinal();
        LineColor.domain(Categories.filter(function (d) { return d.Type == "line" }).map(function (d) { return d.Name }));
        LineColor.range(["#d40606", "#06bf00", "#98bdc5", "#671919", "#0b172b"])
        x0.domain(Data.map(function (d) { return d.Date; }));
        XLine.domain(Data.map(function (d) { return d.Date; }));
        x1.domain(Categories.filter(function (d) { return d.Type == "bar" }).map(function (d) { return d.Name})).rangeRoundBands([0, x0.rangeBand()]);
        //y.domain([0, maxds]);
		y.domain([0, maxds]);
       /*svg.append("g")
            .attr("class", "x axis")
            .attr("transform", "translate(0," + height + ")")
            .call(xAxis);*/

        /*svg.append("g")
           .attr("class", "y axis")
            .attr("transform", "translate(" + (width) + ",0)")
           .call(YLeftAxis)

         .append("text")
           .attr("transform", "rotate(-90)")
           .attr("y", -10)

           .attr("dy", ".71em")
           .style("text-anchor", "end")
           .text("Percent");*/

        svg10.append("g")
            .attr("class", "y axis")
            .attr("id","yaxis1")
            .call(yAxis)
          .append("text")
            .attr("transform", "rotate(-90)")
            .attr("y", 6)
            .attr("dy", ".71em")
            .style("text-anchor", "end")
            .text("Valueu");
var nv1  = (Data[0].Categories[0].Value)
//alert(nv1)
var newy1 = y(nv1)
///alert(newy1)
var neww1 = height-y(nv1)
//alert(neww1)
d3.select(".l10category1").transition().duration(1500).attr("y",newy1)
d3.select(".l10category1").attr("height",neww1)

var nv2  = (Data[1].Categories[0].Value)
//alert(nv2)
var newy2 = y(nv2)
//alert(newy2)
var neww2 = height-y(nv2)
//alert(neww2)
d3.select(".l10category2").transition().duration(1500).attr("y",newy2)
d3.select(".l10category2").attr("height",neww2)
/*        var state = svg.selectAll(".state")
            .data(Data).select('g')
            .enter().selectAll("g") /*
            .attr("class", "state")
            .attr("transform", function (d) { return "translate(" + x0(d.Date) + ",0)"; });
alert(675)
        state.selectAll("rect")
            .data(function (d) { return d.Categories; })
         // .enter().append("rect")
            .attr("width", x1.rangeBand())
            .attr("x", function (d) { return x1(d.Name); })
            .attr("y", function (d) { return y(d.Value); })
            .attr("class", function (d) { return 'l1' + (d.gg); })
            //.attr("height", function (d) { return height - y(d.Value); })
            .style("fill", function (d) { return color(d.gg); })
            .transition().delay(500).attrTween("height", function (d) {
                var i = d3.interpolate(0, height - y(d.Value));
                return function (t)
                {
                    return i(t);
                }
            });*/

        // drawaing lines
        setTimeout(function () {svg10.selectAll(".lines").data(lineData10).enter().append("g").attr("class", "line")
        .each(function (d) {
            Name=d[0].Name
            d3.select(this).append("path").attr("d", function (b) { return line(b) }).style({ "stroke-width": "6px", "fill": "none" }).style("stroke", LineColor(Name)).style("stroke-linecap", "round").transition().duration(1500);
        })},1500)
        
/*   
        // Legends

        var LegendHolder = svg.append("g").attr("class", "legendHolder");
        var legend = LegendHolder.selectAll(".legend")
            .data(Categories.map(function (d) { return {"Name":d.Name,"Type":d.Type}}))
          .enter().append("g")
            .attr("class", "legend")
            .attr("transform", function (d, i) { return "translate(0," +( height+ margin.bottom/2 )+ ")"; })
            .each(function (d,i) {
                //  Legend Symbols

                d3.select(this).append("rect")
                .attr("width", function () { return 18 })
                .attr("x", function (b) {

                    left = (i+1) * 15 + i * 18 + i * 5 + textWidthHolder;
                    return left;
                })
                 .attr("y", function (b) { return b.Type == 'bar'?0:7})
                .attr("height", function (b) { return b.Type== 'bar'? 18:5 })
                .style("fill", function (b) { return b.Type == 'bar' ? color(d.Name) : LineColor(d.Name) });

                //  Legend Text

                d3.select(this).append("text")
                .attr("x", function (b) {

                    left = (i+1) * 15 + (i+1) * 18 + (i + 1) * 5 + textWidthHolder;

                    return left;
                })
                .attr("y", 9)
                .attr("dy", ".35em")
                .style("text-anchor", "start")
                .text(d.Name);

                textWidthHolder += getTextWidth(d.Name, "10px", "calibri");
            });


        // Legend Placing

        d3.select(".legendHolder").attr("transform", function (d) {
            thisWidth = d3.select(this).node().getBBox().width;
            return "translate(" + ((width) / 2 - thisWidth / 2) + ",0)";
        })
        svg.append('image')
          .attr('xlink:href', 'https://raw.githubusercontent.com/ssissouf/ha/master/FoodAndLA_EN.bmp')
           .attr('width', 260)
           .attr('height', 150)
           .attr("x",330)
           .attr("y",100)*/

//++++++++++++++++++++++++++++++++++++++++++
//alert(66)


var svg = d3.select("#dd11")
		//.select("svg:svg")

var width = Math.round((+d3.select("#dd11").style('width').slice(0, -2))*1),
    height = Math.round((+d3.select("#dd11").style('height').slice(0, -2))*1),
	radius = Math.min(width, height) /3;

var pie = d3.layout.pie()
	.sort(null)
	.value(function(d) {
		return d.value;
	});

var arc = d3.svg.arc()
	.outerRadius(radius * 0.8)
	.innerRadius(radius * 0.4);

var outerArc = d3.svg.arc()
	.innerRadius(radius * 1.3)
	.outerRadius(radius * 1.3);

svg.attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");

var key = function(d){ return d.data.label; };

var color = d3.scale.ordinal()
	.domain(["Lorem ipsum", "dolor sit", "amet", "consectetur", "adipisicing", "elit", "sed", "do", "eiusmod", "tempor", "incididunt"])
	.range(["#98abc5", "#8a89a6", "#7b6888", "#6b486b", "#a05d56", "#d0743c", "#ff8c00"]);

function randomData (){
	var labels = color.domain();
	return labels.map(function(label){
		return { label: label, value: Math.random(), imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/agri.png' }
	});
}

var arr=[
           {label:'value1',
            value: dataset.v01,
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/FoodAndLA_EN.bmp'},
           {label:'value2',
            value:dataset.v02,
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/boissons1.bmp'},
           {label:'value3',
            value:dataset.v03,
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/merauxnonc.bmp'},
            {label:'value4',
            value:dataset.v04,
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/mineral%20fuels%20etc.bmp'},
			{label:'value5',
            value:dataset.v05,
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/butter.bmp'},
           {label:'value6',
            value:dataset.v06,
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/chemistry.bmp'},
           {label:'value7',
            value:dataset.v07,
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/clothes.bmp'},
            {label:'value8',
            value:dataset.v08,
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/bus.bmp'},
			{label:'value9',
            value:dataset.v09,
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/amd.bmp'},
           {label:'value10',
            value:dataset.v10,
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/tourism0.bmp'},
        ];

function mydata (){
		return arr;
}

d3.select(".randomize")
	.on("click", function(){
		change(randomData());
	});

// change(randomData());

change(arr);

function change(data) {

	/* ------- PIE SLICES -------*/
	var slice = svg.select(".slices").selectAll("path.slice")
		.data(pie(data), key);

	slice.enter()
		.insert("path")
		.style("fill", function(d) { return color(d.data.label); })
		.attr("class", "slice");

	slice		
		.transition().duration(1000)
		.attrTween("d", function(d) {
			this._current = this._current || d;
			var interpolate = d3.interpolate(this._current, d);
			this._current = interpolate(0);
			return function(t) {
				return arc(interpolate(t));
			};
		})

	slice.exit()
		.remove();

	/* ------- TEXT LABELS -------*/

	var text = svg.select(".labels").selectAll("text")
		.data(pie(data), key);
		
	var img = svg.select(".images").selectAll("image")
	  .data(pie(data), key);
	  
	 text.enter()
		.append("text")
		.filter(function(d,i){
		  return d.data.label !== "do";
		})
		.attr("dy", ".35em")
		.text(function(d) {
			return "(" + d.data.value+ ")";
		});

	text.transition().duration(1000)
		.attrTween("transform", function(d) {
			this._current = this._current || d;
			var interpolate = d3.interpolate(this._current, d);
			this._current = interpolate(0);
			return function(t) {
				var d2 = interpolate(t);
				var pos = outerArc.centroid(d2);
				pos[0] = radius * (midAngle(d2) < Math.PI ? 2 : -2);
				return "translate("+ pos +")";
			};
		})
		.styleTween("text-anchor", function(d){
			this._current = this._current || d;
			var interpolate = d3.interpolate(this._current, d);
			this._current = interpolate(0);
			return function(t) {
				var d2 = interpolate(t);
				return midAngle(d2) < Math.PI ? "start":"end";
			};
		});
		
	function midAngle(d){
		return d.startAngle + (d.endAngle - d.startAngle)/2;
	}

	text.exit()
		.remove();
		
	img.enter()
		.append("image")
		.filter(function(d,i){
		  return d.data.label;
		})
		.attr("xlink:href", function(d,i){
		  return d.data.imglink;
		})
    .attr("width", 200)
    .attr("height", 70);
    
  img.transition().duration(1000)
		.attrTween("transform", function(d) {
			this._current = this._current || d;
			var interpolate = d3.interpolate(this._current, d);
			this._current = interpolate(0);
			return function(t) {
				var d2 = interpolate(t);
				var pos = outerArc.centroid(d2);
				pos[0] = radius * 0.6 * (midAngle(d2) < Math.PI ? 2 : -3);
				return "translate("+ pos +")";
			};
		})
    
	img.exit()
		.remove();

	/* ------- SLICE TO TEXT POLYLINES -------*/

	var polyline = svg.select(".lines").selectAll("polyline")
		.data(pie(data), key);
	
	polyline.enter()
		.append("polyline");

	polyline.transition().duration(1000)
		.attrTween("points", function(d){
			this._current = this._current || d;
			var interpolate = d3.interpolate(this._current, d);
			this._current = interpolate(0);
			return function(t) {
				var d2 = interpolate(t);
				var pos = outerArc.centroid(d2);
				pos[0] = radius * 0.6 * (midAngle(d2) < Math.PI ? 2 : -2);
				return [arc.centroid(d2), outerArc.centroid(d2), pos];
			};			
		});
	
	polyline.exit()
		.remove();
};


var svg = d3.select("#dd16")
		//.select("svg:svg")

var width = Math.round((+d3.select("#dd11").style('width').slice(0, -2))*1),
    height = Math.round((+d3.select("#dd11").style('height').slice(0, -2))*1),
	radius = Math.min(width, height) /3;

var pie = d3.layout.pie()
	.sort(null)
	.value(function(d) {
		return d.value;
	});

var arc = d3.svg.arc()
	.outerRadius(radius * 0.8)
	.innerRadius(radius * 0.4);

var outerArc = d3.svg.arc()
	.innerRadius(radius * 1.3)
	.outerRadius(radius * 1.3);

svg.attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");

var key = function(d){ return d.data.label; };

var color = d3.scale.ordinal()
	.domain(["Lorem ipsum", "dolor sit", "amet", "consectetur", "adipisicing", "elit", "sed", "do", "eiusmod", "tempor", "incididunt"])
	.range(["#98abc5", "#8a89a6", "#7b6888", "#6b486b", "#a05d56", "#d0743c", "#ff8c00"]);

function randomData (){
	var labels = color.domain();
	return labels.map(function(label){
		return { label: label, value: Math.random(), imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/agri.png' }
	});
}

var arr=[
           {label:'value1',
            value: dataset.v11,
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/FoodAndLA_EN.bmp'},
           {label:'value2',
            value:dataset.v12,
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/boissons1.bmp'},
           {label:'value3',
            value:dataset.v13,
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/merauxnonc.bmp'},
            {label:'value4',
            value:dataset.v14,
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/mineral%20fuels%20etc.bmp'},
			{label:'value5',
            value:dataset.v15,
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/butter.bmp'},
           {label:'value6',
            value:dataset.v16,
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/chemistry.bmp'},
           {label:'value7',
            value:dataset.v17,
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/clothes.bmp'},
            {label:'value8',
            value:dataset.v18,
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/bus.bmp'},
			{label:'value9',
            value:dataset.v19,
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/amd.bmp'},
           {label:'value10',
            value:dataset.v20,
            imglink: 'https://raw.githubusercontent.com/ssissouf/ha/master/tourism0.bmp'},
        ];

function mydata (){
		return arr;
}

d3.select(".randomize")
	.on("click", function(){
		change(randomData());
	});

// change(randomData());

change(arr);

function change(data) {

	/* ------- PIE SLICES -------*/
	var slice = svg.select(".slices").selectAll("path.slice")
		.data(pie(data), key);

	slice.enter()
		.insert("path")
		.style("fill", function(d) { return color(d.data.label); })
		.attr("class", "slice");

	slice		
		.transition().duration(1000)
		.attrTween("d", function(d) {
			this._current = this._current || d;
			var interpolate = d3.interpolate(this._current, d);
			this._current = interpolate(0);
			return function(t) {
				return arc(interpolate(t));
			};
		})

	slice.exit()
		.remove();

	/* ------- TEXT LABELS -------*/

	var text = svg.select(".labels").selectAll("text")
		.data(pie(data), key);
		
	var img = svg.select(".images").selectAll("image")
	  .data(pie(data), key);
	  
	 text.enter()
		.append("text")
		.filter(function(d,i){
		  return d.data.label !== "do";
		})
		.attr("dy", ".35em")
		.text(function(d) {
			return "(" + d.data.value+ ")";
		});

	text.transition().duration(1000)
		.attrTween("transform", function(d) {
			this._current = this._current || d;
			var interpolate = d3.interpolate(this._current, d);
			this._current = interpolate(0);
			return function(t) {
				var d2 = interpolate(t);
				var pos = outerArc.centroid(d2);
				pos[0] = radius * (midAngle(d2) < Math.PI ? 2 : -2);
				return "translate("+ pos +")";
			};
		})
		.styleTween("text-anchor", function(d){
			this._current = this._current || d;
			var interpolate = d3.interpolate(this._current, d);
			this._current = interpolate(0);
			return function(t) {
				var d2 = interpolate(t);
				return midAngle(d2) < Math.PI ? "start":"end";
			};
		});
		
	function midAngle(d){
		return d.startAngle + (d.endAngle - d.startAngle)/2;
	}

	text.exit()
		.remove();
		
	img.enter()
		.append("image")
		.filter(function(d,i){
		  return d.data.label;
		})
		.attr("xlink:href", function(d,i){
		  return d.data.imglink;
		})
    .attr("width", 200)
    .attr("height", 70);
    
  img.transition().duration(1000)
		.attrTween("transform", function(d) {
			this._current = this._current || d;
			var interpolate = d3.interpolate(this._current, d);
			this._current = interpolate(0);
			return function(t) {
				var d2 = interpolate(t);
				var pos = outerArc.centroid(d2);
				pos[0] = radius * 0.6 * (midAngle(d2) < Math.PI ? 2 : -3);
				return "translate("+ pos +")";
			};
		})
    
	img.exit()
		.remove();

	/* ------- SLICE TO TEXT POLYLINES -------*/

	var polyline = svg.select(".lines").selectAll("polyline")
		.data(pie(data), key);
	
	polyline.enter()
		.append("polyline");

	polyline.transition().duration(1000)
		.attrTween("points", function(d){
			this._current = this._current || d;
			var interpolate = d3.interpolate(this._current, d);
			this._current = interpolate(0);
			return function(t) {
				var d2 = interpolate(t);
				var pos = outerArc.centroid(d2);
				pos[0] = radius * 0.6 * (midAngle(d2) < Math.PI ? 2 : -2);
				return [arc.centroid(d2), outerArc.centroid(d2), pos];
			};			
		});
	
	polyline.exit()
		.remove();
};




}
</script>
</body>